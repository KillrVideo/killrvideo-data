{
  "video_id": "ENC764T83ZQ",
  "title": "Document API in Astra DB - Introduction and Curl",
  "description": "We demonstrate the basic features of the Stargate Document API using Astra DB. Check out the entire Astra playlist https://www.youtube.com/playlist?list=PL2g2h-wyI4SpWK1G3UaxXhzZc6aUFXbvL.\n\nCONNECT WITH DATASTAX\nSubscribe: http://www.youtube.com/c/datastaxdevs?sub_confirmation=1 \nTwitter: https://twitter.com/datastaxdevs\nTwitch: https://www.twitch.tv/datastaxdevs\n\nTry using the Stargate Document API with our Katacoda exercise for free here: https://katacoda.com/shallada/courses/astra-core-course/astra-document-api\n\nYou can find documentation on the Document API here: https://docs.datastax.com/en/astra/docs/_attachments/docv2.html\n\nAbout DataStax:\nDataStax is the company behind the massively scalable, highly available, cloud-native NoSQL data platform built on Apache Cassandra™. DataStax gives developers and enterprises the freedom to run data in any cloud, Kubernetes, hybrid or bare metal at global scale with zero downtime and zero lock-in. More than 450 of the world’s leading enterprises including Capital One, Cisco, Comcast, Delta Airlines, Macy’s, McDonald’s, Safeway, Sony, and Walmart use DataStax to build transformational data architectures for real-world outcomes. For more, visit DataStax.com and @DataStax.\n\nAbout DataStax Developer:\nOn the DataStax Developers YouTube channel, you can find tutorials, workshops and much more to help you learn and stay updated with the latest information on Apache Cassandra©.  Visit https://datastax.com/dev for more free learning resources.",
  "published_at": "2021-06-23T21:23:59Z",
  "thumbnail": "https://i.ytimg.com/vi/ENC764T83ZQ/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "scalable",
    "demo",
    "workshop",
    "cassandra",
    "tutorial",
    "apache_cassandra",
    "nosql",
    "introduction",
    "astra",
    "architecture",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=ENC764T83ZQ",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] stargate provides api endpoints for cassandra databases including astra db which is datastax cassandra as a service offering one of these apis presents a json document model interface or in other words a document database document databases associate keys with values where the values are json documents this sounds a bit like a key value database but the values of a key value database are opaque alternatively document databases understand and can navigate the contents of json documents we'll show you how this works as with other stargate apis we start by setting up some environment variables that will make it easier to use the document api login to astra select the database you want to use and click the connect tab make sure the document api is selected from the left navigation and click here to copy the necessary environment variables in a terminal window paste the environment variables you just copied you see that we need to supply a token before we can set that last variable to get the token return to the astra user interface and from the drop down menu on the left select organization settings from the left navigation select token management then create a token by selecting the database administrator role and clicking the generate token button copy the token value by clicking here back in the terminal delete the placeholder paste the token value and execute the export command now we're going to use curl to access the document api our document database has a hierarchical structure consisting of name spaces which map to cassandra key spaces namespaces contain collections and collections contain documents we'll use a put verb to create the document within the collection in this example we'll name the collection products which we include as part of the document url endpoint also we will include the document id or key as the final part of the url endpoint here's what the entire endpoint looks like as part of the curl command we'll include these headers the first header indicates we're using a json payload and the second header contains the authentication token finally we include the json for the document we will also pipe the output from the command into jq to make sure the output is easy to read let's execute the command you see that stargate responds by returning the document id let's query the document to verify we really stored it the query curl command uses the same endpoint url including the document id but we use a get verb we can retrieve a sub document by appending the json path to the end of the url let's update the document to update any part of the document we can use a patch command by convention we use put commands for creating documents and patch commands for updating documents cassandra does not perform a read before writing so an insert behaves the same way as an update which we refer to as an upsert therefore a put and a patch really behave the same way and can be used interchangeably within the document api but we use patch for updates just to make it explicit here's an example of an update notice we only supply the values for the sub document let's execute the command and retrieve the entire document to review what we did notice that if we only want to retrieve the sub document we just modified we can do that by appending the json path to the url as shown here with the delete verb we can remove all or part of a document depending on the url endpoint we supply let's remove a sub document with this command and retrieve the entire document to see the results now let's delete the entire document that's all there is to it of course you can find more documentation on the document api by clicking here and then clicking here and here",
    "segments": [
      {
        "start": 0.21,
        "duration": 4.98,
        "text": "[Music]"
      },
      {
        "start": 5.6,
        "duration": 3.52,
        "text": "stargate"
      },
      {
        "start": 6.399,
        "duration": 3.841,
        "text": "provides api endpoints for cassandra"
      },
      {
        "start": 9.12,
        "duration": 4.32,
        "text": "databases"
      },
      {
        "start": 10.24,
        "duration": 7.6,
        "text": "including astra db which is datastax"
      },
      {
        "start": 13.44,
        "duration": 7.2,
        "text": "cassandra as a service offering"
      },
      {
        "start": 17.84,
        "duration": 3.68,
        "text": "one of these apis presents a json"
      },
      {
        "start": 20.64,
        "duration": 3.84,
        "text": "document"
      },
      {
        "start": 21.52,
        "duration": 5.44,
        "text": "model interface or in other words a"
      },
      {
        "start": 24.48,
        "duration": 5.92,
        "text": "document database"
      },
      {
        "start": 26.96,
        "duration": 6.4,
        "text": "document databases associate keys with"
      },
      {
        "start": 30.4,
        "duration": 5.12,
        "text": "values where the values are json"
      },
      {
        "start": 33.36,
        "duration": 4.56,
        "text": "documents"
      },
      {
        "start": 35.52,
        "duration": 3.92,
        "text": "this sounds a bit like a key value"
      },
      {
        "start": 37.92,
        "duration": 4.08,
        "text": "database"
      },
      {
        "start": 39.44,
        "duration": 5.279,
        "text": "but the values of a key value database"
      },
      {
        "start": 42.0,
        "duration": 5.76,
        "text": "are opaque"
      },
      {
        "start": 44.719,
        "duration": 5.68,
        "text": "alternatively document databases"
      },
      {
        "start": 47.76,
        "duration": 5.2,
        "text": "understand and can navigate the contents"
      },
      {
        "start": 50.399,
        "duration": 5.84,
        "text": "of json documents"
      },
      {
        "start": 52.96,
        "duration": 6.8,
        "text": "we'll show you how this works"
      },
      {
        "start": 56.239,
        "duration": 5.84,
        "text": "as with other stargate apis we start by"
      },
      {
        "start": 59.76,
        "duration": 4.399,
        "text": "setting up some environment variables"
      },
      {
        "start": 62.079,
        "duration": 4.961,
        "text": "that will make it easier to use the"
      },
      {
        "start": 64.159,
        "duration": 6.0,
        "text": "document api"
      },
      {
        "start": 67.04,
        "duration": 3.119,
        "text": "login to astra"
      },
      {
        "start": 71.119,
        "duration": 3.921,
        "text": "select the database you want to use and"
      },
      {
        "start": 74.08,
        "duration": 5.92,
        "text": "click the connect"
      },
      {
        "start": 75.04,
        "duration": 8.0,
        "text": "tab make sure the document api"
      },
      {
        "start": 80.0,
        "duration": 6.0,
        "text": "is selected from the left navigation"
      },
      {
        "start": 83.04,
        "duration": 6.32,
        "text": "and click here to copy the necessary"
      },
      {
        "start": 86.0,
        "duration": 3.36,
        "text": "environment variables"
      },
      {
        "start": 90.079,
        "duration": 4.241,
        "text": "in a terminal window paste the"
      },
      {
        "start": 92.88,
        "duration": 4.48,
        "text": "environment variables"
      },
      {
        "start": 94.32,
        "duration": 5.2,
        "text": "you just copied"
      },
      {
        "start": 97.36,
        "duration": 4.0,
        "text": "you see that we need to supply a token"
      },
      {
        "start": 99.52,
        "duration": 6.4,
        "text": "before we can set that last"
      },
      {
        "start": 101.36,
        "duration": 7.759,
        "text": "variable to get the token"
      },
      {
        "start": 105.92,
        "duration": 5.839,
        "text": "return to the astra user interface and"
      },
      {
        "start": 109.119,
        "duration": 6.64,
        "text": "from the drop down menu on the left"
      },
      {
        "start": 111.759,
        "duration": 7.121,
        "text": "select organization settings"
      },
      {
        "start": 115.759,
        "duration": 5.36,
        "text": "from the left navigation select token"
      },
      {
        "start": 118.88,
        "duration": 5.199,
        "text": "management"
      },
      {
        "start": 121.119,
        "duration": 5.201,
        "text": "then create a token by selecting the"
      },
      {
        "start": 124.079,
        "duration": 5.281,
        "text": "database administrator role"
      },
      {
        "start": 126.32,
        "duration": 7.52,
        "text": "and clicking the generate token button"
      },
      {
        "start": 129.36,
        "duration": 6.72,
        "text": "copy the token value by clicking here"
      },
      {
        "start": 133.84,
        "duration": 3.52,
        "text": "back in the terminal delete the"
      },
      {
        "start": 136.08,
        "duration": 4.08,
        "text": "placeholder"
      },
      {
        "start": 137.36,
        "duration": 6.48,
        "text": "paste the token value and execute the"
      },
      {
        "start": 140.16,
        "duration": 3.68,
        "text": "export command"
      },
      {
        "start": 143.92,
        "duration": 5.44,
        "text": "now we're going to use curl to access"
      },
      {
        "start": 147.04,
        "duration": 5.199,
        "text": "the document api"
      },
      {
        "start": 149.36,
        "duration": 3.519,
        "text": "our document database has a hierarchical"
      },
      {
        "start": 152.239,
        "duration": 3.441,
        "text": "structure"
      },
      {
        "start": 152.879,
        "duration": 6.0,
        "text": "consisting of name spaces which map to"
      },
      {
        "start": 155.68,
        "duration": 6.16,
        "text": "cassandra key spaces"
      },
      {
        "start": 158.879,
        "duration": 6.801,
        "text": "namespaces contain collections and"
      },
      {
        "start": 161.84,
        "duration": 3.84,
        "text": "collections contain documents"
      },
      {
        "start": 169.04,
        "duration": 4.8,
        "text": "we'll use a put verb to create the"
      },
      {
        "start": 171.04,
        "duration": 4.88,
        "text": "document within the collection"
      },
      {
        "start": 173.84,
        "duration": 3.92,
        "text": "in this example we'll name the"
      },
      {
        "start": 175.92,
        "duration": 4.0,
        "text": "collection products"
      },
      {
        "start": 177.76,
        "duration": 4.72,
        "text": "which we include as part of the document"
      },
      {
        "start": 179.92,
        "duration": 5.76,
        "text": "url endpoint"
      },
      {
        "start": 182.48,
        "duration": 6.479,
        "text": "also we will include the document id"
      },
      {
        "start": 185.68,
        "duration": 6.88,
        "text": "or key as the final part of the url"
      },
      {
        "start": 188.959,
        "duration": 5.681,
        "text": "endpoint here's what the entire endpoint"
      },
      {
        "start": 192.56,
        "duration": 4.319,
        "text": "looks like"
      },
      {
        "start": 194.64,
        "duration": 5.12,
        "text": "as part of the curl command we'll"
      },
      {
        "start": 196.879,
        "duration": 5.28,
        "text": "include these headers"
      },
      {
        "start": 199.76,
        "duration": 4.16,
        "text": "the first header indicates we're using a"
      },
      {
        "start": 202.159,
        "duration": 3.681,
        "text": "json payload"
      },
      {
        "start": 203.92,
        "duration": 4.8,
        "text": "and the second header contains the"
      },
      {
        "start": 205.84,
        "duration": 5.92,
        "text": "authentication token"
      },
      {
        "start": 208.72,
        "duration": 5.28,
        "text": "finally we include the json for the"
      },
      {
        "start": 211.76,
        "duration": 4.399,
        "text": "document"
      },
      {
        "start": 214.0,
        "duration": 4.239,
        "text": "we will also pipe the output from the"
      },
      {
        "start": 216.159,
        "duration": 5.281,
        "text": "command into jq"
      },
      {
        "start": 218.239,
        "duration": 6.321,
        "text": "to make sure the output is easy to read"
      },
      {
        "start": 221.44,
        "duration": 5.28,
        "text": "let's execute the command"
      },
      {
        "start": 224.56,
        "duration": 5.039,
        "text": "you see that stargate responds by"
      },
      {
        "start": 226.72,
        "duration": 5.2,
        "text": "returning the document id"
      },
      {
        "start": 229.599,
        "duration": 4.801,
        "text": "let's query the document to verify we"
      },
      {
        "start": 231.92,
        "duration": 5.12,
        "text": "really stored it"
      },
      {
        "start": 234.4,
        "duration": 4.399,
        "text": "the query curl command uses the same"
      },
      {
        "start": 237.04,
        "duration": 4.72,
        "text": "endpoint url"
      },
      {
        "start": 238.799,
        "duration": 3.281,
        "text": "including the document id but we use a"
      },
      {
        "start": 241.76,
        "duration": 2.64,
        "text": "get"
      },
      {
        "start": 242.08,
        "duration": 2.32,
        "text": "verb"
      },
      {
        "start": 246.159,
        "duration": 3.681,
        "text": "we can retrieve a sub document by"
      },
      {
        "start": 248.239,
        "duration": 6.881,
        "text": "appending the json path"
      },
      {
        "start": 249.84,
        "duration": 9.04,
        "text": "to the end of the url"
      },
      {
        "start": 255.12,
        "duration": 5.04,
        "text": "let's update the document to update any"
      },
      {
        "start": 258.88,
        "duration": 5.52,
        "text": "part of the document"
      },
      {
        "start": 260.16,
        "duration": 6.319,
        "text": "we can use a patch command by convention"
      },
      {
        "start": 264.4,
        "duration": 3.12,
        "text": "we use put commands for creating"
      },
      {
        "start": 266.479,
        "duration": 2.881,
        "text": "documents"
      },
      {
        "start": 267.52,
        "duration": 3.679,
        "text": "and patch commands for updating"
      },
      {
        "start": 269.36,
        "duration": 4.48,
        "text": "documents"
      },
      {
        "start": 271.199,
        "duration": 4.0,
        "text": "cassandra does not perform a read before"
      },
      {
        "start": 273.84,
        "duration": 4.56,
        "text": "writing"
      },
      {
        "start": 275.199,
        "duration": 4.401,
        "text": "so an insert behaves the same way as an"
      },
      {
        "start": 278.4,
        "duration": 4.32,
        "text": "update"
      },
      {
        "start": 279.6,
        "duration": 6.24,
        "text": "which we refer to as an upsert"
      },
      {
        "start": 282.72,
        "duration": 3.68,
        "text": "therefore a put and a patch really"
      },
      {
        "start": 285.84,
        "duration": 2.88,
        "text": "behave"
      },
      {
        "start": 286.4,
        "duration": 3.359,
        "text": "the same way and can be used"
      },
      {
        "start": 288.72,
        "duration": 4.479,
        "text": "interchangeably"
      },
      {
        "start": 289.759,
        "duration": 5.601,
        "text": "within the document api but we use"
      },
      {
        "start": 293.199,
        "duration": 4.241,
        "text": "patch for updates just to make it"
      },
      {
        "start": 295.36,
        "duration": 5.76,
        "text": "explicit"
      },
      {
        "start": 297.44,
        "duration": 6.24,
        "text": "here's an example of an update"
      },
      {
        "start": 301.12,
        "duration": 4.079,
        "text": "notice we only supply the values for the"
      },
      {
        "start": 303.68,
        "duration": 4.16,
        "text": "sub document"
      },
      {
        "start": 305.199,
        "duration": 4.161,
        "text": "let's execute the command and retrieve"
      },
      {
        "start": 307.84,
        "duration": 4.799,
        "text": "the entire document"
      },
      {
        "start": 309.36,
        "duration": 3.279,
        "text": "to review what we did"
      },
      {
        "start": 312.88,
        "duration": 5.28,
        "text": "notice that if we only want to retrieve"
      },
      {
        "start": 315.28,
        "duration": 5.28,
        "text": "the sub document we just modified"
      },
      {
        "start": 318.16,
        "duration": 4.24,
        "text": "we can do that by appending the json"
      },
      {
        "start": 320.56,
        "duration": 5.84,
        "text": "path to the url"
      },
      {
        "start": 322.4,
        "duration": 7.12,
        "text": "as shown here with the delete verb"
      },
      {
        "start": 326.4,
        "duration": 7.2,
        "text": "we can remove all or part of a document"
      },
      {
        "start": 329.52,
        "duration": 5.92,
        "text": "depending on the url endpoint we supply"
      },
      {
        "start": 333.6,
        "duration": 4.8,
        "text": "let's remove a sub document with this"
      },
      {
        "start": 335.44,
        "duration": 6.0,
        "text": "command and retrieve the entire document"
      },
      {
        "start": 338.4,
        "duration": 3.04,
        "text": "to see the results"
      },
      {
        "start": 343.6,
        "duration": 4.72,
        "text": "now let's delete the entire document"
      },
      {
        "start": 349.12,
        "duration": 5.04,
        "text": "that's all there is to it of course"
      },
      {
        "start": 352.32,
        "duration": 3.12,
        "text": "you can find more documentation on the"
      },
      {
        "start": 354.16,
        "duration": 4.64,
        "text": "document api"
      },
      {
        "start": 355.44,
        "duration": 12.4,
        "text": "by clicking here and then clicking here"
      },
      {
        "start": 358.8,
        "duration": 9.04,
        "text": "and here"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-15T20:29:06.763840+00:00"
}