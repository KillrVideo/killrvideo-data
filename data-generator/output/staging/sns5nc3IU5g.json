{
  "video_id": "sns5nc3IU5g",
  "title": "DS201.12 Replication | Foundations of Apache Cassandra",
  "description": "#DataStaxAcademy #DS201\nDS201.12 REPLICATION\nIn this unit, you will learn about replication. Replication within an Apache Cassandra ring is a very important topic when it comes to operations and data modeling.\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-11T01:06:47Z",
  "thumbnail": "https://i.ytimg.com/vi/sns5nc3IU5g/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "data_modeling",
    "cassandra",
    "tutorial",
    "apache_cassandra",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=sns5nc3IU5g",
  "transcript": {
    "available": true,
    "language": "Chinese",
    "language_code": "zh",
    "is_generated": false,
    "text": "DS201.12: Replication（数据复制） 让我们来讨论下Cassandra哈希环中的\nReplication（数据复制） 这不仅在数据库运维中是个很重要的概念\n对于数据建模也十分关键 这能让你清楚地知道你的数据在哪里 以及怎样根据你的数据模型\n来决定你的数据所在的位置 这是非常基础的概念 即Cassandra的哈希环是如何复制数据的 我的观点是 这正是Cassandra\n在数据复制这方面独领风骚的独门秘诀 没有任何其他数据库掌握同样的技能\n它非常的特别 所以这到底是什么呢？ Replication（数据复制）十分简单 我认为Cassandra的Replication操作\n最赞的地方就在于 它让我们很容易理解 图中的例子中 我们的哈希环中有多个节点 每个节点负责一个特定范围的数据 如你所知 这是借助分区算法得到的效果 分区算法就是会说“这就是各个节点\n应该负责的数据范围“的那个家伙 不过在我们的例子中\n每份数据只被储存在一个节点上 你可能会有麻烦 假设你失去了一个节点\n比如图中标着13或25的那个节点 那这意味着你会失去一部分数据 这是不可取的 因为在我们现实生活中\n节点随时可能都会出问题 等等 要是你有一台从不掉线的服务器呢？ 对 从来不掉线 这是一个很棒的主意 让我们来复制一些数据 在这个示例集群中 复制因子(Replication Factor)为1 这表示每份数据仅有一个副本存于一个节点 数据是如何在节点中分布的呢？ 这正是协调节点的工作 当数据被写入到集群中时 比如这条数据通过哈希算法得到的分区键为59 如果它被写入了哈希环中\n负责分区键为0-13的数据的节点 等等 这可不是储存这条数据的正确位置 这个节点作为协调节点是很聪明的\n它知道这条数据在哈希环中的正确位置 拜机架感应(Snitch)所赐 这个协调节点便异步将数据复制到正确的位置 在这个例子中 便是那个负责范围包含了59的节点 这个过程正是你如何从集群中的任意节点写入数据 这是十分重要的 因为如果你遇到节点故障的话\n你会想要绕过故障节点  就像互联网的运作方式一样 故障永远会出现 重要的是能绕过故障 现在如果我们把复制因子增加到2 那事情就会变得十分有趣了 每个节点不只会储存它自己负责的数据 同时也有它邻居的数据 这真的是个十分友善的邻居呢！ 每个人都热爱互相帮助 这就是Cassandra集群的美妙之处 在这里你可以看到 每个节点都储存了它的邻居的数据 所以在集群中的每份数据都有两个副本 每份数据有两个副本 分别存于两个不同节点 真棒！因此如果我们遇到节点故障 我们就能避免因失去节点\n而失去其所负责的数据的可能 无论何时当我们将数据再次写入集群 协调节点非常聪明 它知道集群的拓扑结构 被写入的数据便被异步复制到它应该被存放的地方 也就是将该数据作为主范围(Primary range) 的节点 以及存储该数据的副本(Replica)节点 这会让数据在整个哈希环中保持一致 当任何人问你 我们应该复制多少份数据\n复制因子要设置多少 一般情况来讲 这些问题的答案应该是3 不是4 也不是2 而是直接选择3 你清楚地知道我的意思了对吧 3是一个很好的值 因为它可以让你在数据的副本数量\n（这意味着成本） 和Cassandra发生内部故障的可能性\n这两者之间取得一个平衡 这里指的是硬件 硬件总是有发生故障的时候 三个服务器同时故障的可能性真的是十分十分的低 两个服务器同时故障的可能性是很低\n但不是不可能发生 一个服务器发生故障 这是早晚会发生的 因此 复制因子设为3是最佳选择 因此当我们将一条数据写入它邻居\n和它的邻居的邻居时 我们便会发现这条数据会一致地分布到哈希环中 同时这条数据还是可以被协调节点很容易找到 因此当你将数据写入哈希环中时 你知道它会被发送到正确地方 因为数据副本的拓扑结构(Topology)会在哈希环中被分享 现在我们知道 当我们将数据写入\n有多个副本的Cassandra哈希环中时 数据会有良好的一致性 并且我们知道我们可以经受很多的故障 那如果发生了故障 集群会怎么处理呢？ 假设你的节点被鲨鱼攻击了 谁知道呢？这是有可能发生的 虽然更有可能出现停电或磁盘故障\n但你知道鲨鱼攻击确实是可能的 无论是什么原因 如果这个节点宕机 你会如何处理这个问题呢？ Replication为这个问题提供了解决方案 因为当你以一种高一致性的方法分布数据时 这会让故障对集群的影响大大减小 在图中 我们有两个节点掉线了 它们储存了某些范围的数据 但因为我们将副本数设为3 并且将数据非常整洁有序地分布在集群中 当我们将数据写入集群中时 看看 它有一个归属 即使有两个节点掉线了\n这条数据仍然可以被写入集群 当它第一次在你的生产环境中发生时\n你会觉得它很神奇 它会改变你的生活 因为如果你还从来没用过\n有类似这样的Replication能力的数据库 那你应该会觉得所有东西都可能会出现故障 但当它并没有时 你会感觉超棒的 这些就是Cassandra的replication的基础知识 它也是让Apache Cassandra\n变成如此出色的数据库的原因之一 那在多数据中心的环境下呢？  我认为这是Replication中最重要的部分 多数据中心的情况是很难处理的 当你想在其他数据库中引入多数据中心时  事情往往会变得一团糟 因为你没法恰到好处地利用好那些数据库的架构 因为它并不是为了这样的场景而设计的 这就是Apache Cassandra的Replication的美妙之处 当你有两个独立的数据中心时 物理上的或逻辑上的 这意味着在配置中\n会将节点所负责的令牌区间重新调整 从而使数据可以在不同数据中心中合理地分布 因此 当你在集群中写入数据时 你知道它会按合理的方式进行复制 Snitch（机架感应）会确保数据确实已经被复制好了 因为它是可以感知拓扑结构(topology-aware) 不过具体来说数据到底是如何被复制的\n这个过程是很有意思的 当你设置KEYSPACE  WITH \nREPLICATION {具体的Replication信息} 时 在这里我们有两个数据中心\n分别是west（西部）、east（东部） 我们为这两个数据中心分别独立设置复制因子 这会很酷 因为这样你可以对数据复制有充分的控制 比如 你可以将其中的一个设置为0 完全不将任何数据复制到这个数据中心中 这就是一种很好的控制数据复制的方法 比如在一个保护数据的环境下 不允许你将数据复制到另一个国家中 你可以在键空间(keyspace)中通过改变Replication的策略来达成目的 我们有一个简单的例子 我们有两个数据中心 我们想将数据同时复制到它们中 从应用程序角度来讲这是怎么实现的呢？ 当我们将数据写入一个数据中心时 协调节点的工作便是将数据写入当前数据中心  但它知道在拓扑结构上还有另一个数据中心的存在 它便会说：“嘿！ 我要将数据异步写入另一个数据中心的某一个节点上去。” 当那个节点接收到了数据\n它便充当另一个数据中心的协调节点 这份数据便再一次异步地被复制于那个数据中心中 至此 数据写入过程可以说非常有一致性且很简洁 而且它的效果是如此的好 从Cassandra被研发的第一天就已经是这样做了 这些也是Cassandra的Replication中\n最基础最重要的一部分 那现在让我们来做个练习\n以便你深入了解Replication是怎么运作的",
    "segments": [
      {
        "start": 0.0,
        "duration": 6.572,
        "text": "DS201.12: Replication（数据复制）"
      },
      {
        "start": 6.572,
        "duration": 3.428,
        "text": "让我们来讨论下Cassandra哈希环中的\nReplication（数据复制）"
      },
      {
        "start": 10.0,
        "duration": 6.056,
        "text": "这不仅在数据库运维中是个很重要的概念\n对于数据建模也十分关键"
      },
      {
        "start": 16.056,
        "duration": 2.725,
        "text": "这能让你清楚地知道你的数据在哪里"
      },
      {
        "start": 18.781,
        "duration": 2.825,
        "text": "以及怎样根据你的数据模型\n来决定你的数据所在的位置"
      },
      {
        "start": 21.606,
        "duration": 1.587,
        "text": "这是非常基础的概念"
      },
      {
        "start": 23.193,
        "duration": 2.497,
        "text": "即Cassandra的哈希环是如何复制数据的"
      },
      {
        "start": 25.69,
        "duration": 6.683,
        "text": "我的观点是 这正是Cassandra\n在数据复制这方面独领风骚的独门秘诀"
      },
      {
        "start": 32.373,
        "duration": 2.87,
        "text": "没有任何其他数据库掌握同样的技能\n它非常的特别"
      },
      {
        "start": 35.243,
        "duration": 1.637,
        "text": "所以这到底是什么呢？"
      },
      {
        "start": 36.88,
        "duration": 2.83,
        "text": "Replication（数据复制）十分简单"
      },
      {
        "start": 39.71,
        "duration": 3.467,
        "text": "我认为Cassandra的Replication操作\n最赞的地方就在于"
      },
      {
        "start": 43.177,
        "duration": 1.699,
        "text": "它让我们很容易理解"
      },
      {
        "start": 44.876,
        "duration": 3.401,
        "text": "图中的例子中 我们的哈希环中有多个节点"
      },
      {
        "start": 48.277,
        "duration": 3.604,
        "text": "每个节点负责一个特定范围的数据"
      },
      {
        "start": 51.881,
        "duration": 1.681,
        "text": "如你所知 这是借助分区算法得到的效果"
      },
      {
        "start": 53.562,
        "duration": 4.799,
        "text": "分区算法就是会说“这就是各个节点\n应该负责的数据范围“的那个家伙"
      },
      {
        "start": 58.361,
        "duration": 3.126,
        "text": "不过在我们的例子中\n每份数据只被储存在一个节点上"
      },
      {
        "start": 61.487,
        "duration": 1.738,
        "text": "你可能会有麻烦"
      },
      {
        "start": 63.225,
        "duration": 4.144,
        "text": "假设你失去了一个节点\n比如图中标着13或25的那个节点"
      },
      {
        "start": 67.369,
        "duration": 2.959,
        "text": "那这意味着你会失去一部分数据"
      },
      {
        "start": 70.328,
        "duration": 1.539,
        "text": "这是不可取的"
      },
      {
        "start": 71.867,
        "duration": 4.761,
        "text": "因为在我们现实生活中\n节点随时可能都会出问题"
      },
      {
        "start": 76.628,
        "duration": 1.207,
        "text": "等等"
      },
      {
        "start": 77.835,
        "duration": 3.419,
        "text": "要是你有一台从不掉线的服务器呢？"
      },
      {
        "start": 81.9,
        "duration": 1.686,
        "text": "对 从来不掉线"
      },
      {
        "start": 83.586,
        "duration": 2.623,
        "text": "这是一个很棒的主意 让我们来复制一些数据"
      },
      {
        "start": 86.729,
        "duration": 3.994,
        "text": "在这个示例集群中 复制因子(Replication Factor)为1"
      },
      {
        "start": 90.723,
        "duration": 2.468,
        "text": "这表示每份数据仅有一个副本存于一个节点"
      },
      {
        "start": 93.191,
        "duration": 2.89,
        "text": "数据是如何在节点中分布的呢？"
      },
      {
        "start": 96.081,
        "duration": 2.724,
        "text": "这正是协调节点的工作"
      },
      {
        "start": 98.805,
        "duration": 2.59,
        "text": "当数据被写入到集群中时"
      },
      {
        "start": 101.395,
        "duration": 5.816,
        "text": "比如这条数据通过哈希算法得到的分区键为59"
      },
      {
        "start": 107.211,
        "duration": 4.673,
        "text": "如果它被写入了哈希环中\n负责分区键为0-13的数据的节点"
      },
      {
        "start": 111.884,
        "duration": 3.696,
        "text": "等等 这可不是储存这条数据的正确位置"
      },
      {
        "start": 115.58,
        "duration": 4.858,
        "text": "这个节点作为协调节点是很聪明的\n它知道这条数据在哈希环中的正确位置"
      },
      {
        "start": 120.438,
        "duration": 2.0,
        "text": "拜机架感应(Snitch)所赐"
      },
      {
        "start": 122.438,
        "duration": 4.175,
        "text": "这个协调节点便异步将数据复制到正确的位置"
      },
      {
        "start": 126.613,
        "duration": 3.909,
        "text": "在这个例子中 便是那个负责范围包含了59的节点"
      },
      {
        "start": 130.522,
        "duration": 3.981,
        "text": "这个过程正是你如何从集群中的任意节点写入数据"
      },
      {
        "start": 134.503,
        "duration": 1.43,
        "text": "这是十分重要的"
      },
      {
        "start": 135.933,
        "duration": 4.067,
        "text": "因为如果你遇到节点故障的话\n你会想要绕过故障节点"
      },
      {
        "start": 140.0,
        "duration": 1.619,
        "text": " 就像互联网的运作方式一样"
      },
      {
        "start": 141.619,
        "duration": 2.885,
        "text": "故障永远会出现 重要的是能绕过故障"
      },
      {
        "start": 145.26,
        "duration": 3.843,
        "text": "现在如果我们把复制因子增加到2"
      },
      {
        "start": 149.121,
        "duration": 3.017,
        "text": "那事情就会变得十分有趣了"
      },
      {
        "start": 152.138,
        "duration": 3.493,
        "text": "每个节点不只会储存它自己负责的数据"
      },
      {
        "start": 155.631,
        "duration": 1.619,
        "text": "同时也有它邻居的数据"
      },
      {
        "start": 157.25,
        "duration": 2.262,
        "text": "这真的是个十分友善的邻居呢！"
      },
      {
        "start": 159.512,
        "duration": 2.743,
        "text": "每个人都热爱互相帮助"
      },
      {
        "start": 162.255,
        "duration": 3.022,
        "text": "这就是Cassandra集群的美妙之处"
      },
      {
        "start": 165.277,
        "duration": 5.115,
        "text": "在这里你可以看到 每个节点都储存了它的邻居的数据"
      },
      {
        "start": 170.392,
        "duration": 4.194,
        "text": "所以在集群中的每份数据都有两个副本"
      },
      {
        "start": 174.586,
        "duration": 2.037,
        "text": "每份数据有两个副本 分别存于两个不同节点"
      },
      {
        "start": 176.623,
        "duration": 2.27,
        "text": "真棒！因此如果我们遇到节点故障"
      },
      {
        "start": 178.893,
        "duration": 5.481,
        "text": "我们就能避免因失去节点\n而失去其所负责的数据的可能"
      },
      {
        "start": 184.374,
        "duration": 2.979,
        "text": "无论何时当我们将数据再次写入集群"
      },
      {
        "start": 187.353,
        "duration": 2.882,
        "text": "协调节点非常聪明 它知道集群的拓扑结构"
      },
      {
        "start": 190.235,
        "duration": 4.883,
        "text": "被写入的数据便被异步复制到它应该被存放的地方"
      },
      {
        "start": 195.118,
        "duration": 2.754,
        "text": "也就是将该数据作为主范围(Primary range) 的节点"
      },
      {
        "start": 197.872,
        "duration": 2.011,
        "text": "以及存储该数据的副本(Replica)节点"
      },
      {
        "start": 199.883,
        "duration": 3.364,
        "text": "这会让数据在整个哈希环中保持一致"
      },
      {
        "start": 203.247,
        "duration": 1.533,
        "text": "当任何人问你"
      },
      {
        "start": 204.78,
        "duration": 3.914,
        "text": "我们应该复制多少份数据\n复制因子要设置多少"
      },
      {
        "start": 208.694,
        "duration": 2.277,
        "text": "一般情况来讲 这些问题的答案应该是3"
      },
      {
        "start": 210.971,
        "duration": 4.84,
        "text": "不是4 也不是2 而是直接选择3"
      },
      {
        "start": 215.811,
        "duration": 1.779,
        "text": "你清楚地知道我的意思了对吧"
      },
      {
        "start": 217.59,
        "duration": 1.497,
        "text": "3是一个很好的值"
      },
      {
        "start": 219.087,
        "duration": 5.259,
        "text": "因为它可以让你在数据的副本数量\n（这意味着成本）"
      },
      {
        "start": 224.346,
        "duration": 5.484,
        "text": "和Cassandra发生内部故障的可能性\n这两者之间取得一个平衡"
      },
      {
        "start": 229.83,
        "duration": 3.936,
        "text": "这里指的是硬件 硬件总是有发生故障的时候"
      },
      {
        "start": 233.766,
        "duration": 4.987,
        "text": "三个服务器同时故障的可能性真的是十分十分的低"
      },
      {
        "start": 238.753,
        "duration": 2.535,
        "text": "两个服务器同时故障的可能性是很低\n但不是不可能发生"
      },
      {
        "start": 241.288,
        "duration": 2.0,
        "text": "一个服务器发生故障 这是早晚会发生的"
      },
      {
        "start": 243.288,
        "duration": 3.604,
        "text": "因此 复制因子设为3是最佳选择"
      },
      {
        "start": 247.335,
        "duration": 4.544,
        "text": "因此当我们将一条数据写入它邻居\n和它的邻居的邻居时"
      },
      {
        "start": 251.879,
        "duration": 3.121,
        "text": "我们便会发现这条数据会一致地分布到哈希环中"
      },
      {
        "start": 255.0,
        "duration": 2.866,
        "text": "同时这条数据还是可以被协调节点很容易找到"
      },
      {
        "start": 257.866,
        "duration": 2.0,
        "text": "因此当你将数据写入哈希环中时"
      },
      {
        "start": 259.866,
        "duration": 2.415,
        "text": "你知道它会被发送到正确地方"
      },
      {
        "start": 262.281,
        "duration": 4.065,
        "text": "因为数据副本的拓扑结构(Topology)会在哈希环中被分享"
      },
      {
        "start": 266.346,
        "duration": 4.378,
        "text": "现在我们知道 当我们将数据写入\n有多个副本的Cassandra哈希环中时"
      },
      {
        "start": 270.724,
        "duration": 2.0,
        "text": "数据会有良好的一致性"
      },
      {
        "start": 272.724,
        "duration": 3.327,
        "text": "并且我们知道我们可以经受很多的故障"
      },
      {
        "start": 276.051,
        "duration": 2.622,
        "text": "那如果发生了故障 集群会怎么处理呢？"
      },
      {
        "start": 278.673,
        "duration": 3.148,
        "text": "假设你的节点被鲨鱼攻击了"
      },
      {
        "start": 281.821,
        "duration": 1.429,
        "text": "谁知道呢？这是有可能发生的"
      },
      {
        "start": 283.25,
        "duration": 5.134,
        "text": "虽然更有可能出现停电或磁盘故障\n但你知道鲨鱼攻击确实是可能的"
      },
      {
        "start": 288.384,
        "duration": 2.406,
        "text": "无论是什么原因 如果这个节点宕机"
      },
      {
        "start": 290.79,
        "duration": 1.65,
        "text": "你会如何处理这个问题呢？"
      },
      {
        "start": 292.44,
        "duration": 2.56,
        "text": "Replication为这个问题提供了解决方案"
      },
      {
        "start": 295.0,
        "duration": 3.965,
        "text": "因为当你以一种高一致性的方法分布数据时"
      },
      {
        "start": 298.965,
        "duration": 4.176,
        "text": "这会让故障对集群的影响大大减小"
      },
      {
        "start": 303.141,
        "duration": 3.05,
        "text": "在图中 我们有两个节点掉线了"
      },
      {
        "start": 306.191,
        "duration": 2.148,
        "text": "它们储存了某些范围的数据"
      },
      {
        "start": 308.339,
        "duration": 2.228,
        "text": "但因为我们将副本数设为3"
      },
      {
        "start": 310.567,
        "duration": 4.272,
        "text": "并且将数据非常整洁有序地分布在集群中"
      },
      {
        "start": 314.839,
        "duration": 2.793,
        "text": "当我们将数据写入集群中时"
      },
      {
        "start": 317.632,
        "duration": 2.368,
        "text": "看看 它有一个归属"
      },
      {
        "start": 320.0,
        "duration": 4.403,
        "text": "即使有两个节点掉线了\n这条数据仍然可以被写入集群"
      },
      {
        "start": 324.403,
        "duration": 3.715,
        "text": "当它第一次在你的生产环境中发生时\n你会觉得它很神奇"
      },
      {
        "start": 328.118,
        "duration": 1.613,
        "text": "它会改变你的生活"
      },
      {
        "start": 329.731,
        "duration": 3.88,
        "text": "因为如果你还从来没用过\n有类似这样的Replication能力的数据库"
      },
      {
        "start": 333.611,
        "duration": 2.203,
        "text": "那你应该会觉得所有东西都可能会出现故障"
      },
      {
        "start": 335.814,
        "duration": 3.346,
        "text": "但当它并没有时 你会感觉超棒的"
      },
      {
        "start": 339.16,
        "duration": 2.507,
        "text": "这些就是Cassandra的replication的基础知识"
      },
      {
        "start": 341.667,
        "duration": 4.581,
        "text": "它也是让Apache Cassandra\n变成如此出色的数据库的原因之一"
      },
      {
        "start": 346.248,
        "duration": 2.074,
        "text": "那在多数据中心的环境下呢？ "
      },
      {
        "start": 348.322,
        "duration": 4.157,
        "text": "我认为这是Replication中最重要的部分"
      },
      {
        "start": 352.479,
        "duration": 2.276,
        "text": "多数据中心的情况是很难处理的"
      },
      {
        "start": 354.755,
        "duration": 3.217,
        "text": "当你想在其他数据库中引入多数据中心时 "
      },
      {
        "start": 357.972,
        "duration": 2.387,
        "text": "事情往往会变得一团糟"
      },
      {
        "start": 360.359,
        "duration": 2.319,
        "text": "因为你没法恰到好处地利用好那些数据库的架构"
      },
      {
        "start": 362.678,
        "duration": 2.322,
        "text": "因为它并不是为了这样的场景而设计的"
      },
      {
        "start": 365.0,
        "duration": 3.442,
        "text": "这就是Apache Cassandra的Replication的美妙之处"
      },
      {
        "start": 368.442,
        "duration": 2.0,
        "text": "当你有两个独立的数据中心时"
      },
      {
        "start": 370.442,
        "duration": 2.184,
        "text": "物理上的或逻辑上的"
      },
      {
        "start": 372.626,
        "duration": 4.139,
        "text": "这意味着在配置中\n会将节点所负责的令牌区间重新调整"
      },
      {
        "start": 376.765,
        "duration": 4.359,
        "text": "从而使数据可以在不同数据中心中合理地分布"
      },
      {
        "start": 381.124,
        "duration": 2.793,
        "text": "因此 当你在集群中写入数据时"
      },
      {
        "start": 383.917,
        "duration": 2.498,
        "text": "你知道它会按合理的方式进行复制"
      },
      {
        "start": 386.415,
        "duration": 3.776,
        "text": "Snitch（机架感应）会确保数据确实已经被复制好了"
      },
      {
        "start": 390.191,
        "duration": 2.006,
        "text": "因为它是可以感知拓扑结构(topology-aware)"
      },
      {
        "start": 392.197,
        "duration": 3.734,
        "text": "不过具体来说数据到底是如何被复制的\n这个过程是很有意思的"
      },
      {
        "start": 395.931,
        "duration": 6.682,
        "text": "当你设置KEYSPACE  WITH \nREPLICATION {具体的Replication信息} 时"
      },
      {
        "start": 402.613,
        "duration": 3.125,
        "text": "在这里我们有两个数据中心\n分别是west（西部）、east（东部）"
      },
      {
        "start": 405.738,
        "duration": 5.478,
        "text": "我们为这两个数据中心分别独立设置复制因子"
      },
      {
        "start": 411.216,
        "duration": 4.526,
        "text": "这会很酷 因为这样你可以对数据复制有充分的控制"
      },
      {
        "start": 415.742,
        "duration": 2.479,
        "text": "比如 你可以将其中的一个设置为0"
      },
      {
        "start": 418.221,
        "duration": 2.406,
        "text": "完全不将任何数据复制到这个数据中心中"
      },
      {
        "start": 420.627,
        "duration": 5.577,
        "text": "这就是一种很好的控制数据复制的方法"
      },
      {
        "start": 426.204,
        "duration": 1.581,
        "text": "比如在一个保护数据的环境下"
      },
      {
        "start": 427.785,
        "duration": 3.013,
        "text": "不允许你将数据复制到另一个国家中"
      },
      {
        "start": 430.798,
        "duration": 4.369,
        "text": "你可以在键空间(keyspace)中通过改变Replication的策略来达成目的"
      },
      {
        "start": 435.167,
        "duration": 2.305,
        "text": "我们有一个简单的例子"
      },
      {
        "start": 437.472,
        "duration": 2.918,
        "text": "我们有两个数据中心 我们想将数据同时复制到它们中"
      },
      {
        "start": 440.39,
        "duration": 2.147,
        "text": "从应用程序角度来讲这是怎么实现的呢？"
      },
      {
        "start": 442.537,
        "duration": 2.24,
        "text": "当我们将数据写入一个数据中心时"
      },
      {
        "start": 444.777,
        "duration": 4.304,
        "text": "协调节点的工作便是将数据写入当前数据中心 "
      },
      {
        "start": 449.081,
        "duration": 4.003,
        "text": "但它知道在拓扑结构上还有另一个数据中心的存在"
      },
      {
        "start": 453.084,
        "duration": 4.247,
        "text": "它便会说：“嘿！ 我要将数据异步写入另一个数据中心的某一个节点上去。”"
      },
      {
        "start": 457.331,
        "duration": 3.94,
        "text": "当那个节点接收到了数据\n它便充当另一个数据中心的协调节点"
      },
      {
        "start": 461.271,
        "duration": 4.839,
        "text": "这份数据便再一次异步地被复制于那个数据中心中"
      },
      {
        "start": 466.11,
        "duration": 4.784,
        "text": "至此 数据写入过程可以说非常有一致性且很简洁"
      },
      {
        "start": 470.894,
        "duration": 2.0,
        "text": "而且它的效果是如此的好"
      },
      {
        "start": 472.894,
        "duration": 2.719,
        "text": "从Cassandra被研发的第一天就已经是这样做了"
      },
      {
        "start": 475.613,
        "duration": 5.083,
        "text": "这些也是Cassandra的Replication中\n最基础最重要的一部分"
      },
      {
        "start": 480.696,
        "duration": 4.489,
        "text": "那现在让我们来做个练习\n以便你深入了解Replication是怎么运作的"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T01:58:42.902975+00:00"
}