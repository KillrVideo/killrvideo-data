{
  "video_id": "4ZqEA8MA7cI",
  "title": "DS210.27 Backup Fundamentals | Operations with Apache Cassandra",
  "description": "#DataStaxAcademy #DS210\nDS210.27 BACKUP FUNDAMENTALS\nIn this, you will learn about some backup fundamentals. With backup with a large scale distributed system like Apache Casandra or DataStax Enterprise, there are a few important things that you need to understand.\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-12T01:31:04Z",
  "thumbnail": "https://i.ytimg.com/vi/4ZqEA8MA7cI/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "distributed",
    "cassandra",
    "tutorial",
    "apache_cassandra",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=4ZqEA8MA7cI",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] let's talk about some backup fundamentals here and backup with a large-scale distributed system like cassandra or datastax enterprise there's a few things to understand here first of all why should we backup our data well the obvious is what if you lose all your databases sure that's really unlikely i used to work in operations and i never restored a database because of a database failure i always had to restore databases because of a program failure or a user failure somebody typed in the wrong command and deleted something that they shouldn't that is a real danger in a distributed system if you make an error in your data and it propagates throughout the entire cluster or maybe across multiple data centers you got to have a way to get it back this is where your backups really come in handy so snapshots are how we do backups snapshots are these files that we create based on the ss tables now one of the really cool things about a cassandra ss table of course it's immutable meaning it's never going to change again and if you write it out to the file system you can guarantee that that's the way it's going to stay there's nothing that keeps it open if you've ever done backups on relational databases you knew that was one of the big problems open files there would be a file sitting there the database is trying to write to it you can't touch it because it's an open file ss tables are written and done but if they're written and done that means you can do a snapshot on the file system and get it out really quickly so when you run a snapshot it creates a hard link to that file meaning that it's on the file system level and hard links are created almost instantaneously so when you do create snapshot boom there's your snapshot ready to go it's really a magical trick with the linux file system that can be used really effectively to run your backups the thing to understand though is that ss table is a point in time and when you run a snapshot it will keep that point in time in place what happens with new data is it creates new ss tables those files will not be snapshotted unless you run a snapshot at that time so running a snapshot means right now what's the data on the disk not in the mem table so when you run the snapshot command a snapshot directory is created if you look inside of it you'll see all those files inside of it now because it's a hard link it's not actually consuming disk space and that's kind of cool because say you're using 50 of your disk space if it was actually copying all that data then it would consume all of the data on your disk we don't want to do that we want to make sure that you have plenty of space hard links are awesome for just that now keep in mind if you do copy those files to somewhere else then it breaks the hard link and it will consume disk space a lot of it the way to manage those files is move it away from that node and put it into something like s3 or an object store somewhere or even nfs something that is away from that node that you can get to it later so this is a basic overview of how snapshots work and how backups work in a running cassandra cluster with dse",
    "segments": [
      {
        "start": 1.43,
        "duration": 5.33,
        "text": "[Music]"
      },
      {
        "start": 7.279,
        "duration": 2.561,
        "text": "let's talk about some backup"
      },
      {
        "start": 8.559,
        "duration": 3.681,
        "text": "fundamentals here"
      },
      {
        "start": 9.84,
        "duration": 3.6,
        "text": "and backup with a large-scale"
      },
      {
        "start": 12.24,
        "duration": 3.439,
        "text": "distributed system"
      },
      {
        "start": 13.44,
        "duration": 4.24,
        "text": "like cassandra or datastax enterprise"
      },
      {
        "start": 15.679,
        "duration": 4.321,
        "text": "there's a few things to understand here"
      },
      {
        "start": 17.68,
        "duration": 3.28,
        "text": "first of all why should we backup our"
      },
      {
        "start": 20.0,
        "duration": 3.039,
        "text": "data"
      },
      {
        "start": 20.96,
        "duration": 3.12,
        "text": "well the obvious is what if you lose all"
      },
      {
        "start": 23.039,
        "duration": 3.841,
        "text": "your databases"
      },
      {
        "start": 24.08,
        "duration": 4.0,
        "text": "sure that's really unlikely i used to"
      },
      {
        "start": 26.88,
        "duration": 3.84,
        "text": "work in operations"
      },
      {
        "start": 28.08,
        "duration": 3.999,
        "text": "and i never restored a database because"
      },
      {
        "start": 30.72,
        "duration": 3.2,
        "text": "of a database failure"
      },
      {
        "start": 32.079,
        "duration": 3.761,
        "text": "i always had to restore databases"
      },
      {
        "start": 33.92,
        "duration": 4.56,
        "text": "because of a program failure"
      },
      {
        "start": 35.84,
        "duration": 3.68,
        "text": "or a user failure somebody typed in the"
      },
      {
        "start": 38.48,
        "duration": 2.239,
        "text": "wrong command"
      },
      {
        "start": 39.52,
        "duration": 2.96,
        "text": "and deleted something that they"
      },
      {
        "start": 40.719,
        "duration": 4.081,
        "text": "shouldn't that is a real danger in a"
      },
      {
        "start": 42.48,
        "duration": 3.44,
        "text": "distributed system if you make an error"
      },
      {
        "start": 44.8,
        "duration": 2.8,
        "text": "in your data"
      },
      {
        "start": 45.92,
        "duration": 3.44,
        "text": "and it propagates throughout the entire"
      },
      {
        "start": 47.6,
        "duration": 2.56,
        "text": "cluster or maybe across multiple data"
      },
      {
        "start": 49.36,
        "duration": 2.8,
        "text": "centers"
      },
      {
        "start": 50.16,
        "duration": 3.919,
        "text": "you got to have a way to get it back"
      },
      {
        "start": 52.16,
        "duration": 2.879,
        "text": "this is where your backups really come"
      },
      {
        "start": 54.079,
        "duration": 3.841,
        "text": "in handy"
      },
      {
        "start": 55.039,
        "duration": 5.601,
        "text": "so snapshots are how we do backups"
      },
      {
        "start": 57.92,
        "duration": 5.2,
        "text": "snapshots are these files that we create"
      },
      {
        "start": 60.64,
        "duration": 4.64,
        "text": "based on the ss tables now one of the"
      },
      {
        "start": 63.12,
        "duration": 3.44,
        "text": "really cool things about a cassandra ss"
      },
      {
        "start": 65.28,
        "duration": 3.12,
        "text": "table of course"
      },
      {
        "start": 66.56,
        "duration": 3.04,
        "text": "it's immutable meaning it's never going"
      },
      {
        "start": 68.4,
        "duration": 2.719,
        "text": "to change again"
      },
      {
        "start": 69.6,
        "duration": 3.36,
        "text": "and if you write it out to the file"
      },
      {
        "start": 71.119,
        "duration": 3.441,
        "text": "system you can guarantee that that's the"
      },
      {
        "start": 72.96,
        "duration": 2.88,
        "text": "way it's going to stay there's nothing"
      },
      {
        "start": 74.56,
        "duration": 3.199,
        "text": "that keeps it open"
      },
      {
        "start": 75.84,
        "duration": 3.279,
        "text": "if you've ever done backups on"
      },
      {
        "start": 77.759,
        "duration": 2.4,
        "text": "relational databases"
      },
      {
        "start": 79.119,
        "duration": 3.521,
        "text": "you knew that was one of the big"
      },
      {
        "start": 80.159,
        "duration": 3.6,
        "text": "problems open files there would be a"
      },
      {
        "start": 82.64,
        "duration": 3.119,
        "text": "file sitting there"
      },
      {
        "start": 83.759,
        "duration": 3.761,
        "text": "the database is trying to write to it"
      },
      {
        "start": 85.759,
        "duration": 2.561,
        "text": "you can't touch it because it's an open"
      },
      {
        "start": 87.52,
        "duration": 2.959,
        "text": "file"
      },
      {
        "start": 88.32,
        "duration": 3.28,
        "text": "ss tables are written and done but if"
      },
      {
        "start": 90.479,
        "duration": 2.801,
        "text": "they're written and done that means you"
      },
      {
        "start": 91.6,
        "duration": 3.12,
        "text": "can do a snapshot on the file system and"
      },
      {
        "start": 93.28,
        "duration": 3.44,
        "text": "get it out really quickly"
      },
      {
        "start": 94.72,
        "duration": 3.52,
        "text": "so when you run a snapshot it creates a"
      },
      {
        "start": 96.72,
        "duration": 3.359,
        "text": "hard link to that file"
      },
      {
        "start": 98.24,
        "duration": 4.0,
        "text": "meaning that it's on the file system"
      },
      {
        "start": 100.079,
        "duration": 4.481,
        "text": "level and hard links are created almost"
      },
      {
        "start": 102.24,
        "duration": 3.199,
        "text": "instantaneously so when you do create"
      },
      {
        "start": 104.56,
        "duration": 3.199,
        "text": "snapshot"
      },
      {
        "start": 105.439,
        "duration": 3.68,
        "text": "boom there's your snapshot ready to go"
      },
      {
        "start": 107.759,
        "duration": 2.64,
        "text": "it's really a magical trick with the"
      },
      {
        "start": 109.119,
        "duration": 3.121,
        "text": "linux file system"
      },
      {
        "start": 110.399,
        "duration": 3.121,
        "text": "that can be used really effectively to"
      },
      {
        "start": 112.24,
        "duration": 2.96,
        "text": "run your backups"
      },
      {
        "start": 113.52,
        "duration": 4.08,
        "text": "the thing to understand though is that"
      },
      {
        "start": 115.2,
        "duration": 4.959,
        "text": "ss table is a point in time"
      },
      {
        "start": 117.6,
        "duration": 3.6,
        "text": "and when you run a snapshot it will keep"
      },
      {
        "start": 120.159,
        "duration": 3.841,
        "text": "that point in time"
      },
      {
        "start": 121.2,
        "duration": 4.879,
        "text": "in place what happens with new data is"
      },
      {
        "start": 124.0,
        "duration": 4.399,
        "text": "it creates new ss tables"
      },
      {
        "start": 126.079,
        "duration": 4.561,
        "text": "those files will not be snapshotted"
      },
      {
        "start": 128.399,
        "duration": 4.56,
        "text": "unless you run a snapshot at that time"
      },
      {
        "start": 130.64,
        "duration": 4.239,
        "text": "so running a snapshot means right now"
      },
      {
        "start": 132.959,
        "duration": 4.081,
        "text": "what's the data on the disk"
      },
      {
        "start": 134.879,
        "duration": 4.241,
        "text": "not in the mem table so when you run the"
      },
      {
        "start": 137.04,
        "duration": 2.88,
        "text": "snapshot command a snapshot directory is"
      },
      {
        "start": 139.12,
        "duration": 2.479,
        "text": "created"
      },
      {
        "start": 139.92,
        "duration": 3.44,
        "text": "if you look inside of it you'll see all"
      },
      {
        "start": 141.599,
        "duration": 4.081,
        "text": "those files inside of it"
      },
      {
        "start": 143.36,
        "duration": 3.519,
        "text": "now because it's a hard link it's not"
      },
      {
        "start": 145.68,
        "duration": 3.279,
        "text": "actually consuming"
      },
      {
        "start": 146.879,
        "duration": 3.921,
        "text": "disk space and that's kind of cool"
      },
      {
        "start": 148.959,
        "duration": 4.321,
        "text": "because say you're using 50"
      },
      {
        "start": 150.8,
        "duration": 4.0,
        "text": "of your disk space if it was actually"
      },
      {
        "start": 153.28,
        "duration": 4.0,
        "text": "copying all that data"
      },
      {
        "start": 154.8,
        "duration": 3.12,
        "text": "then it would consume all of the data on"
      },
      {
        "start": 157.28,
        "duration": 2.0,
        "text": "your disk"
      },
      {
        "start": 157.92,
        "duration": 3.039,
        "text": "we don't want to do that we want to make"
      },
      {
        "start": 159.28,
        "duration": 4.08,
        "text": "sure that you have plenty of space"
      },
      {
        "start": 160.959,
        "duration": 3.28,
        "text": "hard links are awesome for just that now"
      },
      {
        "start": 163.36,
        "duration": 3.28,
        "text": "keep in mind"
      },
      {
        "start": 164.239,
        "duration": 3.28,
        "text": "if you do copy those files to somewhere"
      },
      {
        "start": 166.64,
        "duration": 2.8,
        "text": "else"
      },
      {
        "start": 167.519,
        "duration": 3.36,
        "text": "then it breaks the hard link and it will"
      },
      {
        "start": 169.44,
        "duration": 3.68,
        "text": "consume disk space"
      },
      {
        "start": 170.879,
        "duration": 3.121,
        "text": "a lot of it the way to manage those"
      },
      {
        "start": 173.12,
        "duration": 3.36,
        "text": "files"
      },
      {
        "start": 174.0,
        "duration": 3.36,
        "text": "is move it away from that node and put"
      },
      {
        "start": 176.48,
        "duration": 3.92,
        "text": "it into something like"
      },
      {
        "start": 177.36,
        "duration": 5.28,
        "text": "s3 or an object store somewhere or even"
      },
      {
        "start": 180.4,
        "duration": 4.16,
        "text": "nfs something that is away from that"
      },
      {
        "start": 182.64,
        "duration": 4.879,
        "text": "node that you can get to it later"
      },
      {
        "start": 184.56,
        "duration": 5.2,
        "text": "so this is a basic overview of how"
      },
      {
        "start": 187.519,
        "duration": 9.681,
        "text": "snapshots work and how backups work"
      },
      {
        "start": 189.76,
        "duration": 7.44,
        "text": "in a running cassandra cluster with dse"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T01:18:20.211618+00:00"
}