{
  "video_id": "mYrUDSCXcR4",
  "title": "DS201.14 Hinted Handoff  | Foundations of Apache Cassandra",
  "description": "#DataStaxAcademy #DS201\nDS201.14 HINTED HANDOFF\nDepending on your consistency level, you can still service write requests even when nodes are down. Apache Cassandra accomplishes this via hinted handoff. Learn more about hinted handoff in this unit.\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-11T01:30:20Z",
  "thumbnail": "https://i.ytimg.com/vi/mYrUDSCXcR4/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "cassandra",
    "datastax",
    "tutorial",
    "apache_cassandra"
  ],
  "url": "https://www.youtube.com/watch?v=mYrUDSCXcR4",
  "transcript": {
    "available": true,
    "language": "Chinese",
    "language_code": "zh",
    "is_generated": false,
    "text": "DS201.14: Hinted Handoff 本集来聊聊Hinted Handoff 取决于你的一致性级别(Consistency level) 你仍然可以执行写入操作 即使当你的节点宕机了 Apache Cassandra通过Hinted Handoff来做到这点 一个写入请求到达了集群 复制因子(RF)为3 就如往常的一样\n协调节点将写入请求转发给副本节点 但是我们注意到下面的那个节点掉线了 虽然协调节点不是副本节点 它会先储存这条数据 并在下线的节点重新上线后\n再次向其发送数据 最终 下面的节点重新上线了 之前的协调节点一注意到这点 便会将写入的数据传送给刚刚上线的副本节点 Apache Cassandra会将hints存储在 你在cassandra.yaml文件中指定的目录下的文件中 默认情况下 节点储存hints的最长时间为3小时 但是你也可以在cassandra.yaml中调整这个值 关于Hinted Handoff 你需要注意一下一致性级别 在之前的例子中 一致性级别为1或2 协调节点会报告写入是成功的 但是 一致性级别为3时  协调节点会因为掉线的节点\n而返回Failed Mutation（数据变更失败） 请小心使用ANY作为一致性级别 事实上 最好别碰ANY这个一致性级别 如果使用一致性级别ANY\n所有三个副本节点都可以宕机 而协调节点会在为这些节点储存hints的情况下\n向客户端报告写入成功的信息 可是这些数据不会在接下来的任何读取结果中出现 直到宕机的三个副本节点中的一个重新上线 这个情况还有一个前提条件 就是当副本节点重新上线时\n协调节点并没有掉线 如果任何一个副本节点上线前\nhints就过期了的话 协调节点便会将这份写入数据删除 如果你的协调节点突然掉线的话 你仍然会丢失你的数据 简而言之 一致性级别ANY没有任何实际的意义 现在 来让我们做一个有关Hinted Handoff的练习吧",
    "segments": [
      {
        "start": 0.0,
        "duration": 6.375,
        "text": "DS201.14: Hinted Handoff"
      },
      {
        "start": 6.726,
        "duration": 2.337,
        "text": "本集来聊聊Hinted Handoff"
      },
      {
        "start": 9.063,
        "duration": 2.0,
        "text": "取决于你的一致性级别(Consistency level)"
      },
      {
        "start": 11.063,
        "duration": 3.369,
        "text": "你仍然可以执行写入操作 即使当你的节点宕机了"
      },
      {
        "start": 14.432,
        "duration": 4.161,
        "text": "Apache Cassandra通过Hinted Handoff来做到这点"
      },
      {
        "start": 18.593,
        "duration": 2.84,
        "text": "一个写入请求到达了集群"
      },
      {
        "start": 21.433,
        "duration": 2.91,
        "text": "复制因子(RF)为3"
      },
      {
        "start": 24.343,
        "duration": 4.816,
        "text": "就如往常的一样\n协调节点将写入请求转发给副本节点"
      },
      {
        "start": 29.159,
        "duration": 2.655,
        "text": "但是我们注意到下面的那个节点掉线了"
      },
      {
        "start": 31.814,
        "duration": 2.55,
        "text": "虽然协调节点不是副本节点"
      },
      {
        "start": 34.364,
        "duration": 1.551,
        "text": "它会先储存这条数据"
      },
      {
        "start": 35.915,
        "duration": 3.585,
        "text": "并在下线的节点重新上线后\n再次向其发送数据"
      },
      {
        "start": 39.5,
        "duration": 3.109,
        "text": "最终 下面的节点重新上线了"
      },
      {
        "start": 42.609,
        "duration": 1.391,
        "text": "之前的协调节点一注意到这点"
      },
      {
        "start": 44.0,
        "duration": 6.0,
        "text": "便会将写入的数据传送给刚刚上线的副本节点"
      },
      {
        "start": 50.0,
        "duration": 2.47,
        "text": "Apache Cassandra会将hints存储在"
      },
      {
        "start": 52.47,
        "duration": 4.469,
        "text": "你在cassandra.yaml文件中指定的目录下的文件中"
      },
      {
        "start": 56.939,
        "duration": 4.222,
        "text": "默认情况下 节点储存hints的最长时间为3小时"
      },
      {
        "start": 61.161,
        "duration": 4.445,
        "text": "但是你也可以在cassandra.yaml中调整这个值"
      },
      {
        "start": 65.606,
        "duration": 4.311,
        "text": "关于Hinted Handoff 你需要注意一下一致性级别"
      },
      {
        "start": 69.917,
        "duration": 4.681,
        "text": "在之前的例子中 一致性级别为1或2"
      },
      {
        "start": 74.598,
        "duration": 3.167,
        "text": "协调节点会报告写入是成功的"
      },
      {
        "start": 77.765,
        "duration": 3.139,
        "text": "但是 一致性级别为3时 "
      },
      {
        "start": 80.904,
        "duration": 4.343,
        "text": "协调节点会因为掉线的节点\n而返回Failed Mutation（数据变更失败）"
      },
      {
        "start": 85.247,
        "duration": 2.917,
        "text": "请小心使用ANY作为一致性级别"
      },
      {
        "start": 88.164,
        "duration": 3.09,
        "text": "事实上 最好别碰ANY这个一致性级别"
      },
      {
        "start": 91.254,
        "duration": 4.218,
        "text": "如果使用一致性级别ANY\n所有三个副本节点都可以宕机"
      },
      {
        "start": 95.472,
        "duration": 6.42,
        "text": "而协调节点会在为这些节点储存hints的情况下\n向客户端报告写入成功的信息"
      },
      {
        "start": 101.892,
        "duration": 4.325,
        "text": "可是这些数据不会在接下来的任何读取结果中出现"
      },
      {
        "start": 106.217,
        "duration": 2.791,
        "text": "直到宕机的三个副本节点中的一个重新上线"
      },
      {
        "start": 109.008,
        "duration": 1.574,
        "text": "这个情况还有一个前提条件"
      },
      {
        "start": 110.582,
        "duration": 3.914,
        "text": "就是当副本节点重新上线时\n协调节点并没有掉线"
      },
      {
        "start": 114.496,
        "duration": 4.421,
        "text": "如果任何一个副本节点上线前\nhints就过期了的话"
      },
      {
        "start": 118.917,
        "duration": 2.554,
        "text": "协调节点便会将这份写入数据删除"
      },
      {
        "start": 121.471,
        "duration": 2.482,
        "text": "如果你的协调节点突然掉线的话"
      },
      {
        "start": 123.953,
        "duration": 2.116,
        "text": "你仍然会丢失你的数据"
      },
      {
        "start": 126.069,
        "duration": 4.233,
        "text": "简而言之 一致性级别ANY没有任何实际的意义"
      },
      {
        "start": 130.302,
        "duration": 3.244,
        "text": "现在 来让我们做一个有关Hinted Handoff的练习吧"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T01:56:41.618022+00:00"
}