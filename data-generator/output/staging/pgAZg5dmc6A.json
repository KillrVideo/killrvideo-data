{
  "video_id": "pgAZg5dmc6A",
  "title": "CDC for Astra DB Demo: Sink to Astra DB",
  "description": "7 minutes with David Dieruf, who will show you how to enable CDC for Astra DB, configure it to watch a Cassandra table on the Astra DB database, and then automatically propagate that change via Astra Streaming, built on Apache Pulsar, to another table on Astra DB.  Of course, CDC can be configured to watch Cassandra tables and propagate changes to other DBs like PostGres, Elasticsearch, SnowFlake and more.\n\nLearn more: https://docs.datastax.com/en/streaming/astra-streaming/developing/astream-cdc.html\n\n\nCONNECT WITH DATASTAX\nSubscribe: http://www.youtube.com/c/datastaxdevs?sub_confirmation=1 \nTwitter: https://twitter.com/datastaxdevs\nTwitch: https://www.twitch.tv/datastaxdevs\n\nAbout DataStax:\nDataStax is the company behind the massively scalable, highly available, cloud-native NoSQL data platform built on Apache Cassandra™. DataStax gives developers and enterprises the freedom to run data in any cloud, Kubernetes, hybrid or bare metal at global scale with zero downtime and zero lock-in. More than 450 of the world’s leading enterprises including Capital One, Cisco, Comcast, Delta Airlines, Macy’s, McDonald’s, Safeway, Sony, and Walmart use DataStax to build transformational data architectures for real-world outcomes. For more, visit DataStax.com and @DataStax.\n\nAbout DataStax Developer:\nOn the DataStax Developers YouTube channel, you can find tutorials, workshops and much more to help you learn and stay updated with the latest information on Apache Cassandra©.  Visit https://datastax.com/dev for more free learning resources.",
  "published_at": "2023-01-03T19:03:28Z",
  "thumbnail": "https://i.ytimg.com/vi/pgAZg5dmc6A/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "scalable",
    "demo",
    "workshop",
    "cassandra",
    "search",
    "database",
    "apache_cassandra",
    "tutorial",
    "nosql",
    "astra",
    "architecture",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=pgAZg5dmc6A",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "foreign hi I'm David today we're going to be going through a step-by-step guide to enabling CDC for Astra DB the goal is to get updates to a database table when data and another table changes we'll accomplish this through the change data capture pattern the prerequisites for this session are an active Astra DB paid account so the first step is going to be to choose the region that we're going to create our database and our streaming tenant in the regions must match so let's head over to the Astro streaming documentation regions page and you'll notice that there are three clouds provided with some with multiple regions for this session we're going to choose Google cloud and we're going to choose us Central one as our region let's head over to login and log in to our astrodb account once log in our first step is to create a database we'll choose the create database option we're going to name our database my company we're going to name our key space our product we're going to choose Google Cloud North America and U.S Central One region and create the database now we'll pause just a moment for our database status to become active all right and now with our database active using our cql console create two tables the first table is going to be called all accounts this is where we're going to store some fictitious account information we have an ID column a full name column and an email column with that created we're going to create one more table and that table is going to be called CDC accounts it matches the schema of the other table to keep things simple but what we're planning for is whenever information or data is added to the all accounts table the CDC accounts table will reflect that data added automatically all right let's go over and create a new streaming tenant we choose create streaming we're going to name our tenant my company streams we're going to choose Google cloud and the matching region to our database which was U.S Central One with our tenant created we're going to go back into our database and over to the CDC tab to enable to see the change data capture feature we're going to choose the new tenant that we just created we're going to choose the key space that was created and we're going to tell it to watch the all accounts table now we'll give it just a moment for our new CDC feature to be enabled with the status of active all right with our new CDC feature active and has a status of running we're going to go ahead and initialize the connection between our Astro DB and our Azure streaming by adding one row of data to the table everything gets initialized having added that one row of data next up we're going to create the streaming sync first we're going to need a token to connect the two systems up we're going to choose the organization administrator that's the level of role that it needs and we'll generate the token then we'll go down to the Token value copy that to the clipboard now let's head back into our new streaming tenant my company streams and head over to the syncs Tab and create a new sync so first we'll choose the Astra CDC namespace this was created automatically for us we'll choose Astra DB as our sync type we'll name the sync Astra account sync we'll choose a topic of data to all accounts these topics were created for us when we enabled CDC we'll choose a my company database the our product key space and now we're going to write information to the CDC accounts table we'll grab the token that we created before and paste that in here that then confirms that we have a good connection between our streaming tenant and our database the final thing to note is the mapping the mapping is how we tell the sync for the information that you find in the topic here's how it should be added into the database table we have some more specifics than what was pre-filled in here so we're going to clear that out and we're going to add a new definition of mapping because our ID is a key field not just a value field but remember when we created the two tables the schemas were the exact same so this looks should be looked very redundant let's go ahead and create the sink all right and now we'll wait for the sync to have a status of ready and now with the status of running for the sink this is a confirmation that we've provided the correct token for the sync to connect into the database we have provided the correct mapping for the information that will be in the topic the topic schema versus what the database schema is to get to a status of running let's head back over to our company database to the cql console we're going to add one row of data into the all accounts table and after we've done that now we can select information out of the CDC accounts table and our new data is there and this was accomplished because we wrote data into the all accounts table the CDC feature was enabled on that table so the information was automatically written into a new topic and our sync was watching that topic and knows to write the data into another table from there this session has been showing you the very basics of CDC for Astra DB stay tuned for future topics where we'll get into more advanced syncs and some more interesting options [Music]",
    "segments": [
      {
        "start": 0.06,
        "duration": 3.0,
        "text": "foreign"
      },
      {
        "start": 4.92,
        "duration": 4.02,
        "text": "hi I'm David today we're going to be"
      },
      {
        "start": 7.08,
        "duration": 4.68,
        "text": "going through a step-by-step guide to"
      },
      {
        "start": 8.94,
        "duration": 5.159,
        "text": "enabling CDC for Astra DB"
      },
      {
        "start": 11.76,
        "duration": 4.32,
        "text": "the goal is to get updates to a database"
      },
      {
        "start": 14.099,
        "duration": 3.241,
        "text": "table when data and another table"
      },
      {
        "start": 16.08,
        "duration": 3.06,
        "text": "changes"
      },
      {
        "start": 17.34,
        "duration": 4.439,
        "text": "we'll accomplish this through the change"
      },
      {
        "start": 19.14,
        "duration": 5.58,
        "text": "data capture pattern the prerequisites"
      },
      {
        "start": 21.779,
        "duration": 4.5,
        "text": "for this session are an active Astra DB"
      },
      {
        "start": 24.72,
        "duration": 4.04,
        "text": "paid account"
      },
      {
        "start": 26.279,
        "duration": 5.461,
        "text": "so the first step is going to be to"
      },
      {
        "start": 28.76,
        "duration": 5.92,
        "text": "choose the region that we're going to"
      },
      {
        "start": 31.74,
        "duration": 6.479,
        "text": "create our database and our streaming"
      },
      {
        "start": 34.68,
        "duration": 5.699,
        "text": "tenant in the regions must match"
      },
      {
        "start": 38.219,
        "duration": 5.34,
        "text": "so let's head over to the Astro"
      },
      {
        "start": 40.379,
        "duration": 4.68,
        "text": "streaming documentation regions page and"
      },
      {
        "start": 43.559,
        "duration": 4.5,
        "text": "you'll notice that there are three"
      },
      {
        "start": 45.059,
        "duration": 3.961,
        "text": "clouds provided with some with multiple"
      },
      {
        "start": 48.059,
        "duration": 2.461,
        "text": "regions"
      },
      {
        "start": 49.02,
        "duration": 3.48,
        "text": "for this session we're going to choose"
      },
      {
        "start": 50.52,
        "duration": 6.3,
        "text": "Google cloud and we're going to choose"
      },
      {
        "start": 52.5,
        "duration": 7.44,
        "text": "us Central one as our region"
      },
      {
        "start": 56.82,
        "duration": 5.16,
        "text": "let's head over to login and log in to"
      },
      {
        "start": 59.94,
        "duration": 5.28,
        "text": "our astrodb account"
      },
      {
        "start": 61.98,
        "duration": 4.86,
        "text": "once log in our first step is to create"
      },
      {
        "start": 65.22,
        "duration": 4.079,
        "text": "a database"
      },
      {
        "start": 66.84,
        "duration": 4.86,
        "text": "we'll choose the create database option"
      },
      {
        "start": 69.299,
        "duration": 3.661,
        "text": "we're going to name our database my"
      },
      {
        "start": 71.7,
        "duration": 4.38,
        "text": "company"
      },
      {
        "start": 72.96,
        "duration": 4.14,
        "text": "we're going to name our key space our"
      },
      {
        "start": 76.08,
        "duration": 3.42,
        "text": "product"
      },
      {
        "start": 77.1,
        "duration": 6.78,
        "text": "we're going to choose Google Cloud"
      },
      {
        "start": 79.5,
        "duration": 6.42,
        "text": "North America and U.S Central One region"
      },
      {
        "start": 83.88,
        "duration": 4.739,
        "text": "and create the database"
      },
      {
        "start": 85.92,
        "duration": 6.48,
        "text": "now we'll pause just a moment for our"
      },
      {
        "start": 88.619,
        "duration": 6.481,
        "text": "database status to become active"
      },
      {
        "start": 92.4,
        "duration": 6.78,
        "text": "all right and now with our database"
      },
      {
        "start": 95.1,
        "duration": 7.68,
        "text": "active using our cql console"
      },
      {
        "start": 99.18,
        "duration": 6.42,
        "text": "create two tables the first table is"
      },
      {
        "start": 102.78,
        "duration": 3.839,
        "text": "going to be called all accounts this is"
      },
      {
        "start": 105.6,
        "duration": 3.059,
        "text": "where we're going to store some"
      },
      {
        "start": 106.619,
        "duration": 5.04,
        "text": "fictitious account information"
      },
      {
        "start": 108.659,
        "duration": 6.121,
        "text": "we have an ID column a full name column"
      },
      {
        "start": 111.659,
        "duration": 5.46,
        "text": "and an email column"
      },
      {
        "start": 114.78,
        "duration": 4.5,
        "text": "with that created we're going to create"
      },
      {
        "start": 117.119,
        "duration": 4.921,
        "text": "one more table"
      },
      {
        "start": 119.28,
        "duration": 4.08,
        "text": "and that table is going to be called CDC"
      },
      {
        "start": 122.04,
        "duration": 3.179,
        "text": "accounts"
      },
      {
        "start": 123.36,
        "duration": 3.48,
        "text": "it matches the schema of the other table"
      },
      {
        "start": 125.219,
        "duration": 4.141,
        "text": "to keep things simple"
      },
      {
        "start": 126.84,
        "duration": 4.86,
        "text": "but what we're planning for is whenever"
      },
      {
        "start": 129.36,
        "duration": 4.62,
        "text": "information or data is added to the all"
      },
      {
        "start": 131.7,
        "duration": 4.259,
        "text": "accounts table the CDC accounts table"
      },
      {
        "start": 133.98,
        "duration": 3.24,
        "text": "will reflect that data added"
      },
      {
        "start": 135.959,
        "duration": 3.901,
        "text": "automatically"
      },
      {
        "start": 137.22,
        "duration": 5.34,
        "text": "all right let's go over and create a new"
      },
      {
        "start": 139.86,
        "duration": 4.2,
        "text": "streaming tenant we choose create"
      },
      {
        "start": 142.56,
        "duration": 4.86,
        "text": "streaming"
      },
      {
        "start": 144.06,
        "duration": 5.039,
        "text": "we're going to name our tenant my"
      },
      {
        "start": 147.42,
        "duration": 3.84,
        "text": "company streams"
      },
      {
        "start": 149.099,
        "duration": 4.86,
        "text": "we're going to choose Google cloud and"
      },
      {
        "start": 151.26,
        "duration": 4.86,
        "text": "the matching region to our database"
      },
      {
        "start": 153.959,
        "duration": 4.561,
        "text": "which was U.S Central One"
      },
      {
        "start": 156.12,
        "duration": 5.64,
        "text": "with our tenant created we're going to"
      },
      {
        "start": 158.52,
        "duration": 6.48,
        "text": "go back into our database and over to"
      },
      {
        "start": 161.76,
        "duration": 5.46,
        "text": "the CDC tab to enable to see the change"
      },
      {
        "start": 165.0,
        "duration": 3.66,
        "text": "data capture feature we're going to"
      },
      {
        "start": 167.22,
        "duration": 2.58,
        "text": "choose the new tenant that we just"
      },
      {
        "start": 168.66,
        "duration": 3.12,
        "text": "created"
      },
      {
        "start": 169.8,
        "duration": 3.36,
        "text": "we're going to choose the key space that"
      },
      {
        "start": 171.78,
        "duration": 3.9,
        "text": "was created"
      },
      {
        "start": 173.16,
        "duration": 4.92,
        "text": "and we're going to tell it to watch the"
      },
      {
        "start": 175.68,
        "duration": 4.38,
        "text": "all accounts table"
      },
      {
        "start": 178.08,
        "duration": 5.34,
        "text": "now we'll give it just a moment for our"
      },
      {
        "start": 180.06,
        "duration": 5.94,
        "text": "new CDC feature to be enabled with the"
      },
      {
        "start": 183.42,
        "duration": 3.66,
        "text": "status of active"
      },
      {
        "start": 186.0,
        "duration": 4.08,
        "text": "all right"
      },
      {
        "start": 187.08,
        "duration": 4.86,
        "text": "with our new CDC feature active and has"
      },
      {
        "start": 190.08,
        "duration": 3.72,
        "text": "a status of running"
      },
      {
        "start": 191.94,
        "duration": 5.519,
        "text": "we're going to go ahead and initialize"
      },
      {
        "start": 193.8,
        "duration": 6.659,
        "text": "the connection between our Astro DB and"
      },
      {
        "start": 197.459,
        "duration": 5.161,
        "text": "our Azure streaming by adding one row of"
      },
      {
        "start": 200.459,
        "duration": 4.92,
        "text": "data to the table everything gets"
      },
      {
        "start": 202.62,
        "duration": 5.039,
        "text": "initialized having added that one row of"
      },
      {
        "start": 205.379,
        "duration": 4.621,
        "text": "data next up we're going to create the"
      },
      {
        "start": 207.659,
        "duration": 6.541,
        "text": "streaming sync first we're going to need"
      },
      {
        "start": 210.0,
        "duration": 6.12,
        "text": "a token to connect the two systems up"
      },
      {
        "start": 214.2,
        "duration": 4.14,
        "text": "we're going to choose the organization"
      },
      {
        "start": 216.12,
        "duration": 3.3,
        "text": "administrator that's the level of role"
      },
      {
        "start": 218.34,
        "duration": 3.539,
        "text": "that it needs"
      },
      {
        "start": 219.42,
        "duration": 4.2,
        "text": "and we'll generate the token"
      },
      {
        "start": 221.879,
        "duration": 4.801,
        "text": "then we'll go down to the Token value"
      },
      {
        "start": 223.62,
        "duration": 4.759,
        "text": "copy that to the clipboard now let's"
      },
      {
        "start": 226.68,
        "duration": 4.86,
        "text": "head back into"
      },
      {
        "start": 228.379,
        "duration": 5.92,
        "text": "our new streaming tenant my company"
      },
      {
        "start": 231.54,
        "duration": 5.82,
        "text": "streams and head over to the syncs Tab"
      },
      {
        "start": 234.299,
        "duration": 5.461,
        "text": "and create a new sync so first we'll"
      },
      {
        "start": 237.36,
        "duration": 5.159,
        "text": "choose the Astra CDC namespace this was"
      },
      {
        "start": 239.76,
        "duration": 6.0,
        "text": "created automatically for us"
      },
      {
        "start": 242.519,
        "duration": 5.701,
        "text": "we'll choose Astra DB as our sync type"
      },
      {
        "start": 245.76,
        "duration": 6.119,
        "text": "we'll name the sync"
      },
      {
        "start": 248.22,
        "duration": 7.5,
        "text": "Astra account sync"
      },
      {
        "start": 251.879,
        "duration": 5.76,
        "text": "we'll choose a topic of data to all"
      },
      {
        "start": 255.72,
        "duration": 4.739,
        "text": "accounts these topics were created for"
      },
      {
        "start": 257.639,
        "duration": 6.901,
        "text": "us when we enabled CDC"
      },
      {
        "start": 260.459,
        "duration": 6.721,
        "text": "we'll choose a my company database the"
      },
      {
        "start": 264.54,
        "duration": 5.28,
        "text": "our product key space"
      },
      {
        "start": 267.18,
        "duration": 7.34,
        "text": "and now we're going to write information"
      },
      {
        "start": 269.82,
        "duration": 4.7,
        "text": "to the CDC accounts table"
      },
      {
        "start": 274.68,
        "duration": 5.94,
        "text": "we'll grab the token that we created"
      },
      {
        "start": 277.5,
        "duration": 5.46,
        "text": "before and paste that in here that then"
      },
      {
        "start": 280.62,
        "duration": 5.639,
        "text": "confirms that we have a good connection"
      },
      {
        "start": 282.96,
        "duration": 6.179,
        "text": "between our streaming tenant and our"
      },
      {
        "start": 286.259,
        "duration": 6.421,
        "text": "database the final thing to note is the"
      },
      {
        "start": 289.139,
        "duration": 5.761,
        "text": "mapping the mapping is how we tell the"
      },
      {
        "start": 292.68,
        "duration": 4.5,
        "text": "sync for the information that you find"
      },
      {
        "start": 294.9,
        "duration": 6.18,
        "text": "in the topic here's how it should be"
      },
      {
        "start": 297.18,
        "duration": 5.64,
        "text": "added into the database table"
      },
      {
        "start": 301.08,
        "duration": 3.6,
        "text": "we have some more specifics than what"
      },
      {
        "start": 302.82,
        "duration": 4.26,
        "text": "was pre-filled in here so we're going to"
      },
      {
        "start": 304.68,
        "duration": 5.1,
        "text": "clear that out and we're going to add a"
      },
      {
        "start": 307.08,
        "duration": 6.119,
        "text": "new definition of mapping because our ID"
      },
      {
        "start": 309.78,
        "duration": 5.34,
        "text": "is a key field not just a value field"
      },
      {
        "start": 313.199,
        "duration": 3.72,
        "text": "but remember when we created the two"
      },
      {
        "start": 315.12,
        "duration": 3.9,
        "text": "tables the schemas were the exact same"
      },
      {
        "start": 316.919,
        "duration": 4.261,
        "text": "so this looks should be looked very"
      },
      {
        "start": 319.02,
        "duration": 4.399,
        "text": "redundant let's go ahead and create the"
      },
      {
        "start": 321.18,
        "duration": 2.239,
        "text": "sink"
      },
      {
        "start": 324.66,
        "duration": 5.28,
        "text": "all right and now we'll wait for the"
      },
      {
        "start": 326.58,
        "duration": 5.94,
        "text": "sync to have a status of ready"
      },
      {
        "start": 329.94,
        "duration": 5.4,
        "text": "and now with the status of running for"
      },
      {
        "start": 332.52,
        "duration": 5.399,
        "text": "the sink this is a confirmation that"
      },
      {
        "start": 335.34,
        "duration": 4.919,
        "text": "we've provided the correct token for the"
      },
      {
        "start": 337.919,
        "duration": 4.56,
        "text": "sync to connect into the database we"
      },
      {
        "start": 340.259,
        "duration": 4.021,
        "text": "have provided the correct mapping"
      },
      {
        "start": 342.479,
        "duration": 5.461,
        "text": "for the information that will be in the"
      },
      {
        "start": 344.28,
        "duration": 7.08,
        "text": "topic the topic schema versus what the"
      },
      {
        "start": 347.94,
        "duration": 6.18,
        "text": "database schema is to get to a status of"
      },
      {
        "start": 351.36,
        "duration": 6.24,
        "text": "running let's head back over to our"
      },
      {
        "start": 354.12,
        "duration": 7.26,
        "text": "company database to the cql console"
      },
      {
        "start": 357.6,
        "duration": 5.939,
        "text": "we're going to add one row of data into"
      },
      {
        "start": 361.38,
        "duration": 5.58,
        "text": "the all accounts table"
      },
      {
        "start": 363.539,
        "duration": 6.421,
        "text": "and after we've done that now we can"
      },
      {
        "start": 366.96,
        "duration": 5.28,
        "text": "select information out of the CDC"
      },
      {
        "start": 369.96,
        "duration": 4.2,
        "text": "accounts table"
      },
      {
        "start": 372.24,
        "duration": 4.26,
        "text": "and our new data is there"
      },
      {
        "start": 374.16,
        "duration": 5.34,
        "text": "and this was accomplished because we"
      },
      {
        "start": 376.5,
        "duration": 5.039,
        "text": "wrote data into the all accounts table"
      },
      {
        "start": 379.5,
        "duration": 3.72,
        "text": "the CDC feature was enabled on that"
      },
      {
        "start": 381.539,
        "duration": 5.22,
        "text": "table so the information was"
      },
      {
        "start": 383.22,
        "duration": 6.479,
        "text": "automatically written into a new topic"
      },
      {
        "start": 386.759,
        "duration": 5.28,
        "text": "and our sync was watching that topic and"
      },
      {
        "start": 389.699,
        "duration": 3.241,
        "text": "knows to write the data into another"
      },
      {
        "start": 392.039,
        "duration": 2.1,
        "text": "table"
      },
      {
        "start": 392.94,
        "duration": 3.66,
        "text": "from there"
      },
      {
        "start": 394.139,
        "duration": 7.201,
        "text": "this session has been showing you the"
      },
      {
        "start": 396.6,
        "duration": 6.659,
        "text": "very basics of CDC for Astra DB stay"
      },
      {
        "start": 401.34,
        "duration": 4.44,
        "text": "tuned for future topics where we'll get"
      },
      {
        "start": 403.259,
        "duration": 4.231,
        "text": "into more advanced syncs and some more"
      },
      {
        "start": 405.78,
        "duration": 5.7,
        "text": "interesting options"
      },
      {
        "start": 407.49,
        "duration": 3.99,
        "text": "[Music]"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-15T18:21:59.165894+00:00"
}