{
  "video_id": "8AoWhAhfuYk",
  "title": "03 | Intro to Cassandra - Tables, Partitions, and Examples",
  "description": "Welcome to the Intro to Cassandra Crash Course! In this video series, we'll go over the basics of how Apache Cassandra works and get hands on with implementing a basic Cassandra Database in the cloud!\n\nðŸ’» Create your Cassandra Database:\nhttps://astra.dev/cassandra-course\n\nðŸ“¥ Workshop Materials:\nhttps://github.com/DataStax-Academy/Intro-to-Cassandra-for-Developers\n\nLearn more about Cassandra at Apache (https://cassandra.apache.org/doc/latest/)  and DataStax (https://docs.datastax.com/en/landing_page/doc/landing_page/cassandra.html) documentation websites.\n\nCONNECT WITH DATASTAX\nSubscribe: http://www.youtube.com/c/datastaxdevs?sub_confirmation=1 \nTwitter: https://twitter.com/datastaxdevs\nTwitch: https://www.twitch.tv/datastaxdevs\n\nAbout DataStax:\nDataStax is the company behind the massively scalable, highly available, cloud-native NoSQL data platform built on Apache Cassandraâ„¢. DataStax gives developers and enterprises the freedom to run data in any cloud, Kubernetes, hybrid or bare metal at global scale with zero downtime and zero lock-in. More than 450 of the worldâ€™s leading enterprises including Capital One, Cisco, Comcast, Delta Airlines, Macyâ€™s, McDonaldâ€™s, Safeway, Sony, and Walmart use DataStax to build transformational data architectures for real-world outcomes. For more, visit DataStax.com and @DataStax.\n\nAbout DataStax Developer:\nOn the DataStax Developers YouTube channel, you can find tutorials, workshops and much more to help you learn and stay updated with the latest information on Apache CassandraÂ©.  Visit https://datastax.com/dev for more free learning resources.",
  "published_at": "2021-04-21T14:43:30Z",
  "thumbnail": "https://i.ytimg.com/vi/8AoWhAhfuYk/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "scalable",
    "workshop",
    "cassandra",
    "database",
    "apache_cassandra",
    "tutorial",
    "nosql",
    "astra",
    "architecture",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=8AoWhAhfuYk",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "welcome back to video three of seven in our intro to cassandra for developers crash course tables partitions and examples so in this section we're just gonna go over the basic components what creates cells rows tables and such and then get into a little bit more discussion on data modeling in cassandra so the first thing here is a cell a cell is essentially just the intersection of a row and a column anyone who's ever worked with an excel spreadsheet or a tabular format you might see in a relational database we'll be really familiar with what this is then if we step back a level and we look at a row right this is going to be a single structured data item in a table and rows are comprised usually of multiple related cells right so we see in this case i have four cells with values one john doe and wizardry and these all related together in a single row in cassandra partitions are the base physical unit of access so this is how the data is stored physically on disk so let's take a look at the example here and notice to the very right we have the department column and all the values are wizardry now in this example we have set department as our partition key which means we're just partitioning by department well even though i have three rows here given that each one of the rows has the same partition key same wizardry partition key these are actually all stored in the same physical partition so these are actually stored together and they are also retrieved together so if i were to then say uh select star from this table where department equals wizardry i would get back all these values now if we go ahead and step back even further and look at a table now that has multiple partitions so again in this case i have three rows that hasn't changed but look at our department notice it's wizardry dark magic and devrel again since i'm partitioning by department i would actually have three separate physical partitions here wizardry dark magic and devrel even though i have three rows so in my single logical table if i were to select star from this table i would get back all three rows that i see but i would actually be accessing three separate physical partitions in my cluster okay so let's step back even further right and now you can see a key space so a key space is just a container of tables it's where you set replication it contains the tables it's similar to a database or a schema from a relational database and then within the key space i have any of my tables and again just like we were talking about i have my rows and columns there and and those tables are separated into our physical partitions based off of our partition key so let's go ahead and look at a concrete example because i really like concrete examples as a way to really illustrate things so in this example here you see we have a killer video key space so it contains my tables and in this case we have a table called users by city now i want you to notice the convention here i want users partitioned by city so that's how we do that we say the buy and then whatever that is is what i'm partitioning by so in this example we're partitioning by city so notice i have two two different values for city phoenix and seattle these are my physical partitions now again logically if i were to select star from this table i would see everything that you see here underneath the hood physically i would actually be storing my data in two physical partitions phoenix and seattle now notice how both phoenix and seattle have multiple rows of data and what we've done here is we set what's called a clustering column so you can use clustering columns for order or uniqueness because it's important that your primary key uniquely identifies a row right with ordering and a clustering column take a look at last name notice how last name in phoenix is helsin last fall and smith well clustering columns by their nature what they'll do is as data is being written into the database the data is going to be naturally ordered for those types that fit this kind of thing in a case of a text field it's alphanumeric so h comes before l it comes before s and so on so again that's automatically happening it's actually stored that way on disk anything that's not a partition key or a clustering column are what we call data columns this is essentially the payload of your data right so most the time i'll be selecting by some values either in my partition key and my where clause and my clustering columns and then i will be getting whatever data i have in the table and then if you look at then how do we create a table this should look very familiar to you if you've come from the relational world with sql it matter of fact cql is a subset of sql so and that's on purpose it's there to really kind of help folks who've been doing things with sql kind of come back to natural home if you will it's a language that everyone knows and it's been very well indoctrinated over decades so we're using that here so if we look at the syntax we have create table i'm going to use my key space dot whatever the table name is i'll set up a set of column definitions um city last name first name whatever they happen to be in their types and then really at the bottom that's the key thing we're getting at is the primary key so take a look at what's happening here in all tables in cassandra by the way you must include at least one partition key that's city so we're saying we're going to partition by city anything else that comes after that are clustering columns now notice the parens that are around city that's also denoting a partition key now the reason why we're using parens it's just a good mechanism to use to denote what the partition key is also if you're using a composite partition key you have to include the parens to tell cql these columns belong to my partition key so it's just a good idea to always include the parens that way if you just have one column in your partition key well it's very clear which one's your partition key and if you happen to be using a composite you also very clearly know that is the partition key so the real thing that you want to keep in mind with a primary key is that it must ensure uniqueness its real primary purpose is to ensure that row is unique and it may also define sorting with what we call clustering columns the key thing to take away here is that primary keys really are to define a unique row then if you take a look at the partition key itself that is used to partition our rows so again when i was talking about uh the convention we use where i have like users by city i want some some data i want my users i'm going to partition by city okay so let's take a look at clustering columns clustering columns are really there to either sort define sorting or uniqueness now in the first example that we have let's take a look at the uniqueness example notice how the first example says city last name and first name but it's got that big red x that says not unique why is this imagine what might happen if i had say two jane does or john doe's in the same city so city orlando last name doe first name jane well in cassandra last right wins right so what would happen is if i inserted some data using that first example for jane doe in orlando and then later on i had another jane dona orlando a different jane doe then the last one would effectively just overwrite the first one last right wins so again since the primary purpose of the primary key is to ensure uniqueness of a row look at what we've done there in the good example where we've added email so i have i'm partitioning by city and clustering by last name first name then email why because email is what we call a natural key you generally are not going to have two of those that are shared between two different people so if i then had two jane does in orlando well guess what they're gonna have different emails now i can ensure that that row is unique now if you take a look at the bottom example here this is one example of sorting so in the first example i am partitioning by video id but then i'm clustering by comment id now if i have a case in my ui or my app where for every video i want to be able to show all the comments that's wonderful and this will work however comments usually make more sense when they are in time order right if i have a set of comments on a video and then later on i view them if they're all just shown to me in a random order they're not going to make much sense as far as a conversation goes so in the bottom example there notice that we added created at as a clustering column so what's going to happen now is cassandra is going to naturally sort that so remember clustering columns can be used for either sorting or uniqueness so in this case what we're doing is we're partitioning by video id we're ordering by created at and then we're using comment id for uniqueness so not only do i have a unique row for each video and comment combination but at the same time because i've created at those comments will be automatically and naturally sorted in time that way when they're returned to me they'll be sorted in the way that i would expect a conversation to happen okay so some rules of a good partition first thing is you want to store together what you retrieve together really what it comes down to is you want to be able to whatever you store together when you go to retrieve it later you want to retrieve it in one read or the fewest amount of reads as possible so going back to the example i was using a moment ago let let's say i'm looking at a youtube app when i look at the video i also want to retrieve those comments so the first example does exactly that for any given video i'm going to retrieve all the comments for that video in one read the second example there though notice it's partitioned by common id and then i have you know i'm clustering but created app that's great i'm going to have these ordered comments but i will have a separate partition for every single comment that means if i had a video that had a thousand comments i would then have to iterate through all thousands of those comments in queries to be able to get those back right so i'm not storing together what i retrieved together the first example is in one read i can retrieve all the data and the second example i have to do a lot of subsequent queries to get all my data put together so another thing you want to avoid are big partitions right so cassandra has some pretty nice limits as as far as you know it's technically unbounded however there are practical limits on how big your partitions can get and how many rows you should really store in them and this all really comes down to maintaining your performance at scale right because cassandra is all about being able to maintain your very tight slas and your read and write performance at scale so what this really comes down to is once you start to get around a hundred thousand rows per partition you really need to break it up it's the same thing if you get to about a hundred megabytes per partition the key thing you don't want is to cause what we call unbounded partition growth or have particularly large partitions so let's take a look at our examples here notice the first example we're partitioning by video id we have our created at in our common id so in this particular case yeah you know if i have a particularly popular video i may end up with a hundred thousand comments per video but probably not right and for the particular payload i'm i'm probably going to be within my hundred megabyte um size limit as well now the example on the bottom though the one with the red x i'm partitioning by country and then i'm clustering by user id what might happen if i hit a country like india and i'm storing a role for every single person in india how many billion people are in india right now so i'm completely going to go past the hundred thousand row practical limit here and and that would actually grow you know pretty large so again the top one is keeping me within my limits where the bottom one there has a very good chance to grow pretty big now another thing you want to avoid are unbounded partitions so take a look at this iot example the first example here we give notice we have we're partitioning by our sensor id and then reported at right so reported is going to be the time that some data comes in or something like that now what might happen though if for a particular sensor we're reporting data every five seconds or every 10 seconds right i could end up with significant growth in a very short period of time how much data might this turn out to be say in a month a year right and it's totally unbounded there is nothing to limit the size of this partition for one particular sensor so what i want to do is what we call bucketing notice now what happened in my partition key instead of just sensor id it's sensor id and month year so now we're we're bucketing this by the month and a year so for each month what's going to happen i'm going to be capped i'll be capped at the amount of data i get for any particular sensor in a month right so this way i can now properly size and kind of anticipate what the size of my data is going to be and the top example it it's completely unbounded and that partition would just continue to grow and then the last one here is you want to avoid hot partitions now there is a relationship or can be a relationship to big partitions a hot partition really just means a case where one partition is really getting hit compared to all the other ones like all the read requests are going there and what it does it ends up in an unbalanced cluster right where i have just a subset of nodes that are taking on the brunt of all of my operations and requests so going back to our country example that we used before in india imagine the difference i might have in the reads the amount of reads that i have to partition if i have some kind of app that has lots of users logging in and using it and i have a country like india compared to a country like iceland india has a lot more orders of magnitude more people in it than iceland does and for this particular app we're just going to assume that that means i also have a lot more folks that are constantly hitting that india partition right so this is a case where i very well may have a hot partition where i have one partition that's really taking all the line share of my operations and unbalancing my clusters alrighty so that wraps it up here for video three of seven partitions tables and examples join me for video for next as we do in exercise",
    "segments": [
      {
        "start": 0.799,
        "duration": 4.081,
        "text": "welcome back to video three of seven in"
      },
      {
        "start": 2.96,
        "duration": 2.799,
        "text": "our intro to cassandra for developers"
      },
      {
        "start": 4.88,
        "duration": 3.679,
        "text": "crash course"
      },
      {
        "start": 5.759,
        "duration": 3.92,
        "text": "tables partitions and examples so in"
      },
      {
        "start": 8.559,
        "duration": 3.281,
        "text": "this section we're just"
      },
      {
        "start": 9.679,
        "duration": 3.601,
        "text": "gonna go over the basic components what"
      },
      {
        "start": 11.84,
        "duration": 3.44,
        "text": "creates cells rows"
      },
      {
        "start": 13.28,
        "duration": 3.28,
        "text": "tables and such and then get into a"
      },
      {
        "start": 15.28,
        "duration": 4.72,
        "text": "little bit more discussion on"
      },
      {
        "start": 16.56,
        "duration": 3.44,
        "text": "data modeling in cassandra"
      },
      {
        "start": 21.199,
        "duration": 4.32,
        "text": "so the first thing here is a cell a cell"
      },
      {
        "start": 24.0,
        "duration": 2.8,
        "text": "is essentially just the intersection of"
      },
      {
        "start": 25.519,
        "duration": 2.721,
        "text": "a row and a column"
      },
      {
        "start": 26.8,
        "duration": 3.68,
        "text": "anyone who's ever worked with an excel"
      },
      {
        "start": 28.24,
        "duration": 3.76,
        "text": "spreadsheet or a tabular format you"
      },
      {
        "start": 30.48,
        "duration": 3.04,
        "text": "might see in a relational database"
      },
      {
        "start": 32.0,
        "duration": 3.52,
        "text": "we'll be really familiar with what this"
      },
      {
        "start": 33.52,
        "duration": 3.76,
        "text": "is then if we step"
      },
      {
        "start": 35.52,
        "duration": 3.68,
        "text": "back a level and we look at a row right"
      },
      {
        "start": 37.28,
        "duration": 3.439,
        "text": "this is going to be a single structured"
      },
      {
        "start": 39.2,
        "duration": 4.32,
        "text": "data item in a table"
      },
      {
        "start": 40.719,
        "duration": 4.481,
        "text": "and rows are comprised usually of"
      },
      {
        "start": 43.52,
        "duration": 3.12,
        "text": "multiple related cells right so we see"
      },
      {
        "start": 45.2,
        "duration": 4.56,
        "text": "in this case i have four"
      },
      {
        "start": 46.64,
        "duration": 5.439,
        "text": "cells with values one john"
      },
      {
        "start": 49.76,
        "duration": 3.2,
        "text": "doe and wizardry and these all related"
      },
      {
        "start": 52.079,
        "duration": 4.081,
        "text": "together in a"
      },
      {
        "start": 52.96,
        "duration": 3.919,
        "text": "single row in cassandra partitions are"
      },
      {
        "start": 56.16,
        "duration": 2.879,
        "text": "the base"
      },
      {
        "start": 56.879,
        "duration": 4.561,
        "text": "physical unit of access so this is how"
      },
      {
        "start": 59.039,
        "duration": 4.241,
        "text": "the data is stored physically on disk"
      },
      {
        "start": 61.44,
        "duration": 5.039,
        "text": "so let's take a look at the example here"
      },
      {
        "start": 63.28,
        "duration": 6.32,
        "text": "and notice to the very right we have"
      },
      {
        "start": 66.479,
        "duration": 5.201,
        "text": "the department column and all the values"
      },
      {
        "start": 69.6,
        "duration": 4.0,
        "text": "are wizardry now in this example we have"
      },
      {
        "start": 71.68,
        "duration": 3.84,
        "text": "set department as our partition key"
      },
      {
        "start": 73.6,
        "duration": 3.92,
        "text": "which means we're just partitioning by"
      },
      {
        "start": 75.52,
        "duration": 3.44,
        "text": "department well even though i have three"
      },
      {
        "start": 77.52,
        "duration": 4.239,
        "text": "rows here given"
      },
      {
        "start": 78.96,
        "duration": 4.24,
        "text": "that each one of the rows has the same"
      },
      {
        "start": 81.759,
        "duration": 3.601,
        "text": "partition key same"
      },
      {
        "start": 83.2,
        "duration": 3.68,
        "text": "wizardry partition key these are"
      },
      {
        "start": 85.36,
        "duration": 3.6,
        "text": "actually all stored in the same"
      },
      {
        "start": 86.88,
        "duration": 3.599,
        "text": "physical partition so these are actually"
      },
      {
        "start": 88.96,
        "duration": 2.56,
        "text": "stored together and they are also"
      },
      {
        "start": 90.479,
        "duration": 3.921,
        "text": "retrieved together"
      },
      {
        "start": 91.52,
        "duration": 3.279,
        "text": "so if i were to then say uh select star"
      },
      {
        "start": 94.4,
        "duration": 2.48,
        "text": "from"
      },
      {
        "start": 94.799,
        "duration": 3.521,
        "text": "this table where department equals"
      },
      {
        "start": 96.88,
        "duration": 4.72,
        "text": "wizardry i would get back"
      },
      {
        "start": 98.32,
        "duration": 6.0,
        "text": "all these values now if we go ahead and"
      },
      {
        "start": 101.6,
        "duration": 4.559,
        "text": "step back even further and look at a"
      },
      {
        "start": 104.32,
        "duration": 4.0,
        "text": "table now that has"
      },
      {
        "start": 106.159,
        "duration": 3.681,
        "text": "multiple partitions so again in this"
      },
      {
        "start": 108.32,
        "duration": 2.0,
        "text": "case i have three rows that hasn't"
      },
      {
        "start": 109.84,
        "duration": 2.08,
        "text": "changed"
      },
      {
        "start": 110.32,
        "duration": 3.28,
        "text": "but look at our department notice it's"
      },
      {
        "start": 111.92,
        "duration": 4.799,
        "text": "wizardry dark magic and"
      },
      {
        "start": 113.6,
        "duration": 5.199,
        "text": "devrel again since i'm partitioning by"
      },
      {
        "start": 116.719,
        "duration": 3.921,
        "text": "department i would actually have three"
      },
      {
        "start": 118.799,
        "duration": 3.841,
        "text": "separate physical partitions here"
      },
      {
        "start": 120.64,
        "duration": 3.6,
        "text": "wizardry dark magic and devrel even"
      },
      {
        "start": 122.64,
        "duration": 4.4,
        "text": "though i have three rows"
      },
      {
        "start": 124.24,
        "duration": 4.48,
        "text": "so in my single logical table if i were"
      },
      {
        "start": 127.04,
        "duration": 3.76,
        "text": "to select star from this table"
      },
      {
        "start": 128.72,
        "duration": 4.0,
        "text": "i would get back all three rows that i"
      },
      {
        "start": 130.8,
        "duration": 3.76,
        "text": "see but i would actually be accessing"
      },
      {
        "start": 132.72,
        "duration": 3.599,
        "text": "three separate physical partitions in my"
      },
      {
        "start": 134.56,
        "duration": 3.6,
        "text": "cluster"
      },
      {
        "start": 136.319,
        "duration": 3.441,
        "text": "okay so let's step back even further"
      },
      {
        "start": 138.16,
        "duration": 4.0,
        "text": "right and"
      },
      {
        "start": 139.76,
        "duration": 4.16,
        "text": "now you can see a key space so a key"
      },
      {
        "start": 142.16,
        "duration": 3.439,
        "text": "space is just a container of tables it's"
      },
      {
        "start": 143.92,
        "duration": 2.399,
        "text": "where you set replication it contains"
      },
      {
        "start": 145.599,
        "duration": 3.041,
        "text": "the tables"
      },
      {
        "start": 146.319,
        "duration": 4.0,
        "text": "it's similar to a database or a schema"
      },
      {
        "start": 148.64,
        "duration": 3.36,
        "text": "from a relational database"
      },
      {
        "start": 150.319,
        "duration": 3.681,
        "text": "and then within the key space i have any"
      },
      {
        "start": 152.0,
        "duration": 3.68,
        "text": "of my tables and again just like we were"
      },
      {
        "start": 154.0,
        "duration": 2.239,
        "text": "talking about i have my rows and columns"
      },
      {
        "start": 155.68,
        "duration": 3.44,
        "text": "there"
      },
      {
        "start": 156.239,
        "duration": 4.801,
        "text": "and and those tables are separated into"
      },
      {
        "start": 159.12,
        "duration": 3.04,
        "text": "our physical partitions based off of our"
      },
      {
        "start": 161.04,
        "duration": 2.559,
        "text": "partition key"
      },
      {
        "start": 162.16,
        "duration": 3.12,
        "text": "so let's go ahead and look at a concrete"
      },
      {
        "start": 163.599,
        "duration": 2.241,
        "text": "example because i really like concrete"
      },
      {
        "start": 165.28,
        "duration": 3.599,
        "text": "examples"
      },
      {
        "start": 165.84,
        "duration": 4.96,
        "text": "as a way to really illustrate things so"
      },
      {
        "start": 168.879,
        "duration": 4.321,
        "text": "in this example here you see we have a"
      },
      {
        "start": 170.8,
        "duration": 4.24,
        "text": "killer video key space so it contains my"
      },
      {
        "start": 173.2,
        "duration": 2.16,
        "text": "tables and in this case we have a table"
      },
      {
        "start": 175.04,
        "duration": 2.96,
        "text": "called"
      },
      {
        "start": 175.36,
        "duration": 3.92,
        "text": "users by city now i want you to notice"
      },
      {
        "start": 178.0,
        "duration": 4.4,
        "text": "the convention here"
      },
      {
        "start": 179.28,
        "duration": 4.8,
        "text": "i want users partitioned by city so"
      },
      {
        "start": 182.4,
        "duration": 2.96,
        "text": "that's how we do that we say the buy"
      },
      {
        "start": 184.08,
        "duration": 4.159,
        "text": "and then whatever that is is what i'm"
      },
      {
        "start": 185.36,
        "duration": 5.44,
        "text": "partitioning by so in this example"
      },
      {
        "start": 188.239,
        "duration": 3.201,
        "text": "we're partitioning by city so notice i"
      },
      {
        "start": 190.8,
        "duration": 2.719,
        "text": "have"
      },
      {
        "start": 191.44,
        "duration": 3.28,
        "text": "two two different values for city"
      },
      {
        "start": 193.519,
        "duration": 3.281,
        "text": "phoenix and seattle"
      },
      {
        "start": 194.72,
        "duration": 4.32,
        "text": "these are my physical partitions now"
      },
      {
        "start": 196.8,
        "duration": 2.96,
        "text": "again logically if i were to select star"
      },
      {
        "start": 199.04,
        "duration": 2.72,
        "text": "from this table"
      },
      {
        "start": 199.76,
        "duration": 3.04,
        "text": "i would see everything that you see here"
      },
      {
        "start": 201.76,
        "duration": 2.8,
        "text": "underneath the hood"
      },
      {
        "start": 202.8,
        "duration": 3.6,
        "text": "physically i would actually be storing"
      },
      {
        "start": 204.56,
        "duration": 4.64,
        "text": "my data in two physical partitions"
      },
      {
        "start": 206.4,
        "duration": 3.28,
        "text": "phoenix and seattle now notice how both"
      },
      {
        "start": 209.2,
        "duration": 3.44,
        "text": "phoenix"
      },
      {
        "start": 209.68,
        "duration": 4.24,
        "text": "and seattle have multiple rows of data"
      },
      {
        "start": 212.64,
        "duration": 2.879,
        "text": "and what we've done here is we set"
      },
      {
        "start": 213.92,
        "duration": 3.039,
        "text": "what's called a clustering column"
      },
      {
        "start": 215.519,
        "duration": 3.121,
        "text": "so you can use clustering columns for"
      },
      {
        "start": 216.959,
        "duration": 4.081,
        "text": "order or uniqueness because"
      },
      {
        "start": 218.64,
        "duration": 4.4,
        "text": "it's important that your primary key"
      },
      {
        "start": 221.04,
        "duration": 4.16,
        "text": "uniquely identifies a row"
      },
      {
        "start": 223.04,
        "duration": 4.08,
        "text": "right with ordering and a clustering"
      },
      {
        "start": 225.2,
        "duration": 3.599,
        "text": "column take a look at last name"
      },
      {
        "start": 227.12,
        "duration": 3.759,
        "text": "notice how last name in phoenix is"
      },
      {
        "start": 228.799,
        "duration": 3.681,
        "text": "helsin last fall and smith"
      },
      {
        "start": 230.879,
        "duration": 3.28,
        "text": "well clustering columns by their nature"
      },
      {
        "start": 232.48,
        "duration": 3.52,
        "text": "what they'll do is as data is being"
      },
      {
        "start": 234.159,
        "duration": 3.521,
        "text": "written into the database the data is"
      },
      {
        "start": 236.0,
        "duration": 3.36,
        "text": "going to be naturally ordered for those"
      },
      {
        "start": 237.68,
        "duration": 3.839,
        "text": "types that fit this kind of thing"
      },
      {
        "start": 239.36,
        "duration": 3.12,
        "text": "in a case of a text field it's"
      },
      {
        "start": 241.519,
        "duration": 3.761,
        "text": "alphanumeric"
      },
      {
        "start": 242.48,
        "duration": 4.8,
        "text": "so h comes before l it comes before s"
      },
      {
        "start": 245.28,
        "duration": 3.519,
        "text": "and so on so again that's automatically"
      },
      {
        "start": 247.28,
        "duration": 2.48,
        "text": "happening it's actually stored that way"
      },
      {
        "start": 248.799,
        "duration": 2.72,
        "text": "on disk"
      },
      {
        "start": 249.76,
        "duration": 3.36,
        "text": "anything that's not a partition key or a"
      },
      {
        "start": 251.519,
        "duration": 3.44,
        "text": "clustering column are what we call"
      },
      {
        "start": 253.12,
        "duration": 3.92,
        "text": "data columns this is essentially the"
      },
      {
        "start": 254.959,
        "duration": 3.041,
        "text": "payload of your data right so most the"
      },
      {
        "start": 257.04,
        "duration": 3.28,
        "text": "time"
      },
      {
        "start": 258.0,
        "duration": 3.44,
        "text": "i'll be selecting by some values either"
      },
      {
        "start": 260.32,
        "duration": 2.48,
        "text": "in my partition key"
      },
      {
        "start": 261.44,
        "duration": 2.88,
        "text": "and my where clause and my clustering"
      },
      {
        "start": 262.8,
        "duration": 4.88,
        "text": "columns and then i will be getting"
      },
      {
        "start": 264.32,
        "duration": 5.2,
        "text": "whatever data i have in the table"
      },
      {
        "start": 267.68,
        "duration": 3.36,
        "text": "and then if you look at then how do we"
      },
      {
        "start": 269.52,
        "duration": 3.36,
        "text": "create a table"
      },
      {
        "start": 271.04,
        "duration": 3.599,
        "text": "this should look very familiar to you if"
      },
      {
        "start": 272.88,
        "duration": 4.879,
        "text": "you've come from the relational world"
      },
      {
        "start": 274.639,
        "duration": 4.721,
        "text": "with sql it matter of fact cql is a"
      },
      {
        "start": 277.759,
        "duration": 3.681,
        "text": "subset of sql"
      },
      {
        "start": 279.36,
        "duration": 3.68,
        "text": "so and that's on purpose it's there to"
      },
      {
        "start": 281.44,
        "duration": 3.6,
        "text": "really kind of help folks who've been"
      },
      {
        "start": 283.04,
        "duration": 2.32,
        "text": "doing things with sql kind of come back"
      },
      {
        "start": 285.04,
        "duration": 2.32,
        "text": "to"
      },
      {
        "start": 285.36,
        "duration": 3.839,
        "text": "natural home if you will it's a language"
      },
      {
        "start": 287.36,
        "duration": 4.08,
        "text": "that everyone knows and it's been"
      },
      {
        "start": 289.199,
        "duration": 3.361,
        "text": "very well indoctrinated over decades so"
      },
      {
        "start": 291.44,
        "duration": 3.12,
        "text": "we're using that here"
      },
      {
        "start": 292.56,
        "duration": 3.12,
        "text": "so if we look at the syntax we have"
      },
      {
        "start": 294.56,
        "duration": 2.8,
        "text": "create table"
      },
      {
        "start": 295.68,
        "duration": 3.44,
        "text": "i'm going to use my key space dot"
      },
      {
        "start": 297.36,
        "duration": 3.92,
        "text": "whatever the table name is"
      },
      {
        "start": 299.12,
        "duration": 3.2,
        "text": "i'll set up a set of column definitions"
      },
      {
        "start": 301.28,
        "duration": 2.56,
        "text": "um"
      },
      {
        "start": 302.32,
        "duration": 3.28,
        "text": "city last name first name whatever they"
      },
      {
        "start": 303.84,
        "duration": 3.359,
        "text": "happen to be in their types and then"
      },
      {
        "start": 305.6,
        "duration": 2.48,
        "text": "really at the bottom that's the key"
      },
      {
        "start": 307.199,
        "duration": 3.121,
        "text": "thing we're getting at"
      },
      {
        "start": 308.08,
        "duration": 3.52,
        "text": "is the primary key so take a look at"
      },
      {
        "start": 310.32,
        "duration": 3.439,
        "text": "what's happening here"
      },
      {
        "start": 311.6,
        "duration": 3.52,
        "text": "in all tables in cassandra by the way"
      },
      {
        "start": 313.759,
        "duration": 3.521,
        "text": "you must include at least"
      },
      {
        "start": 315.12,
        "duration": 4.0,
        "text": "one partition key that's city so we're"
      },
      {
        "start": 317.28,
        "duration": 4.479,
        "text": "saying we're going to partition by"
      },
      {
        "start": 319.12,
        "duration": 4.24,
        "text": "city anything else that comes after that"
      },
      {
        "start": 321.759,
        "duration": 3.121,
        "text": "are clustering columns"
      },
      {
        "start": 323.36,
        "duration": 3.839,
        "text": "now notice the parens that are around"
      },
      {
        "start": 324.88,
        "duration": 2.879,
        "text": "city that's also denoting a partition"
      },
      {
        "start": 327.199,
        "duration": 3.121,
        "text": "key"
      },
      {
        "start": 327.759,
        "duration": 4.961,
        "text": "now the reason why we're using parens"
      },
      {
        "start": 330.32,
        "duration": 4.48,
        "text": "it's just a good mechanism to use to"
      },
      {
        "start": 332.72,
        "duration": 3.84,
        "text": "denote what the partition key is"
      },
      {
        "start": 334.8,
        "duration": 3.679,
        "text": "also if you're using a composite"
      },
      {
        "start": 336.56,
        "duration": 2.8,
        "text": "partition key you have to include the"
      },
      {
        "start": 338.479,
        "duration": 3.521,
        "text": "parens"
      },
      {
        "start": 339.36,
        "duration": 3.44,
        "text": "to tell cql these columns belong to my"
      },
      {
        "start": 342.0,
        "duration": 2.96,
        "text": "partition key"
      },
      {
        "start": 342.8,
        "duration": 3.2,
        "text": "so it's just a good idea to always"
      },
      {
        "start": 344.96,
        "duration": 3.44,
        "text": "include the parens"
      },
      {
        "start": 346.0,
        "duration": 4.08,
        "text": "that way if you just have one column in"
      },
      {
        "start": 348.4,
        "duration": 3.28,
        "text": "your partition key well it's very clear"
      },
      {
        "start": 350.08,
        "duration": 3.2,
        "text": "which one's your partition key and if"
      },
      {
        "start": 351.68,
        "duration": 4.0,
        "text": "you happen to be using a composite"
      },
      {
        "start": 353.28,
        "duration": 3.52,
        "text": "you also very clearly know that is the"
      },
      {
        "start": 355.68,
        "duration": 2.88,
        "text": "partition key"
      },
      {
        "start": 356.8,
        "duration": 3.6,
        "text": "so the real thing that you want to keep"
      },
      {
        "start": 358.56,
        "duration": 4.32,
        "text": "in mind with a primary key"
      },
      {
        "start": 360.4,
        "duration": 4.4,
        "text": "is that it must ensure uniqueness its"
      },
      {
        "start": 362.88,
        "duration": 3.84,
        "text": "real primary purpose is to ensure"
      },
      {
        "start": 364.8,
        "duration": 3.36,
        "text": "that row is unique and it may also"
      },
      {
        "start": 366.72,
        "duration": 2.479,
        "text": "define sorting with what we call"
      },
      {
        "start": 368.16,
        "duration": 2.96,
        "text": "clustering columns"
      },
      {
        "start": 369.199,
        "duration": 3.521,
        "text": "the key thing to take away here is that"
      },
      {
        "start": 371.12,
        "duration": 4.72,
        "text": "primary keys really are to"
      },
      {
        "start": 372.72,
        "duration": 4.56,
        "text": "define a unique row"
      },
      {
        "start": 375.84,
        "duration": 4.0,
        "text": "then if you take a look at the partition"
      },
      {
        "start": 377.28,
        "duration": 3.84,
        "text": "key itself that is used to partition our"
      },
      {
        "start": 379.84,
        "duration": 3.199,
        "text": "rows so again when i"
      },
      {
        "start": 381.12,
        "duration": 4.48,
        "text": "was talking about uh the convention we"
      },
      {
        "start": 383.039,
        "duration": 3.28,
        "text": "use where i have like users by city i"
      },
      {
        "start": 385.6,
        "duration": 2.319,
        "text": "want some"
      },
      {
        "start": 386.319,
        "duration": 4.481,
        "text": "some data i want my users i'm going to"
      },
      {
        "start": 387.919,
        "duration": 4.801,
        "text": "partition by city"
      },
      {
        "start": 390.8,
        "duration": 3.92,
        "text": "okay so let's take a look at clustering"
      },
      {
        "start": 392.72,
        "duration": 2.72,
        "text": "columns clustering columns are really"
      },
      {
        "start": 394.72,
        "duration": 3.84,
        "text": "there"
      },
      {
        "start": 395.44,
        "duration": 5.28,
        "text": "to either sort define sorting or"
      },
      {
        "start": 398.56,
        "duration": 3.04,
        "text": "uniqueness now in the first example that"
      },
      {
        "start": 400.72,
        "duration": 2.24,
        "text": "we have"
      },
      {
        "start": 401.6,
        "duration": 3.2,
        "text": "let's take a look at the uniqueness"
      },
      {
        "start": 402.96,
        "duration": 4.0,
        "text": "example notice how"
      },
      {
        "start": 404.8,
        "duration": 3.839,
        "text": "the first example says city last name"
      },
      {
        "start": 406.96,
        "duration": 3.04,
        "text": "and first name but it's got that big red"
      },
      {
        "start": 408.639,
        "duration": 4.161,
        "text": "x that says not unique"
      },
      {
        "start": 410.0,
        "duration": 5.199,
        "text": "why is this imagine what might happen if"
      },
      {
        "start": 412.8,
        "duration": 3.44,
        "text": "i had say two jane does or john doe's in"
      },
      {
        "start": 415.199,
        "duration": 3.84,
        "text": "the same city"
      },
      {
        "start": 416.24,
        "duration": 3.519,
        "text": "so city orlando last name doe first name"
      },
      {
        "start": 419.039,
        "duration": 3.44,
        "text": "jane"
      },
      {
        "start": 419.759,
        "duration": 4.481,
        "text": "well in cassandra last right wins right"
      },
      {
        "start": 422.479,
        "duration": 2.641,
        "text": "so what would happen is if i inserted"
      },
      {
        "start": 424.24,
        "duration": 2.959,
        "text": "some data"
      },
      {
        "start": 425.12,
        "duration": 4.56,
        "text": "using that first example for jane doe in"
      },
      {
        "start": 427.199,
        "duration": 3.201,
        "text": "orlando and then later on i had another"
      },
      {
        "start": 429.68,
        "duration": 2.959,
        "text": "jane dona"
      },
      {
        "start": 430.4,
        "duration": 3.68,
        "text": "orlando a different jane doe then the"
      },
      {
        "start": 432.639,
        "duration": 3.68,
        "text": "last one would effectively just"
      },
      {
        "start": 434.08,
        "duration": 3.839,
        "text": "overwrite the first one last right wins"
      },
      {
        "start": 436.319,
        "duration": 3.361,
        "text": "so again since the primary purpose of"
      },
      {
        "start": 437.919,
        "duration": 3.921,
        "text": "the primary key is to ensure"
      },
      {
        "start": 439.68,
        "duration": 3.04,
        "text": "uniqueness of a row look at what we've"
      },
      {
        "start": 441.84,
        "duration": 3.44,
        "text": "done there"
      },
      {
        "start": 442.72,
        "duration": 5.12,
        "text": "in the good example where we've added"
      },
      {
        "start": 445.28,
        "duration": 4.4,
        "text": "email so i have i'm partitioning by city"
      },
      {
        "start": 447.84,
        "duration": 3.199,
        "text": "and clustering by last name first name"
      },
      {
        "start": 449.68,
        "duration": 3.44,
        "text": "then email"
      },
      {
        "start": 451.039,
        "duration": 3.44,
        "text": "why because email is what we call a"
      },
      {
        "start": 453.12,
        "duration": 2.799,
        "text": "natural key"
      },
      {
        "start": 454.479,
        "duration": 2.72,
        "text": "you generally are not going to have two"
      },
      {
        "start": 455.919,
        "duration": 2.481,
        "text": "of those that are shared between two"
      },
      {
        "start": 457.199,
        "duration": 3.201,
        "text": "different people"
      },
      {
        "start": 458.4,
        "duration": 3.519,
        "text": "so if i then had two jane does in"
      },
      {
        "start": 460.4,
        "duration": 2.639,
        "text": "orlando well guess what they're gonna"
      },
      {
        "start": 461.919,
        "duration": 3.84,
        "text": "have different emails"
      },
      {
        "start": 463.039,
        "duration": 3.44,
        "text": "now i can ensure that that row is unique"
      },
      {
        "start": 465.759,
        "duration": 2.321,
        "text": "now if you take a"
      },
      {
        "start": 466.479,
        "duration": 3.201,
        "text": "look at the bottom example here this is"
      },
      {
        "start": 468.08,
        "duration": 3.839,
        "text": "one example of sorting"
      },
      {
        "start": 469.68,
        "duration": 4.0,
        "text": "so in the first example i am"
      },
      {
        "start": 471.919,
        "duration": 3.601,
        "text": "partitioning by video id"
      },
      {
        "start": 473.68,
        "duration": 3.12,
        "text": "but then i'm clustering by comment id"
      },
      {
        "start": 475.52,
        "duration": 4.399,
        "text": "now if i have a case"
      },
      {
        "start": 476.8,
        "duration": 4.399,
        "text": "in my ui or my app where for every video"
      },
      {
        "start": 479.919,
        "duration": 3.28,
        "text": "i want to be able to show all the"
      },
      {
        "start": 481.199,
        "duration": 2.72,
        "text": "comments that's wonderful and this will"
      },
      {
        "start": 483.199,
        "duration": 3.68,
        "text": "work"
      },
      {
        "start": 483.919,
        "duration": 3.601,
        "text": "however comments usually make more sense"
      },
      {
        "start": 486.879,
        "duration": 2.961,
        "text": "when they are"
      },
      {
        "start": 487.52,
        "duration": 4.0,
        "text": "in time order right if i have a set of"
      },
      {
        "start": 489.84,
        "duration": 3.759,
        "text": "comments on a video"
      },
      {
        "start": 491.52,
        "duration": 3.6,
        "text": "and then later on i view them if they're"
      },
      {
        "start": 493.599,
        "duration": 2.88,
        "text": "all just shown to me in a random order"
      },
      {
        "start": 495.12,
        "duration": 3.759,
        "text": "they're not going to make much sense"
      },
      {
        "start": 496.479,
        "duration": 3.681,
        "text": "as far as a conversation goes so in the"
      },
      {
        "start": 498.879,
        "duration": 3.121,
        "text": "bottom example there"
      },
      {
        "start": 500.16,
        "duration": 3.2,
        "text": "notice that we added created at as a"
      },
      {
        "start": 502.0,
        "duration": 2.16,
        "text": "clustering column so what's going to"
      },
      {
        "start": 503.36,
        "duration": 3.44,
        "text": "happen now"
      },
      {
        "start": 504.16,
        "duration": 3.12,
        "text": "is cassandra is going to naturally sort"
      },
      {
        "start": 506.8,
        "duration": 2.16,
        "text": "that"
      },
      {
        "start": 507.28,
        "duration": 4.319,
        "text": "so remember clustering columns can be"
      },
      {
        "start": 508.96,
        "duration": 4.319,
        "text": "used for either sorting or uniqueness"
      },
      {
        "start": 511.599,
        "duration": 3.44,
        "text": "so in this case what we're doing is"
      },
      {
        "start": 513.279,
        "duration": 4.64,
        "text": "we're partitioning by video id"
      },
      {
        "start": 515.039,
        "duration": 5.201,
        "text": "we're ordering by created at and then"
      },
      {
        "start": 517.919,
        "duration": 4.24,
        "text": "we're using comment id for uniqueness"
      },
      {
        "start": 520.24,
        "duration": 4.24,
        "text": "so not only do i have a unique row for"
      },
      {
        "start": 522.159,
        "duration": 4.081,
        "text": "each video and comment combination"
      },
      {
        "start": 524.48,
        "duration": 3.2,
        "text": "but at the same time because i've"
      },
      {
        "start": 526.24,
        "duration": 3.52,
        "text": "created at"
      },
      {
        "start": 527.68,
        "duration": 3.92,
        "text": "those comments will be automatically and"
      },
      {
        "start": 529.76,
        "duration": 3.44,
        "text": "naturally sorted in time"
      },
      {
        "start": 531.6,
        "duration": 3.12,
        "text": "that way when they're returned to me"
      },
      {
        "start": 533.2,
        "duration": 4.8,
        "text": "they'll be sorted in the way that i"
      },
      {
        "start": 534.72,
        "duration": 5.84,
        "text": "would expect a conversation to happen"
      },
      {
        "start": 538.0,
        "duration": 3.839,
        "text": "okay so some rules of a good partition"
      },
      {
        "start": 540.56,
        "duration": 3.36,
        "text": "first thing is you want to store"
      },
      {
        "start": 541.839,
        "duration": 4.641,
        "text": "together what you retrieve together"
      },
      {
        "start": 543.92,
        "duration": 3.68,
        "text": "really what it comes down to is you want"
      },
      {
        "start": 546.48,
        "duration": 1.52,
        "text": "to be able to whatever you store"
      },
      {
        "start": 547.6,
        "duration": 2.0,
        "text": "together"
      },
      {
        "start": 548.0,
        "duration": 3.12,
        "text": "when you go to retrieve it later you"
      },
      {
        "start": 549.6,
        "duration": 3.12,
        "text": "want to retrieve it in one read or the"
      },
      {
        "start": 551.12,
        "duration": 3.44,
        "text": "fewest amount of reads as possible"
      },
      {
        "start": 552.72,
        "duration": 3.04,
        "text": "so going back to the example i was using"
      },
      {
        "start": 554.56,
        "duration": 3.68,
        "text": "a moment ago let"
      },
      {
        "start": 555.76,
        "duration": 3.92,
        "text": "let's say i'm looking at a youtube app"
      },
      {
        "start": 558.24,
        "duration": 3.44,
        "text": "when i look at the video"
      },
      {
        "start": 559.68,
        "duration": 4.56,
        "text": "i also want to retrieve those comments"
      },
      {
        "start": 561.68,
        "duration": 4.0,
        "text": "so the first example does exactly that"
      },
      {
        "start": 564.24,
        "duration": 3.68,
        "text": "for any given video i'm going to"
      },
      {
        "start": 565.68,
        "duration": 3.599,
        "text": "retrieve all the comments for that video"
      },
      {
        "start": 567.92,
        "duration": 3.44,
        "text": "in one read"
      },
      {
        "start": 569.279,
        "duration": 4.401,
        "text": "the second example there though notice"
      },
      {
        "start": 571.36,
        "duration": 3.76,
        "text": "it's partitioned by common id"
      },
      {
        "start": 573.68,
        "duration": 2.719,
        "text": "and then i have you know i'm clustering"
      },
      {
        "start": 575.12,
        "duration": 2.56,
        "text": "but created app that's great i'm going"
      },
      {
        "start": 576.399,
        "duration": 2.801,
        "text": "to have these ordered"
      },
      {
        "start": 577.68,
        "duration": 3.76,
        "text": "comments but i will have a separate"
      },
      {
        "start": 579.2,
        "duration": 4.8,
        "text": "partition for every single comment"
      },
      {
        "start": 581.44,
        "duration": 3.12,
        "text": "that means if i had a video that had a"
      },
      {
        "start": 584.0,
        "duration": 2.72,
        "text": "thousand"
      },
      {
        "start": 584.56,
        "duration": 3.12,
        "text": "comments i would then have to iterate"
      },
      {
        "start": 586.72,
        "duration": 2.88,
        "text": "through all"
      },
      {
        "start": 587.68,
        "duration": 3.12,
        "text": "thousands of those comments in queries"
      },
      {
        "start": 589.6,
        "duration": 2.799,
        "text": "to be able to get those back"
      },
      {
        "start": 590.8,
        "duration": 4.0,
        "text": "right so i'm not storing together what i"
      },
      {
        "start": 592.399,
        "duration": 4.401,
        "text": "retrieved together the first example"
      },
      {
        "start": 594.8,
        "duration": 4.08,
        "text": "is in one read i can retrieve all the"
      },
      {
        "start": 596.8,
        "duration": 4.32,
        "text": "data and the second example i have to do"
      },
      {
        "start": 598.88,
        "duration": 4.8,
        "text": "a lot of subsequent queries to get all"
      },
      {
        "start": 601.12,
        "duration": 4.159,
        "text": "my data put together"
      },
      {
        "start": 603.68,
        "duration": 3.92,
        "text": "so another thing you want to avoid are"
      },
      {
        "start": 605.279,
        "duration": 5.12,
        "text": "big partitions right so cassandra"
      },
      {
        "start": 607.6,
        "duration": 4.32,
        "text": "has some pretty nice limits as as far as"
      },
      {
        "start": 610.399,
        "duration": 4.161,
        "text": "you know it's technically unbounded"
      },
      {
        "start": 611.92,
        "duration": 3.359,
        "text": "however there are practical limits on"
      },
      {
        "start": 614.56,
        "duration": 2.32,
        "text": "how big"
      },
      {
        "start": 615.279,
        "duration": 3.201,
        "text": "your partitions can get and how many"
      },
      {
        "start": 616.88,
        "duration": 2.72,
        "text": "rows you should really store in them and"
      },
      {
        "start": 618.48,
        "duration": 3.2,
        "text": "this all really comes down to"
      },
      {
        "start": 619.6,
        "duration": 4.88,
        "text": "maintaining your performance at scale"
      },
      {
        "start": 621.68,
        "duration": 4.159,
        "text": "right because cassandra is all about"
      },
      {
        "start": 624.48,
        "duration": 3.599,
        "text": "being able to maintain your"
      },
      {
        "start": 625.839,
        "duration": 3.361,
        "text": "very tight slas and your read and write"
      },
      {
        "start": 628.079,
        "duration": 2.641,
        "text": "performance at scale"
      },
      {
        "start": 629.2,
        "duration": 3.12,
        "text": "so what this really comes down to is"
      },
      {
        "start": 630.72,
        "duration": 2.96,
        "text": "once you start to get around a hundred"
      },
      {
        "start": 632.32,
        "duration": 3.28,
        "text": "thousand rows per partition"
      },
      {
        "start": 633.68,
        "duration": 3.279,
        "text": "you really need to break it up it's the"
      },
      {
        "start": 635.6,
        "duration": 2.88,
        "text": "same thing if you get to about a hundred"
      },
      {
        "start": 636.959,
        "duration": 3.761,
        "text": "megabytes per partition"
      },
      {
        "start": 638.48,
        "duration": 4.4,
        "text": "the key thing you don't want is to cause"
      },
      {
        "start": 640.72,
        "duration": 2.72,
        "text": "what we call unbounded partition growth"
      },
      {
        "start": 642.88,
        "duration": 2.8,
        "text": "or have"
      },
      {
        "start": 643.44,
        "duration": 4.16,
        "text": "particularly large partitions so let's"
      },
      {
        "start": 645.68,
        "duration": 3.279,
        "text": "take a look at our examples here"
      },
      {
        "start": 647.6,
        "duration": 3.52,
        "text": "notice the first example we're"
      },
      {
        "start": 648.959,
        "duration": 4.241,
        "text": "partitioning by video id we have our"
      },
      {
        "start": 651.12,
        "duration": 4.24,
        "text": "created at in our common id"
      },
      {
        "start": 653.2,
        "duration": 3.68,
        "text": "so in this particular case yeah you know"
      },
      {
        "start": 655.36,
        "duration": 4.0,
        "text": "if i have a particularly"
      },
      {
        "start": 656.88,
        "duration": 4.8,
        "text": "popular video i may end up with a"
      },
      {
        "start": 659.36,
        "duration": 4.24,
        "text": "hundred thousand comments per video but"
      },
      {
        "start": 661.68,
        "duration": 3.599,
        "text": "probably not right and for the"
      },
      {
        "start": 663.6,
        "duration": 3.6,
        "text": "particular payload i'm i'm probably"
      },
      {
        "start": 665.279,
        "duration": 4.961,
        "text": "going to be within my hundred megabyte"
      },
      {
        "start": 667.2,
        "duration": 4.96,
        "text": "um size limit as well now the example on"
      },
      {
        "start": 670.24,
        "duration": 4.48,
        "text": "the bottom though the one with the red x"
      },
      {
        "start": 672.16,
        "duration": 4.56,
        "text": "i'm partitioning by country and then i'm"
      },
      {
        "start": 674.72,
        "duration": 3.76,
        "text": "clustering by user id"
      },
      {
        "start": 676.72,
        "duration": 3.04,
        "text": "what might happen if i hit a country"
      },
      {
        "start": 678.48,
        "duration": 3.76,
        "text": "like india"
      },
      {
        "start": 679.76,
        "duration": 3.199,
        "text": "and i'm storing a role for every single"
      },
      {
        "start": 682.24,
        "duration": 2.88,
        "text": "person in"
      },
      {
        "start": 682.959,
        "duration": 4.0,
        "text": "india how many billion people are in"
      },
      {
        "start": 685.12,
        "duration": 3.52,
        "text": "india right now so i'm completely going"
      },
      {
        "start": 686.959,
        "duration": 2.481,
        "text": "to go past the hundred thousand row"
      },
      {
        "start": 688.64,
        "duration": 3.199,
        "text": "practical"
      },
      {
        "start": 689.44,
        "duration": 4.24,
        "text": "limit here and and that would actually"
      },
      {
        "start": 691.839,
        "duration": 4.081,
        "text": "grow you know pretty large so"
      },
      {
        "start": 693.68,
        "duration": 3.92,
        "text": "again the top one is keeping me within"
      },
      {
        "start": 695.92,
        "duration": 3.12,
        "text": "my limits where the bottom one there"
      },
      {
        "start": 697.6,
        "duration": 3.6,
        "text": "has a very good chance to grow pretty"
      },
      {
        "start": 699.04,
        "duration": 4.88,
        "text": "big"
      },
      {
        "start": 701.2,
        "duration": 4.48,
        "text": "now another thing you want to avoid are"
      },
      {
        "start": 703.92,
        "duration": 4.08,
        "text": "unbounded partitions"
      },
      {
        "start": 705.68,
        "duration": 4.159,
        "text": "so take a look at this iot example the"
      },
      {
        "start": 708.0,
        "duration": 2.56,
        "text": "first example here we give notice we"
      },
      {
        "start": 709.839,
        "duration": 2.721,
        "text": "have we're"
      },
      {
        "start": 710.56,
        "duration": 3.76,
        "text": "partitioning by our sensor id and then"
      },
      {
        "start": 712.56,
        "duration": 2.56,
        "text": "reported at right so reported is going"
      },
      {
        "start": 714.32,
        "duration": 2.24,
        "text": "to be the time"
      },
      {
        "start": 715.12,
        "duration": 4.08,
        "text": "that some data comes in or something"
      },
      {
        "start": 716.56,
        "duration": 3.12,
        "text": "like that now what might happen though"
      },
      {
        "start": 719.2,
        "duration": 2.24,
        "text": "if"
      },
      {
        "start": 719.68,
        "duration": 3.839,
        "text": "for a particular sensor we're reporting"
      },
      {
        "start": 721.44,
        "duration": 2.8,
        "text": "data every five seconds or every 10"
      },
      {
        "start": 723.519,
        "duration": 3.681,
        "text": "seconds"
      },
      {
        "start": 724.24,
        "duration": 4.8,
        "text": "right i could end up with significant"
      },
      {
        "start": 727.2,
        "duration": 3.28,
        "text": "growth in a very short period of time"
      },
      {
        "start": 729.04,
        "duration": 3.359,
        "text": "how much data might this turn out to be"
      },
      {
        "start": 730.48,
        "duration": 3.599,
        "text": "say in a month a year"
      },
      {
        "start": 732.399,
        "duration": 3.68,
        "text": "right and it's totally unbounded there"
      },
      {
        "start": 734.079,
        "duration": 2.801,
        "text": "is nothing to limit the size of this"
      },
      {
        "start": 736.079,
        "duration": 3.2,
        "text": "partition for"
      },
      {
        "start": 736.88,
        "duration": 4.56,
        "text": "one particular sensor so what i want to"
      },
      {
        "start": 739.279,
        "duration": 3.601,
        "text": "do is what we call bucketing"
      },
      {
        "start": 741.44,
        "duration": 3.68,
        "text": "notice now what happened in my partition"
      },
      {
        "start": 742.88,
        "duration": 6.079,
        "text": "key instead of just sensor id"
      },
      {
        "start": 745.12,
        "duration": 6.719,
        "text": "it's sensor id and month year so now"
      },
      {
        "start": 748.959,
        "duration": 3.921,
        "text": "we're we're bucketing this by the month"
      },
      {
        "start": 751.839,
        "duration": 3.521,
        "text": "and a year"
      },
      {
        "start": 752.88,
        "duration": 3.92,
        "text": "so for each month what's going to happen"
      },
      {
        "start": 755.36,
        "duration": 3.76,
        "text": "i'm going to be capped"
      },
      {
        "start": 756.8,
        "duration": 4.96,
        "text": "i'll be capped at the amount of data i"
      },
      {
        "start": 759.12,
        "duration": 4.719,
        "text": "get for any particular sensor in a month"
      },
      {
        "start": 761.76,
        "duration": 4.079,
        "text": "right so this way i can now properly"
      },
      {
        "start": 763.839,
        "duration": 3.601,
        "text": "size and kind of anticipate what the"
      },
      {
        "start": 765.839,
        "duration": 4.161,
        "text": "size of my data is going to be"
      },
      {
        "start": 767.44,
        "duration": 4.0,
        "text": "and the top example it it's completely"
      },
      {
        "start": 770.0,
        "duration": 4.0,
        "text": "unbounded and that partition would just"
      },
      {
        "start": 771.44,
        "duration": 3.76,
        "text": "continue to grow"
      },
      {
        "start": 774.0,
        "duration": 3.2,
        "text": "and then the last one here is you want"
      },
      {
        "start": 775.2,
        "duration": 3.84,
        "text": "to avoid hot partitions"
      },
      {
        "start": 777.2,
        "duration": 3.52,
        "text": "now there is a relationship or can be a"
      },
      {
        "start": 779.04,
        "duration": 3.76,
        "text": "relationship to big partitions"
      },
      {
        "start": 780.72,
        "duration": 3.119,
        "text": "a hot partition really just means a case"
      },
      {
        "start": 782.8,
        "duration": 3.44,
        "text": "where"
      },
      {
        "start": 783.839,
        "duration": 3.841,
        "text": "one partition is really getting hit"
      },
      {
        "start": 786.24,
        "duration": 2.88,
        "text": "compared to all the other ones like all"
      },
      {
        "start": 787.68,
        "duration": 2.8,
        "text": "the read requests are going there"
      },
      {
        "start": 789.12,
        "duration": 3.2,
        "text": "and what it does it ends up in an"
      },
      {
        "start": 790.48,
        "duration": 3.12,
        "text": "unbalanced cluster right where i have"
      },
      {
        "start": 792.32,
        "duration": 3.04,
        "text": "just a subset of nodes"
      },
      {
        "start": 793.6,
        "duration": 3.76,
        "text": "that are taking on the brunt of all of"
      },
      {
        "start": 795.36,
        "duration": 5.039,
        "text": "my operations and requests"
      },
      {
        "start": 797.36,
        "duration": 6.24,
        "text": "so going back to our country example"
      },
      {
        "start": 800.399,
        "duration": 4.801,
        "text": "that we used before in india imagine the"
      },
      {
        "start": 803.6,
        "duration": 3.919,
        "text": "difference i might have"
      },
      {
        "start": 805.2,
        "duration": 3.6,
        "text": "in the reads the amount of reads that i"
      },
      {
        "start": 807.519,
        "duration": 3.041,
        "text": "have to partition"
      },
      {
        "start": 808.8,
        "duration": 3.68,
        "text": "if i have some kind of app that has lots"
      },
      {
        "start": 810.56,
        "duration": 4.079,
        "text": "of users logging in and using it"
      },
      {
        "start": 812.48,
        "duration": 3.919,
        "text": "and i have a country like india compared"
      },
      {
        "start": 814.639,
        "duration": 4.481,
        "text": "to a country like iceland"
      },
      {
        "start": 816.399,
        "duration": 4.8,
        "text": "india has a lot more orders of magnitude"
      },
      {
        "start": 819.12,
        "duration": 3.6,
        "text": "more people in it than iceland does"
      },
      {
        "start": 821.199,
        "duration": 3.121,
        "text": "and for this particular app we're just"
      },
      {
        "start": 822.72,
        "duration": 2.88,
        "text": "going to assume that that means i also"
      },
      {
        "start": 824.32,
        "duration": 3.199,
        "text": "have a lot more folks"
      },
      {
        "start": 825.6,
        "duration": 3.679,
        "text": "that are constantly hitting that india"
      },
      {
        "start": 827.519,
        "duration": 3.201,
        "text": "partition right so this is a case where"
      },
      {
        "start": 829.279,
        "duration": 2.481,
        "text": "i very well may have a hot partition"
      },
      {
        "start": 830.72,
        "duration": 3.359,
        "text": "where i have"
      },
      {
        "start": 831.76,
        "duration": 4.48,
        "text": "one partition that's really taking all"
      },
      {
        "start": 834.079,
        "duration": 3.2,
        "text": "the line share of my operations and"
      },
      {
        "start": 836.24,
        "duration": 4.0,
        "text": "unbalancing"
      },
      {
        "start": 837.279,
        "duration": 4.401,
        "text": "my clusters alrighty so that wraps it up"
      },
      {
        "start": 840.24,
        "duration": 4.399,
        "text": "here for video three of seven"
      },
      {
        "start": 841.68,
        "duration": 4.08,
        "text": "partitions tables and examples join me"
      },
      {
        "start": 844.639,
        "duration": 9.76,
        "text": "for video for next"
      },
      {
        "start": 845.76,
        "duration": 8.639,
        "text": "as we do in exercise"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-15T20:39:09.624963+00:00"
}