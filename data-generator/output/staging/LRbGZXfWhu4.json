{
  "video_id": "LRbGZXfWhu4",
  "title": "DS210.19 Nodesync | Operations with Apache Cassandra",
  "description": "#DataStaxAcademy #DS210\nDS210.19 NODESYNC\nNodesync is a new concept with DataStax Enterprise 6. and behaves like a continous background repair. In this unit, you will learn more about Nodesync.\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-11T12:43:27Z",
  "thumbnail": "https://i.ytimg.com/vi/LRbGZXfWhu4/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "cassandra",
    "datastax",
    "tutorial",
    "apache_cassandra"
  ],
  "url": "https://www.youtube.com/watch?v=LRbGZXfWhu4",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] let's talk about node sync now node sync is a new concept with datastax enterprise 6. if you're using that version or above this is an option for you so let's dig into it a little bit node sync is a replacement for repair it does a background repair job more or less but it isn't operating exactly like repair it's continuously looking at data for consistency in a way that's really low grade and doesn't put an enormous load on the system it is a really big departure from the way repair works right now for instance merkle trees things like that do not exist inside a node sync and this is again a data stacks enterprise feature that ships from dsc6 and on so we had a lot of issues with repair in cassandra because traditional repair has this huge operational cost if you talk to anybody who runs a cassandra cluster you mention repair you get a lot of sweating eye rolling and changing the subject it's just not okay and it's always a problem so this is a departure from that for that reason the repair service which is built into off center helps mitigate that sum but really you're just putting something nice on top of something that's hard it's not fixing the fundamental problem so nodesync is capturing those benefits immediately of all the things that we know are right about consistent data that is making sure it runs continuously expecting the worst and doing it with low overhead so some of the benefits here from a departure from repair is that there's less edge cases to worry about repair has these big overhead issues you may have to manage when you're streaming data you got to be ready to stream a lot of data if it fails in the middle of it you've got to be able to recover from it so those are some of the problems it's trying to solve so really it is a set and forget it just does it in the background so how does this work so when you create a key space and a table you can add to the table information a nodesync enabled this is a new parameter that you can add to a table either during the create or alter table statement either way it's part of the parameters for the table once you have it set up it will automatically synchronize that table throughout the cluster so some of the tuning options which aren't that many but are really critical for an advanced tuning situation are the rate and the target the rate is just what it sounds like how much of a throttle do we have on all that potential bandwidth that could be used as it's running data back and forth again we're still having to move data that problem will never go away but we could do it in a more incremental spread out way which lowers the impact per running node the rate is how we control the bandwidth that it's using it's used to reduce that impact of the synchronization but keep in mind the more you turn it down the longer the window opens up and that's something to consider and that brings us to the target target is the time we want those two validations to occur between the same data in this case it should be less than gc grade seconds the default value is gc grade seconds or four hours so if there's any difference or conflict between the target and rate rate always wins the rate configuration is set up in the standard yaml file you'll see it in there as rates in kilobytes that is the configuration for nodesync you can also set at runtime with the node tool command target is a part of the table so whenever you change the table information you have that deadline target seconds and a value and this is the aspirational meaning this is what i hope you can do the rate is really what's going to make it win remember if there's a conflict between target and rate rate wins the no tool command also has a couple of additions now we have node sync service which performs those single service nodes it enables disables and it checks the status so if you want to see what's happening on your node this is where you would go there is an actual command called nodesync and that nodesync command inside your bin directory in your datasacks enterprise distribution it performs cluster-wide operations this is how you turn a table in the entire cluster off for node sync finally you can do any tracing you need to do to check the status of the cluster-wide nodesync so noticing is a cluster-wide tool whereas nodetool is a single node tool so when you invoke the nodesync tool you're getting a picture of the entire process this has been an overview of the new feature nodesync for datastax enterprise 6 and above i hope that you can find a good place to use this because we're really excited about how it works hopefully this is a way out of all the problems we have with repair",
    "segments": [
      {
        "start": 1.43,
        "duration": 5.33,
        "text": "[Music]"
      },
      {
        "start": 6.96,
        "duration": 3.92,
        "text": "let's talk about"
      },
      {
        "start": 7.759,
        "duration": 5.361,
        "text": "node sync now node sync is a new concept"
      },
      {
        "start": 10.88,
        "duration": 4.959,
        "text": "with datastax enterprise 6."
      },
      {
        "start": 13.12,
        "duration": 3.36,
        "text": "if you're using that version or above"
      },
      {
        "start": 15.839,
        "duration": 2.481,
        "text": "this is an"
      },
      {
        "start": 16.48,
        "duration": 3.36,
        "text": "option for you so let's dig into it a"
      },
      {
        "start": 18.32,
        "duration": 4.16,
        "text": "little bit node sync"
      },
      {
        "start": 19.84,
        "duration": 3.599,
        "text": "is a replacement for repair it does a"
      },
      {
        "start": 22.48,
        "duration": 3.92,
        "text": "background"
      },
      {
        "start": 23.439,
        "duration": 5.041,
        "text": "repair job more or less but it isn't"
      },
      {
        "start": 26.4,
        "duration": 4.08,
        "text": "operating exactly like repair"
      },
      {
        "start": 28.48,
        "duration": 3.28,
        "text": "it's continuously looking at data for"
      },
      {
        "start": 30.48,
        "duration": 3.52,
        "text": "consistency"
      },
      {
        "start": 31.76,
        "duration": 3.92,
        "text": "in a way that's really low grade and"
      },
      {
        "start": 34.0,
        "duration": 2.64,
        "text": "doesn't put an enormous load on the"
      },
      {
        "start": 35.68,
        "duration": 2.719,
        "text": "system"
      },
      {
        "start": 36.64,
        "duration": 3.599,
        "text": "it is a really big departure from the"
      },
      {
        "start": 38.399,
        "duration": 3.601,
        "text": "way repair works right now"
      },
      {
        "start": 40.239,
        "duration": 3.761,
        "text": "for instance merkle trees things like"
      },
      {
        "start": 42.0,
        "duration": 5.12,
        "text": "that do not exist inside"
      },
      {
        "start": 44.0,
        "duration": 5.36,
        "text": "a node sync and this is again"
      },
      {
        "start": 47.12,
        "duration": 4.56,
        "text": "a data stacks enterprise feature that"
      },
      {
        "start": 49.36,
        "duration": 6.08,
        "text": "ships from dsc6 and on"
      },
      {
        "start": 51.68,
        "duration": 6.0,
        "text": "so we had a lot of issues with repair"
      },
      {
        "start": 55.44,
        "duration": 4.4,
        "text": "in cassandra because traditional repair"
      },
      {
        "start": 57.68,
        "duration": 3.6,
        "text": "has this huge operational cost"
      },
      {
        "start": 59.84,
        "duration": 4.48,
        "text": "if you talk to anybody who runs a"
      },
      {
        "start": 61.28,
        "duration": 5.199,
        "text": "cassandra cluster you mention repair"
      },
      {
        "start": 64.32,
        "duration": 4.56,
        "text": "you get a lot of sweating eye rolling"
      },
      {
        "start": 66.479,
        "duration": 5.601,
        "text": "and changing the subject it's just not"
      },
      {
        "start": 68.88,
        "duration": 6.0,
        "text": "okay and it's always a problem so this"
      },
      {
        "start": 72.08,
        "duration": 4.88,
        "text": "is a departure from that for that reason"
      },
      {
        "start": 74.88,
        "duration": 3.04,
        "text": "the repair service which is built into"
      },
      {
        "start": 76.96,
        "duration": 3.28,
        "text": "off center"
      },
      {
        "start": 77.92,
        "duration": 4.08,
        "text": "helps mitigate that sum but really"
      },
      {
        "start": 80.24,
        "duration": 3.519,
        "text": "you're just putting something nice on"
      },
      {
        "start": 82.0,
        "duration": 4.32,
        "text": "top of something that's hard"
      },
      {
        "start": 83.759,
        "duration": 5.121,
        "text": "it's not fixing the fundamental problem"
      },
      {
        "start": 86.32,
        "duration": 4.72,
        "text": "so nodesync is capturing those benefits"
      },
      {
        "start": 88.88,
        "duration": 4.559,
        "text": "immediately of all the things that we"
      },
      {
        "start": 91.04,
        "duration": 5.2,
        "text": "know are right about consistent data"
      },
      {
        "start": 93.439,
        "duration": 4.161,
        "text": "that is making sure it runs continuously"
      },
      {
        "start": 96.24,
        "duration": 3.76,
        "text": "expecting the worst"
      },
      {
        "start": 97.6,
        "duration": 3.68,
        "text": "and doing it with low overhead so some"
      },
      {
        "start": 100.0,
        "duration": 3.28,
        "text": "of the benefits here"
      },
      {
        "start": 101.28,
        "duration": 4.159,
        "text": "from a departure from repair is that"
      },
      {
        "start": 103.28,
        "duration": 4.4,
        "text": "there's less edge cases to worry about"
      },
      {
        "start": 105.439,
        "duration": 3.281,
        "text": "repair has these big overhead issues you"
      },
      {
        "start": 107.68,
        "duration": 2.719,
        "text": "may have to manage"
      },
      {
        "start": 108.72,
        "duration": 3.12,
        "text": "when you're streaming data you got to be"
      },
      {
        "start": 110.399,
        "duration": 2.881,
        "text": "ready to stream a lot of data"
      },
      {
        "start": 111.84,
        "duration": 3.04,
        "text": "if it fails in the middle of it you've"
      },
      {
        "start": 113.28,
        "duration": 3.119,
        "text": "got to be able to recover from it"
      },
      {
        "start": 114.88,
        "duration": 3.68,
        "text": "so those are some of the problems it's"
      },
      {
        "start": 116.399,
        "duration": 2.961,
        "text": "trying to solve so really it is a set"
      },
      {
        "start": 118.56,
        "duration": 2.8,
        "text": "and forget"
      },
      {
        "start": 119.36,
        "duration": 3.439,
        "text": "it just does it in the background so how"
      },
      {
        "start": 121.36,
        "duration": 3.359,
        "text": "does this work"
      },
      {
        "start": 122.799,
        "duration": 3.36,
        "text": "so when you create a key space and a"
      },
      {
        "start": 124.719,
        "duration": 4.721,
        "text": "table you can"
      },
      {
        "start": 126.159,
        "duration": 4.001,
        "text": "add to the table information a nodesync"
      },
      {
        "start": 129.44,
        "duration": 2.32,
        "text": "enabled"
      },
      {
        "start": 130.16,
        "duration": 3.439,
        "text": "this is a new parameter that you can add"
      },
      {
        "start": 131.76,
        "duration": 5.119,
        "text": "to a table either during the create or"
      },
      {
        "start": 133.599,
        "duration": 4.72,
        "text": "alter table statement either way"
      },
      {
        "start": 136.879,
        "duration": 3.841,
        "text": "it's part of the parameters for the"
      },
      {
        "start": 138.319,
        "duration": 4.241,
        "text": "table once you have it set up"
      },
      {
        "start": 140.72,
        "duration": 3.36,
        "text": "it will automatically synchronize that"
      },
      {
        "start": 142.56,
        "duration": 3.2,
        "text": "table throughout the cluster"
      },
      {
        "start": 144.08,
        "duration": 4.08,
        "text": "so some of the tuning options which"
      },
      {
        "start": 145.76,
        "duration": 5.44,
        "text": "aren't that many but are really critical"
      },
      {
        "start": 148.16,
        "duration": 5.84,
        "text": "for an advanced tuning situation are"
      },
      {
        "start": 151.2,
        "duration": 3.84,
        "text": "the rate and the target the rate is just"
      },
      {
        "start": 154.0,
        "duration": 3.04,
        "text": "what it sounds like"
      },
      {
        "start": 155.04,
        "duration": 3.52,
        "text": "how much of a throttle do we have on all"
      },
      {
        "start": 157.04,
        "duration": 2.0,
        "text": "that potential bandwidth that could be"
      },
      {
        "start": 158.56,
        "duration": 2.8,
        "text": "used"
      },
      {
        "start": 159.04,
        "duration": 4.16,
        "text": "as it's running data back and forth"
      },
      {
        "start": 161.36,
        "duration": 4.56,
        "text": "again we're still having to move data"
      },
      {
        "start": 163.2,
        "duration": 4.319,
        "text": "that problem will never go away but we"
      },
      {
        "start": 165.92,
        "duration": 2.399,
        "text": "could do it in a more incremental spread"
      },
      {
        "start": 167.519,
        "duration": 3.44,
        "text": "out way"
      },
      {
        "start": 168.319,
        "duration": 3.28,
        "text": "which lowers the impact per running node"
      },
      {
        "start": 170.959,
        "duration": 2.801,
        "text": "the rate"
      },
      {
        "start": 171.599,
        "duration": 3.201,
        "text": "is how we control the bandwidth that"
      },
      {
        "start": 173.76,
        "duration": 2.8,
        "text": "it's using"
      },
      {
        "start": 174.8,
        "duration": 3.76,
        "text": "it's used to reduce that impact of the"
      },
      {
        "start": 176.56,
        "duration": 4.24,
        "text": "synchronization but keep in mind"
      },
      {
        "start": 178.56,
        "duration": 3.28,
        "text": "the more you turn it down the longer the"
      },
      {
        "start": 180.8,
        "duration": 2.799,
        "text": "window opens up"
      },
      {
        "start": 181.84,
        "duration": 3.28,
        "text": "and that's something to consider and"
      },
      {
        "start": 183.599,
        "duration": 3.201,
        "text": "that brings us to the target"
      },
      {
        "start": 185.12,
        "duration": 3.36,
        "text": "target is the time we want those two"
      },
      {
        "start": 186.8,
        "duration": 2.64,
        "text": "validations to occur between the same"
      },
      {
        "start": 188.48,
        "duration": 2.96,
        "text": "data"
      },
      {
        "start": 189.44,
        "duration": 3.04,
        "text": "in this case it should be less than gc"
      },
      {
        "start": 191.44,
        "duration": 3.68,
        "text": "grade seconds"
      },
      {
        "start": 192.48,
        "duration": 3.52,
        "text": "the default value is gc grade seconds or"
      },
      {
        "start": 195.12,
        "duration": 3.6,
        "text": "four hours"
      },
      {
        "start": 196.0,
        "duration": 4.72,
        "text": "so if there's any difference or conflict"
      },
      {
        "start": 198.72,
        "duration": 4.72,
        "text": "between the target and rate"
      },
      {
        "start": 200.72,
        "duration": 4.64,
        "text": "rate always wins the rate configuration"
      },
      {
        "start": 203.44,
        "duration": 3.28,
        "text": "is set up in the standard yaml file"
      },
      {
        "start": 205.36,
        "duration": 3.84,
        "text": "you'll see it in there as rates in"
      },
      {
        "start": 206.72,
        "duration": 3.2,
        "text": "kilobytes that is the configuration for"
      },
      {
        "start": 209.2,
        "duration": 2.64,
        "text": "nodesync"
      },
      {
        "start": 209.92,
        "duration": 3.039,
        "text": "you can also set at runtime with the"
      },
      {
        "start": 211.84,
        "duration": 4.16,
        "text": "node tool command"
      },
      {
        "start": 212.959,
        "duration": 4.401,
        "text": "target is a part of the table so"
      },
      {
        "start": 216.0,
        "duration": 2.08,
        "text": "whenever you change the table"
      },
      {
        "start": 217.36,
        "duration": 3.28,
        "text": "information"
      },
      {
        "start": 218.08,
        "duration": 3.439,
        "text": "you have that deadline target seconds"
      },
      {
        "start": 220.64,
        "duration": 2.879,
        "text": "and a value"
      },
      {
        "start": 221.519,
        "duration": 3.921,
        "text": "and this is the aspirational meaning"
      },
      {
        "start": 223.519,
        "duration": 3.521,
        "text": "this is what i hope you can do"
      },
      {
        "start": 225.44,
        "duration": 3.2,
        "text": "the rate is really what's going to make"
      },
      {
        "start": 227.04,
        "duration": 3.279,
        "text": "it win remember"
      },
      {
        "start": 228.64,
        "duration": 3.2,
        "text": "if there's a conflict between target and"
      },
      {
        "start": 230.319,
        "duration": 4.0,
        "text": "rate rate wins"
      },
      {
        "start": 231.84,
        "duration": 3.44,
        "text": "the no tool command also has a couple of"
      },
      {
        "start": 234.319,
        "duration": 3.2,
        "text": "additions"
      },
      {
        "start": 235.28,
        "duration": 4.08,
        "text": "now we have node sync service which"
      },
      {
        "start": 237.519,
        "duration": 4.0,
        "text": "performs those single service nodes"
      },
      {
        "start": 239.36,
        "duration": 3.599,
        "text": "it enables disables and it checks the"
      },
      {
        "start": 241.519,
        "duration": 2.401,
        "text": "status so if you want to see what's"
      },
      {
        "start": 242.959,
        "duration": 2.881,
        "text": "happening on your node"
      },
      {
        "start": 243.92,
        "duration": 3.679,
        "text": "this is where you would go there is an"
      },
      {
        "start": 245.84,
        "duration": 3.44,
        "text": "actual command called nodesync"
      },
      {
        "start": 247.599,
        "duration": 3.121,
        "text": "and that nodesync command inside your"
      },
      {
        "start": 249.28,
        "duration": 2.879,
        "text": "bin directory in your datasacks"
      },
      {
        "start": 250.72,
        "duration": 4.32,
        "text": "enterprise distribution"
      },
      {
        "start": 252.159,
        "duration": 3.92,
        "text": "it performs cluster-wide operations this"
      },
      {
        "start": 255.04,
        "duration": 3.439,
        "text": "is how you turn"
      },
      {
        "start": 256.079,
        "duration": 3.361,
        "text": "a table in the entire cluster off for"
      },
      {
        "start": 258.479,
        "duration": 2.641,
        "text": "node sync"
      },
      {
        "start": 259.44,
        "duration": 3.84,
        "text": "finally you can do any tracing you need"
      },
      {
        "start": 261.12,
        "duration": 4.079,
        "text": "to do to check the status of the"
      },
      {
        "start": 263.28,
        "duration": 4.16,
        "text": "cluster-wide nodesync"
      },
      {
        "start": 265.199,
        "duration": 3.761,
        "text": "so noticing is a cluster-wide tool"
      },
      {
        "start": 267.44,
        "duration": 3.759,
        "text": "whereas nodetool is a"
      },
      {
        "start": 268.96,
        "duration": 3.76,
        "text": "single node tool so when you invoke the"
      },
      {
        "start": 271.199,
        "duration": 3.361,
        "text": "nodesync tool you're getting a picture"
      },
      {
        "start": 272.72,
        "duration": 3.6,
        "text": "of the entire process"
      },
      {
        "start": 274.56,
        "duration": 4.16,
        "text": "this has been an overview of the new"
      },
      {
        "start": 276.32,
        "duration": 3.68,
        "text": "feature nodesync for datastax enterprise"
      },
      {
        "start": 278.72,
        "duration": 3.199,
        "text": "6 and above"
      },
      {
        "start": 280.0,
        "duration": 3.44,
        "text": "i hope that you can find a good place to"
      },
      {
        "start": 281.919,
        "duration": 2.881,
        "text": "use this because we're really excited"
      },
      {
        "start": 283.44,
        "duration": 3.12,
        "text": "about how it works"
      },
      {
        "start": 284.8,
        "duration": 8.399,
        "text": "hopefully this is a way out of all the"
      },
      {
        "start": 286.56,
        "duration": 6.639,
        "text": "problems we have with repair"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T01:28:25.857520+00:00"
}