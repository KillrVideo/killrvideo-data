{
  "video_id": "0xKvhAFtrag",
  "title": "DataStax Enterprise Security Quick Tips",
  "description": "Database hacks are making headlines and costing money. A firewall is the simplest, most effective means to secure a database. Sounds complicated, but it’s so easy a government agent could do it.\n\nRelated blog post: http://www.datastax.com/2016/07/automated-cluster-deployment-with-dse-opscenter\n\nLearn more at http://docs.datastax.com/en/datastax_enterprise/5.0/datastax_enterprise/sec/secTOC.html | DataStax Enterprise Advanced Security builds upon the basic security features provided by the open source Apache Cassandra™ project by providing the tools necessary to meet stringent HIPAA, PCI and SOX compliance requirements. This functionality includes support for industry standard authentication mechanisms, role-based authentication, user activity auditing, and end-to-end encryption.\n\nABOUT DATASTAX ENTERPRISE 5\nDataStax Enterprise 5.0, the database platform for cloud applications, includes Apache Cassandra 3.x with materialized views, tiered storage and advanced replication. Introduced in 5.0 is DataStax Enterprise Graph, the first graph database fast enough to power customer-facing applications, scale to massive datasets and integrate advanced tools to power deep analytical queries.\n\nLearn more at http://www.datastax.com/products/datastax-enterprise and https://academy.datastax.com/resources/whats-new-datastax-enterprise-50\n\nCONNECT WITH DATASTAX\nSubscribe: http://www.youtube.com/c/datastax?sub_confirmation=1 \nSite: http://datastax.com \nFacebook: https://facebook.com/datastax \nTwitter: https://twitter.com/datastax \nLinkedin: https://www.linkedin.com/company/datastax\nhttp://feeds.feedburner.com/datastax \nhttps://github.com/datastax \n\nABOUT DATASTAX ACADEMY\nOn the DataStax Academy YouTube channel, you can find tutorials, webinars and much more to help you learn and stay updated with the latest information on DataStax Enterprise©.  Create an account on https://academy.datastax.com to watch our free online courses, tutorials, and more.",
  "published_at": "2017-05-18T18:14:17Z",
  "thumbnail": "https://i.ytimg.com/vi/0xKvhAFtrag/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "cassandra",
    "tutorial",
    "database",
    "apache_cassandra",
    "dse",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=0xKvhAFtrag",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Applause] greetings data stacks users this video is for your eyes only I'm a commander with mi6 here today to share with you intelligence on recently to base intrusions the spectre of hackers looms over all Internet users but for operators responsible for database security they can be particularly frightening they scare the living daylights out of me this recording will illustrate how easy it is for hackers to infiltrate databases with exposed attack surfaces and then show you how to configure basic Linux firewalls to secure your servers first playing the part of the hacker will tell that to an unprotected DSE host on the cql binary protocol port the telnet command to port 9 0 4 2 is successfully opened and I can send a command to the server to see how it responds even a note very clever hacker can deduce from the specific port that responded and the contents of the error message but this is either a Cassandra or DSE new and move on from telnet to a more sophisticated attack so let's take a look at what a more sophisticated hack might look like using a few Google searches on the port number and the text of the protocol message will quickly lead our hacker to download Cassandra or data stacks enterprise then the hacker can connect directly to the node using a real client tool like CQ SH for example now the hacker has free rein to explore this completely unsecure database it's worth mentioning that encryption authentication and authorization are additional security measures to consider but the focus of this video is on the attack surface itself the network ports it doesn't take long for hacker to learn enough to do some damage first reviewing the available key spaces and honing in on the non system key spaces in this case the killer app keys is as a likely location for high-value data this is quite defined as the hacker has identified a database hosting data for a secret American government initiative codename Northwinds then the hacker examines the tables in that key space and decides to take a closer look at the customers table it is easy to see the data in the customer table contains sensitive personal data credit cards addresses American Social Security numbers our hacker has established his view to a kill copy the sensitive data out and use that to extract hard currency from the victims blackmail and extortion with Bitcoin unfortunately a frequent occurrence with database breaches like this finally our hacker has only to drop the key space to complete his crime the simplest way to avoid falling prey to attacks like this one is to keep unsecured database ports off of the Internet here we'll show you how to do that using but when its firewall called IP tables this is just one possible firewall that can be used but hopefully a practical example configuration will be demonstrative first let's look at the nodes in our cluster which are laid out in the NC goes to file the node that we're on now is the app server this is the node the database will expect app connect to it as a client the other nodes listed here node 0 node 1 and node 2 will have two IPS assign data stacks enterprise is configured to use the 172 address space and so those are the ones that will secure with the firewall to begin the process of firewall and off our database we'll SSH to the first database node go to 0 then we issue a series of iptables commands to designate what traffic is allowed to pass through to our database ports and what traffic is not let's take a closer look at the IP tables commands that we're entering we start with as you do because we need super user permissions for mustn't ask then the IP tables command itself - a indicates they were appending to the input rules - P states that this rule is for TCP protocol traffic - - deep Corp specifies the destination port 9:04 - - yes indicates that the source IP that is allowed for the school - the application server's IP and finally the - j tells the rule what to do if these conditions are met in this case except the traffic and next we configure similar rules for the other database nodes and this cluster in addition to the port line 0 4 - traffic will need to tell the database cluster nodes that they are allowed to communicate with each other on port 7000 commonly referred to as the storage board [Music] finally we tell the firewall to drop other attempts to connect to these ports [Music] next we'll connect the other nodes in the cluster and configure the firewall rules on those nodes as well now is a good time to mention that the rules we've specified so far will be lost or reboot so it's important to put these rules into an Etsy RC dot local file or similar startup configurations [Music] now that we've configured our firewall Adam will have a very different experience probing our defenses let's take another look at that attempt to tell that the cql protocol port as you can see that is no response the request just sits there similarly an attempt to connect to that port cql sh x out quickly we've managed to make the job much more difficult for Oaxaca who at this point is likely to move on to usual targets all the money in the world is not enough to buy back the trust of your customers some have seen reasonable success with free credit monitoring and generous giving cards we hope that this video will help you avoid the dangers involved in operating internet-facing databases and data stacks Enterprise in particular remember these are only first steps in security visit doc stop data stats calm the reader on DSE advanced security and encryption authentication and authorization combos active directory and LDAP and role based access control also consider using off-centre 6.0 as lifecycle manager that's an easy way to deploy data stacks enterprise clusters that are secure by default thank you for your time about if you'll excuse me I'm gonna vodka martini shaken I feel compelled to investigate",
    "segments": [
      {
        "start": 12.74,
        "duration": 3.08,
        "text": "[Applause]"
      },
      {
        "start": 16.55,
        "duration": 6.49,
        "text": "greetings data stacks users this video"
      },
      {
        "start": 19.92,
        "duration": 6.03,
        "text": "is for your eyes only I'm a commander"
      },
      {
        "start": 23.04,
        "duration": 4.95,
        "text": "with mi6 here today to share with you"
      },
      {
        "start": 25.95,
        "duration": 5.069,
        "text": "intelligence on recently to base"
      },
      {
        "start": 27.99,
        "duration": 4.86,
        "text": "intrusions the spectre of hackers looms"
      },
      {
        "start": 31.019,
        "duration": 3.781,
        "text": "over all Internet users but for"
      },
      {
        "start": 32.85,
        "duration": 4.38,
        "text": "operators responsible for database"
      },
      {
        "start": 34.8,
        "duration": 4.259,
        "text": "security they can be particularly"
      },
      {
        "start": 37.23,
        "duration": 2.88,
        "text": "frightening they scare the living"
      },
      {
        "start": 39.059,
        "duration": 3.691,
        "text": "daylights out of me"
      },
      {
        "start": 40.11,
        "duration": 4.14,
        "text": "this recording will illustrate how easy"
      },
      {
        "start": 42.75,
        "duration": 4.379,
        "text": "it is for hackers to infiltrate"
      },
      {
        "start": 44.25,
        "duration": 5.43,
        "text": "databases with exposed attack surfaces"
      },
      {
        "start": 47.129,
        "duration": 6.261,
        "text": "and then show you how to configure basic"
      },
      {
        "start": 49.68,
        "duration": 6.48,
        "text": "Linux firewalls to secure your servers"
      },
      {
        "start": 53.39,
        "duration": 5.47,
        "text": "first playing the part of the hacker"
      },
      {
        "start": 56.16,
        "duration": 6.66,
        "text": "will tell that to an unprotected DSE"
      },
      {
        "start": 58.86,
        "duration": 6.66,
        "text": "host on the cql binary protocol port the"
      },
      {
        "start": 62.82,
        "duration": 4.92,
        "text": "telnet command to port 9 0 4 2 is"
      },
      {
        "start": 65.52,
        "duration": 4.23,
        "text": "successfully opened and I can send a"
      },
      {
        "start": 67.74,
        "duration": 4.89,
        "text": "command to the server to see how it"
      },
      {
        "start": 69.75,
        "duration": 5.099,
        "text": "responds even a note very clever hacker"
      },
      {
        "start": 72.63,
        "duration": 4.469,
        "text": "can deduce from the specific port that"
      },
      {
        "start": 74.849,
        "duration": 5.071,
        "text": "responded and the contents of the error"
      },
      {
        "start": 77.099,
        "duration": 6.481,
        "text": "message but this is either a Cassandra"
      },
      {
        "start": 79.92,
        "duration": 9.24,
        "text": "or DSE new and move on from telnet to a"
      },
      {
        "start": 83.58,
        "duration": 7.89,
        "text": "more sophisticated attack so let's take"
      },
      {
        "start": 89.16,
        "duration": 4.769,
        "text": "a look at what a more sophisticated hack"
      },
      {
        "start": 91.47,
        "duration": 4.86,
        "text": "might look like using a few Google"
      },
      {
        "start": 93.929,
        "duration": 3.931,
        "text": "searches on the port number and the text"
      },
      {
        "start": 96.33,
        "duration": 3.899,
        "text": "of the protocol message will quickly"
      },
      {
        "start": 97.86,
        "duration": 5.67,
        "text": "lead our hacker to download Cassandra or"
      },
      {
        "start": 100.229,
        "duration": 6.06,
        "text": "data stacks enterprise then the hacker"
      },
      {
        "start": 103.53,
        "duration": 7.339,
        "text": "can connect directly to the node using a"
      },
      {
        "start": 106.289,
        "duration": 7.411,
        "text": "real client tool like CQ SH for example"
      },
      {
        "start": 110.869,
        "duration": 5.831,
        "text": "now the hacker has free rein to explore"
      },
      {
        "start": 113.7,
        "duration": 4.43,
        "text": "this completely unsecure database it's"
      },
      {
        "start": 116.7,
        "duration": 3.6,
        "text": "worth mentioning that encryption"
      },
      {
        "start": 118.13,
        "duration": 4.21,
        "text": "authentication and authorization are"
      },
      {
        "start": 120.3,
        "duration": 4.83,
        "text": "additional security measures to consider"
      },
      {
        "start": 122.34,
        "duration": 5.899,
        "text": "but the focus of this video is on the"
      },
      {
        "start": 125.13,
        "duration": 5.82,
        "text": "attack surface itself the network ports"
      },
      {
        "start": 128.239,
        "duration": 4.33,
        "text": "it doesn't take long for hacker to learn"
      },
      {
        "start": 130.95,
        "duration": 4.619,
        "text": "enough to do some damage"
      },
      {
        "start": 132.569,
        "duration": 6.781,
        "text": "first reviewing the available key spaces"
      },
      {
        "start": 135.569,
        "duration": 7.471,
        "text": "and honing in on the non system key"
      },
      {
        "start": 139.35,
        "duration": 7.139,
        "text": "spaces in this case the killer app keys"
      },
      {
        "start": 143.04,
        "duration": 7.47,
        "text": "is as a likely location for high-value"
      },
      {
        "start": 146.489,
        "duration": 6.601,
        "text": "data this is quite defined as the hacker"
      },
      {
        "start": 150.51,
        "duration": 4.5,
        "text": "has identified a database hosting data"
      },
      {
        "start": 153.09,
        "duration": 5.459,
        "text": "for a secret American government"
      },
      {
        "start": 155.01,
        "duration": 5.88,
        "text": "initiative codename Northwinds then the"
      },
      {
        "start": 158.549,
        "duration": 4.981,
        "text": "hacker examines the tables in that key"
      },
      {
        "start": 160.89,
        "duration": 5.67,
        "text": "space and decides to take a closer look"
      },
      {
        "start": 163.53,
        "duration": 5.789,
        "text": "at the customers table it is easy to see"
      },
      {
        "start": 166.56,
        "duration": 5.67,
        "text": "the data in the customer table contains"
      },
      {
        "start": 169.319,
        "duration": 5.521,
        "text": "sensitive personal data credit cards"
      },
      {
        "start": 172.23,
        "duration": 5.7,
        "text": "addresses American Social Security"
      },
      {
        "start": 174.84,
        "duration": 4.289,
        "text": "numbers our hacker has established his"
      },
      {
        "start": 177.93,
        "duration": 4.83,
        "text": "view to a kill"
      },
      {
        "start": 179.129,
        "duration": 5.97,
        "text": "copy the sensitive data out and use that"
      },
      {
        "start": 182.76,
        "duration": 5.49,
        "text": "to extract hard currency from the"
      },
      {
        "start": 185.099,
        "duration": 5.431,
        "text": "victims blackmail and extortion with"
      },
      {
        "start": 188.25,
        "duration": 4.23,
        "text": "Bitcoin unfortunately a frequent"
      },
      {
        "start": 190.53,
        "duration": 8.129,
        "text": "occurrence with database breaches like"
      },
      {
        "start": 192.48,
        "duration": 15.509,
        "text": "this finally our hacker has only to drop"
      },
      {
        "start": 198.659,
        "duration": 11.461,
        "text": "the key space to complete his crime the"
      },
      {
        "start": 207.989,
        "duration": 4.411,
        "text": "simplest way to avoid falling prey to"
      },
      {
        "start": 210.12,
        "duration": 4.769,
        "text": "attacks like this one is to keep"
      },
      {
        "start": 212.4,
        "duration": 5.579,
        "text": "unsecured database ports off of the"
      },
      {
        "start": 214.889,
        "duration": 5.13,
        "text": "Internet here we'll show you how to do"
      },
      {
        "start": 217.979,
        "duration": 5.25,
        "text": "that using but when its firewall called"
      },
      {
        "start": 220.019,
        "duration": 5.25,
        "text": "IP tables this is just one possible"
      },
      {
        "start": 223.229,
        "duration": 4.171,
        "text": "firewall that can be used but hopefully"
      },
      {
        "start": 225.269,
        "duration": 5.491,
        "text": "a practical example configuration will"
      },
      {
        "start": 227.4,
        "duration": 5.369,
        "text": "be demonstrative first let's look at the"
      },
      {
        "start": 230.76,
        "duration": 6.599,
        "text": "nodes in our cluster which are laid out"
      },
      {
        "start": 232.769,
        "duration": 7.231,
        "text": "in the NC goes to file the node that"
      },
      {
        "start": 237.359,
        "duration": 4.8,
        "text": "we're on now is the app server this is"
      },
      {
        "start": 240.0,
        "duration": 4.409,
        "text": "the node the database will expect app"
      },
      {
        "start": 242.159,
        "duration": 5.371,
        "text": "connect to it as a client the other"
      },
      {
        "start": 244.409,
        "duration": 7.53,
        "text": "nodes listed here node 0 node 1 and node"
      },
      {
        "start": 247.53,
        "duration": 7.5,
        "text": "2 will have two IPS assign data stacks"
      },
      {
        "start": 251.939,
        "duration": 5.73,
        "text": "enterprise is configured to use the 172"
      },
      {
        "start": 255.03,
        "duration": 6.929,
        "text": "address space and so those are the ones"
      },
      {
        "start": 257.669,
        "duration": 6.06,
        "text": "that will secure with the firewall to"
      },
      {
        "start": 261.959,
        "duration": 4.08,
        "text": "begin the process of firewall and off"
      },
      {
        "start": 263.729,
        "duration": 5.681,
        "text": "our database we'll SSH to the first"
      },
      {
        "start": 266.039,
        "duration": 6.411,
        "text": "database node go to 0"
      },
      {
        "start": 269.41,
        "duration": 5.14,
        "text": "then we issue a series of iptables"
      },
      {
        "start": 272.45,
        "duration": 3.84,
        "text": "commands to designate what traffic is"
      },
      {
        "start": 274.55,
        "duration": 4.35,
        "text": "allowed to pass through to our database"
      },
      {
        "start": 276.29,
        "duration": 4.68,
        "text": "ports and what traffic is not let's take"
      },
      {
        "start": 278.9,
        "duration": 4.32,
        "text": "a closer look at the IP tables commands"
      },
      {
        "start": 280.97,
        "duration": 3.78,
        "text": "that we're entering we start with as you"
      },
      {
        "start": 283.22,
        "duration": 4.41,
        "text": "do because we need super user"
      },
      {
        "start": 284.75,
        "duration": 6.72,
        "text": "permissions for mustn't ask then the IP"
      },
      {
        "start": 287.63,
        "duration": 6.63,
        "text": "tables command itself - a indicates they"
      },
      {
        "start": 291.47,
        "duration": 4.89,
        "text": "were appending to the input rules - P"
      },
      {
        "start": 294.26,
        "duration": 5.91,
        "text": "states that this rule is for TCP"
      },
      {
        "start": 296.36,
        "duration": 7.71,
        "text": "protocol traffic - - deep Corp specifies"
      },
      {
        "start": 300.17,
        "duration": 6.45,
        "text": "the destination port 9:04 - - yes"
      },
      {
        "start": 304.07,
        "duration": 4.77,
        "text": "indicates that the source IP that is"
      },
      {
        "start": 306.62,
        "duration": 5.4,
        "text": "allowed for the school - the application"
      },
      {
        "start": 308.84,
        "duration": 4.68,
        "text": "server's IP and finally the - j tells"
      },
      {
        "start": 312.02,
        "duration": 4.71,
        "text": "the rule what to do if these conditions"
      },
      {
        "start": 313.52,
        "duration": 6.81,
        "text": "are met in this case except the traffic"
      },
      {
        "start": 316.73,
        "duration": 5.49,
        "text": "and next we configure similar rules for"
      },
      {
        "start": 320.33,
        "duration": 10.95,
        "text": "the other database nodes and this"
      },
      {
        "start": 322.22,
        "duration": 11.04,
        "text": "cluster in addition to the port line 0 4"
      },
      {
        "start": 331.28,
        "duration": 3.84,
        "text": "- traffic will need to tell the database"
      },
      {
        "start": 333.26,
        "duration": 4.85,
        "text": "cluster nodes that they are allowed to"
      },
      {
        "start": 335.12,
        "duration": 5.46,
        "text": "communicate with each other on port 7000"
      },
      {
        "start": 338.11,
        "duration": 4.95,
        "text": "commonly referred to as the storage"
      },
      {
        "start": 340.58,
        "duration": 2.48,
        "text": "board"
      },
      {
        "start": 351.86,
        "duration": 5.04,
        "text": "[Music]"
      },
      {
        "start": 353.95,
        "duration": 6.65,
        "text": "finally we tell the firewall to drop"
      },
      {
        "start": 356.9,
        "duration": 6.889,
        "text": "other attempts to connect to these ports"
      },
      {
        "start": 360.6,
        "duration": 3.189,
        "text": "[Music]"
      },
      {
        "start": 365.68,
        "duration": 4.54,
        "text": "next we'll connect the other nodes in"
      },
      {
        "start": 368.33,
        "duration": 5.19,
        "text": "the cluster and configure the firewall"
      },
      {
        "start": 370.22,
        "duration": 5.13,
        "text": "rules on those nodes as well now is a"
      },
      {
        "start": 373.52,
        "duration": 4.11,
        "text": "good time to mention that the rules"
      },
      {
        "start": 375.35,
        "duration": 4.68,
        "text": "we've specified so far will be lost or"
      },
      {
        "start": 377.63,
        "duration": 5.64,
        "text": "reboot so it's important to put these"
      },
      {
        "start": 380.03,
        "duration": 6.95,
        "text": "rules into an Etsy RC dot local file or"
      },
      {
        "start": 383.27,
        "duration": 3.71,
        "text": "similar startup configurations"
      },
      {
        "start": 404.61,
        "duration": 7.209,
        "text": "[Music]"
      },
      {
        "start": 414.62,
        "duration": 5.14,
        "text": "now that we've configured our firewall"
      },
      {
        "start": 417.45,
        "duration": 5.34,
        "text": "Adam will have a very different"
      },
      {
        "start": 419.76,
        "duration": 4.77,
        "text": "experience probing our defenses let's"
      },
      {
        "start": 422.79,
        "duration": 7.95,
        "text": "take another look at that attempt to"
      },
      {
        "start": 424.53,
        "duration": 9.3,
        "text": "tell that the cql protocol port as you"
      },
      {
        "start": 430.74,
        "duration": 5.84,
        "text": "can see that is no response the request"
      },
      {
        "start": 433.83,
        "duration": 5.82,
        "text": "just sits there"
      },
      {
        "start": 436.58,
        "duration": 7.42,
        "text": "similarly an attempt to connect to that"
      },
      {
        "start": 439.65,
        "duration": 6.54,
        "text": "port cql sh x out quickly we've managed"
      },
      {
        "start": 444.0,
        "duration": 5.46,
        "text": "to make the job much more difficult for"
      },
      {
        "start": 446.19,
        "duration": 8.58,
        "text": "Oaxaca who at this point is likely to"
      },
      {
        "start": 449.46,
        "duration": 7.53,
        "text": "move on to usual targets all the money"
      },
      {
        "start": 454.77,
        "duration": 4.89,
        "text": "in the world is not enough to buy back"
      },
      {
        "start": 456.99,
        "duration": 4.98,
        "text": "the trust of your customers some have"
      },
      {
        "start": 459.66,
        "duration": 5.22,
        "text": "seen reasonable success with free credit"
      },
      {
        "start": 461.97,
        "duration": 5.19,
        "text": "monitoring and generous giving cards we"
      },
      {
        "start": 464.88,
        "duration": 4.17,
        "text": "hope that this video will help you avoid"
      },
      {
        "start": 467.16,
        "duration": 4.59,
        "text": "the dangers involved in operating"
      },
      {
        "start": 469.05,
        "duration": 5.16,
        "text": "internet-facing databases and data"
      },
      {
        "start": 471.75,
        "duration": 5.31,
        "text": "stacks Enterprise in particular remember"
      },
      {
        "start": 474.21,
        "duration": 6.12,
        "text": "these are only first steps in security"
      },
      {
        "start": 477.06,
        "duration": 6.51,
        "text": "visit doc stop data stats calm the"
      },
      {
        "start": 480.33,
        "duration": 5.01,
        "text": "reader on DSE advanced security and"
      },
      {
        "start": 483.57,
        "duration": 4.65,
        "text": "encryption authentication and"
      },
      {
        "start": 485.34,
        "duration": 5.24,
        "text": "authorization combos active directory"
      },
      {
        "start": 488.22,
        "duration": 6.449,
        "text": "and LDAP and role based access control"
      },
      {
        "start": 490.58,
        "duration": 6.61,
        "text": "also consider using off-centre 6.0 as"
      },
      {
        "start": 494.669,
        "duration": 4.681,
        "text": "lifecycle manager that's an easy way to"
      },
      {
        "start": 497.19,
        "duration": 5.52,
        "text": "deploy data stacks enterprise clusters"
      },
      {
        "start": 499.35,
        "duration": 6.87,
        "text": "that are secure by default thank you for"
      },
      {
        "start": 502.71,
        "duration": 5.94,
        "text": "your time about if you'll excuse me I'm"
      },
      {
        "start": 506.22,
        "duration": 5.39,
        "text": "gonna vodka martini shaken I feel"
      },
      {
        "start": 508.65,
        "duration": 2.96,
        "text": "compelled to investigate"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T07:42:52.077995+00:00"
}