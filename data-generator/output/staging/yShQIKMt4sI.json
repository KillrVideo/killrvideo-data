{
  "video_id": "yShQIKMt4sI",
  "title": "DS220.02 Relational Vs. Apache Cassandra | Data Modeling with Apache Cassandra",
  "description": "#DataStaxAcademy #DS220\nDS220.02 Relational Vs. Apache Cassandra\nIf you've done relational data modeling before, you will come to find that modeling for Apache Cassandra has some distinct differences. In this unit, you will learn how relational data modeling concepts compare to those used when data modeling for Apache Cassandra.\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-14T09:13:34Z",
  "thumbnail": "https://i.ytimg.com/vi/yShQIKMt4sI/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "data_modeling",
    "cassandra",
    "tutorial",
    "apache_cassandra",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=yShQIKMt4sI",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] if you've ever done relational data modeling you're going to find that modeling for cassandra has some distinct differences and there may be a few relational modeling habits that you'll need to unlearn here's a quick summary of the differences in cassandra data modeling we think about the application needs before designing our data model for this reason the queries are the driving force in cassandra data modeling whereas the driving factor in relational modeling is the entities in traditional relational data modeling primary keys are used to ensure the uniqueness of entities this is also true in cassandra data models but primary keys take on additional significance in cassandra particularly in determining the performance of your reads and writes at large scale in order to provide these guarantees of high performance and availability at a large scale cassandra uses a distributed architecture that we describe in detail in other courses and it places some limitations on the kinds of functionality that we can perform since our data is spread across multiple nodes specifically cassandra does not provide support for acid transactions or joins it does not enforce referential integrity across tables because it can't guarantee high performance of these operations at large scale these are things we need to be aware of in designing our cassandra data models in the next few slides we'll learn some techniques we can use in our data modeling and application design to deal with this reality we'll talk about denormalization and leveraging cassandra's tunable consistency features this figure shows a sample relational data modeling methodology that produces conceptual logical and physical data models including steps along the way for normalization and optimizing the data model the main thing i want you to note here the queries aren't considered until very late in the process perhaps not even until applications that are being implemented that use this model let's contrast the relational approach with a cassandra data modeling methodology that is shown here notice we still have conceptual logical and physical data models but we're considering the application workflow in queries earlier in the process this time we're incorporating that analysis into the logical data modeling phase rather than waiting until we're optimizing a physical relational model here's a quick summary of the differences in the approaches in the relational approach you begin with the data create a data model and then you think about your application the cassandra approach is kind of like that in reverse you think about the needs of the application first and use that to derive the model we've already stated that cassandra doesn't support asset transactions like relational databases do let's review what that term acid means so we can ensure we understand the guarantees that those relational databases are making first atomicity that means that all of the statements or mutations in the transaction will succeed or fail as a unit relational databases provide a behavior known as rollback this ensures that if a transaction can't be completed all data is returned to its original state prior to the transaction consistency now this is a different usage of the word consistency than we use in cassandra when we talk about consistency levels consistency in acid transactions usually refers to referential integrity isolation refers to the constraint that transactions do not interfere with each other various relational databases support this to various degrees of strictness and they support optimizations that bend this rule in certain circumstances research terms like linearizability if you want to dive more into this finally durability that refers to the persistence of the changes in a transaction even in the event of failure again cassandra does not support the acid semantics at least not in the same way as most relational databases in a distributed database like cassandra the locking and coordination that's required to implement two-phase commit semantics proves to be a significant performance penalty at large scales however cassandra does exhibit atomicity isolation and durability for writes to individual rows cassandra also supports a concept called tunable consistency which allows the client to specify the required level of agreement between nodes for your reads and rights cassandra also provides mechanisms like batches and lightweight transactions that you can use to provide stronger guarantees of consistency in some cases let's discuss the concept of tunable consistency in more detail to do that we'll need to reference the cap theorem the cap theorem was proposed by eric brewer as a way to describe the challenges of distributed database systems and it's been a useful tool for us to describe the trade-offs in distributed systems the premise is that with the failures inherent in distributed systems it's not possible to have a system that perfectly supports consistency availability and partition tolerance 100 of the time therefore designers of systems must pick two out of three of those qualities to guarantee distributed systems typically sacrifice one of these qualities by default the choice that cassandra makes is to sacrifice consistency that is cassandra will accept temporary inconsistencies in data in order to make sure that the database is highly available and can support partitions which is why it's sometimes referred to as an ap database however i did say by default cassandra does provide the ability to require more consistency of the system by specifying the number of nodes that must agree on a read or a write in which case you could choose to sacrifice availability instead of consistency this flexibility is commonly referred to as tunable consistency now let's highlight one of the other differences between cassandra and relational databases cassandra does not support joins for review a join is a command in which query results from multiple tables are interleaved by the database to produce a combined result in the example shown videos and comments are stored in separate tables but by joining on the video id the comments for a particular video are returned alongside other attributes of the video to the application using a join query the results appear as a new virtual table as shown in the figure a join is a query that performs well when all the relevant data is available on a single node one of the main problems with implementing a join in a distributed database like cassandra is that the data that would be referenced from another table would most often exist on another node this has the potential to lead to unpredictable impact on latency as the scale of the database increases since joins are not supported in cassandra we promote a different approach to data modeling for cassandra let's assume for the sake of argument from an application user interface perspective we have two contexts in which we want to access comments first a video view where we display comments for a particular video and second a user view that allows a user to see all the comments they have made to support this design in cassandra will create two tables one that is targeted at each of our queries the comments by video table supports the ability to access comments for a specific video in this case we're using the video title plus a comment id as the primary key now don't worry we will dig more into this concept of complex primary keys and other units but the important thing to note at the moment is that this comment id helps us define a unique row in the database for each comment the second table comments by user supports that second view i mentioned notice that this table supports the same data as the first table but with a different primary key this time the comments are organized with the user id as part of the primary key and again we are also using a comment id to guarantee a unique row per comment note also these tables reflect a common naming convention we have for cassandra tables we append a by something to the table name to convey some idea of the query that the table is designed to support now let's look at one last difference between cassandra data modeling and relational data modeling having to do with joins and transactions one of the motivations for using transactions in relational data modeling is so that writes can be coordinated to multiple tables in the example shown here we want to ensure that when we add a record to the users table there's also an entry in the users by email table and vice versa we want this referential integrity between tables such that a user is either represented in both tables or neither of them this referential integrity is required for a join to work properly for example a join that combines contact information from the user table with username and password information from the users by email table in cassandra this referential integrity is not guaranteed by the database instead we have to enforce that at the application level the reason that cassandra does not provide this capability is that it would require a read before write which could lead to performance issues and would also not prevent data being changed between the read and the right there are techniques for writing to multiple tables such as cassandra's batch operation but remember this is not a full acid transaction another approach to managing rights to multiple denormalized tables is to use cassandra's materialized view feature finally you could choose to allow the possibility of temporary inconsistencies in your referential integrity you could fix this by implementing a background process to check and correct these errors or notify an operator it's very common to implement this kind of approach using dse analytics with apache spark [Music]",
    "segments": [
      {
        "start": 1.47,
        "duration": 5.32,
        "text": "[Music]"
      },
      {
        "start": 7.279,
        "duration": 2.24,
        "text": "if you've ever done relational data"
      },
      {
        "start": 8.96,
        "duration": 2.24,
        "text": "modeling"
      },
      {
        "start": 9.519,
        "duration": 4.481,
        "text": "you're going to find that modeling for"
      },
      {
        "start": 11.2,
        "duration": 4.399,
        "text": "cassandra has some distinct differences"
      },
      {
        "start": 14.0,
        "duration": 3.199,
        "text": "and there may be a few relational"
      },
      {
        "start": 15.599,
        "duration": 2.801,
        "text": "modeling habits that you'll need to"
      },
      {
        "start": 17.199,
        "duration": 2.481,
        "text": "unlearn"
      },
      {
        "start": 18.4,
        "duration": 3.6,
        "text": "here's a quick summary of the"
      },
      {
        "start": 19.68,
        "duration": 4.32,
        "text": "differences in cassandra data modeling"
      },
      {
        "start": 22.0,
        "duration": 3.84,
        "text": "we think about the application needs"
      },
      {
        "start": 24.0,
        "duration": 3.519,
        "text": "before designing our data model"
      },
      {
        "start": 25.84,
        "duration": 4.24,
        "text": "for this reason the queries are the"
      },
      {
        "start": 27.519,
        "duration": 4.801,
        "text": "driving force in cassandra data modeling"
      },
      {
        "start": 30.08,
        "duration": 3.999,
        "text": "whereas the driving factor in relational"
      },
      {
        "start": 32.32,
        "duration": 3.84,
        "text": "modeling is the entities"
      },
      {
        "start": 34.079,
        "duration": 4.401,
        "text": "in traditional relational data modeling"
      },
      {
        "start": 36.16,
        "duration": 3.84,
        "text": "primary keys are used to ensure the"
      },
      {
        "start": 38.48,
        "duration": 3.44,
        "text": "uniqueness of entities"
      },
      {
        "start": 40.0,
        "duration": 4.16,
        "text": "this is also true in cassandra data"
      },
      {
        "start": 41.92,
        "duration": 4.56,
        "text": "models but primary keys take on"
      },
      {
        "start": 44.16,
        "duration": 3.36,
        "text": "additional significance in cassandra"
      },
      {
        "start": 46.48,
        "duration": 2.72,
        "text": "particularly"
      },
      {
        "start": 47.52,
        "duration": 3.84,
        "text": "in determining the performance of your"
      },
      {
        "start": 49.2,
        "duration": 4.24,
        "text": "reads and writes at large scale"
      },
      {
        "start": 51.36,
        "duration": 4.16,
        "text": "in order to provide these guarantees of"
      },
      {
        "start": 53.44,
        "duration": 3.2,
        "text": "high performance and availability at a"
      },
      {
        "start": 55.52,
        "duration": 2.64,
        "text": "large scale"
      },
      {
        "start": 56.64,
        "duration": 3.52,
        "text": "cassandra uses a distributed"
      },
      {
        "start": 58.16,
        "duration": 3.36,
        "text": "architecture that we describe in detail"
      },
      {
        "start": 60.16,
        "duration": 3.6,
        "text": "in other courses"
      },
      {
        "start": 61.52,
        "duration": 3.679,
        "text": "and it places some limitations on the"
      },
      {
        "start": 63.76,
        "duration": 2.24,
        "text": "kinds of functionality that we can"
      },
      {
        "start": 65.199,
        "duration": 2.641,
        "text": "perform"
      },
      {
        "start": 66.0,
        "duration": 3.52,
        "text": "since our data is spread across multiple"
      },
      {
        "start": 67.84,
        "duration": 3.76,
        "text": "nodes specifically"
      },
      {
        "start": 69.52,
        "duration": 4.4,
        "text": "cassandra does not provide support for"
      },
      {
        "start": 71.6,
        "duration": 4.159,
        "text": "acid transactions or joins"
      },
      {
        "start": 73.92,
        "duration": 3.519,
        "text": "it does not enforce referential"
      },
      {
        "start": 75.759,
        "duration": 3.441,
        "text": "integrity across tables"
      },
      {
        "start": 77.439,
        "duration": 3.441,
        "text": "because it can't guarantee high"
      },
      {
        "start": 79.2,
        "duration": 4.16,
        "text": "performance of these operations"
      },
      {
        "start": 80.88,
        "duration": 3.919,
        "text": "at large scale these are things we need"
      },
      {
        "start": 83.36,
        "duration": 3.52,
        "text": "to be aware of in designing our"
      },
      {
        "start": 84.799,
        "duration": 4.081,
        "text": "cassandra data models"
      },
      {
        "start": 86.88,
        "duration": 3.76,
        "text": "in the next few slides we'll learn some"
      },
      {
        "start": 88.88,
        "duration": 3.52,
        "text": "techniques we can use in our data"
      },
      {
        "start": 90.64,
        "duration": 3.68,
        "text": "modeling and application design"
      },
      {
        "start": 92.4,
        "duration": 3.6,
        "text": "to deal with this reality we'll talk"
      },
      {
        "start": 94.32,
        "duration": 3.839,
        "text": "about denormalization"
      },
      {
        "start": 96.0,
        "duration": 3.68,
        "text": "and leveraging cassandra's tunable"
      },
      {
        "start": 98.159,
        "duration": 3.681,
        "text": "consistency features"
      },
      {
        "start": 99.68,
        "duration": 3.759,
        "text": "this figure shows a sample relational"
      },
      {
        "start": 101.84,
        "duration": 4.0,
        "text": "data modeling methodology"
      },
      {
        "start": 103.439,
        "duration": 3.68,
        "text": "that produces conceptual logical and"
      },
      {
        "start": 105.84,
        "duration": 3.36,
        "text": "physical data models"
      },
      {
        "start": 107.119,
        "duration": 3.28,
        "text": "including steps along the way for"
      },
      {
        "start": 109.2,
        "duration": 3.76,
        "text": "normalization"
      },
      {
        "start": 110.399,
        "duration": 4.321,
        "text": "and optimizing the data model the main"
      },
      {
        "start": 112.96,
        "duration": 4.08,
        "text": "thing i want you to note here"
      },
      {
        "start": 114.72,
        "duration": 3.92,
        "text": "the queries aren't considered until very"
      },
      {
        "start": 117.04,
        "duration": 3.92,
        "text": "late in the process"
      },
      {
        "start": 118.64,
        "duration": 3.68,
        "text": "perhaps not even until applications that"
      },
      {
        "start": 120.96,
        "duration": 4.24,
        "text": "are being implemented"
      },
      {
        "start": 122.32,
        "duration": 4.0,
        "text": "that use this model let's contrast the"
      },
      {
        "start": 125.2,
        "duration": 2.64,
        "text": "relational approach"
      },
      {
        "start": 126.32,
        "duration": 3.6,
        "text": "with a cassandra data modeling"
      },
      {
        "start": 127.84,
        "duration": 4.96,
        "text": "methodology that is shown here"
      },
      {
        "start": 129.92,
        "duration": 4.64,
        "text": "notice we still have conceptual logical"
      },
      {
        "start": 132.8,
        "duration": 3.6,
        "text": "and physical data models"
      },
      {
        "start": 134.56,
        "duration": 3.44,
        "text": "but we're considering the application"
      },
      {
        "start": 136.4,
        "duration": 4.16,
        "text": "workflow in queries"
      },
      {
        "start": 138.0,
        "duration": 4.319,
        "text": "earlier in the process this time we're"
      },
      {
        "start": 140.56,
        "duration": 3.679,
        "text": "incorporating that analysis into the"
      },
      {
        "start": 142.319,
        "duration": 3.601,
        "text": "logical data modeling phase"
      },
      {
        "start": 144.239,
        "duration": 5.36,
        "text": "rather than waiting until we're"
      },
      {
        "start": 145.92,
        "duration": 5.2,
        "text": "optimizing a physical relational model"
      },
      {
        "start": 149.599,
        "duration": 3.28,
        "text": "here's a quick summary of the"
      },
      {
        "start": 151.12,
        "duration": 3.68,
        "text": "differences in the approaches"
      },
      {
        "start": 152.879,
        "duration": 4.161,
        "text": "in the relational approach you begin"
      },
      {
        "start": 154.8,
        "duration": 3.28,
        "text": "with the data create a data model"
      },
      {
        "start": 157.04,
        "duration": 3.279,
        "text": "and then you think about your"
      },
      {
        "start": 158.08,
        "duration": 4.4,
        "text": "application the cassandra approach"
      },
      {
        "start": 160.319,
        "duration": 4.161,
        "text": "is kind of like that in reverse you"
      },
      {
        "start": 162.48,
        "duration": 5.36,
        "text": "think about the needs of the application"
      },
      {
        "start": 164.48,
        "duration": 5.039,
        "text": "first and use that to derive the model"
      },
      {
        "start": 167.84,
        "duration": 4.0,
        "text": "we've already stated that cassandra"
      },
      {
        "start": 169.519,
        "duration": 4.881,
        "text": "doesn't support asset transactions like"
      },
      {
        "start": 171.84,
        "duration": 4.72,
        "text": "relational databases do"
      },
      {
        "start": 174.4,
        "duration": 4.08,
        "text": "let's review what that term acid means"
      },
      {
        "start": 176.56,
        "duration": 3.599,
        "text": "so we can ensure we understand the"
      },
      {
        "start": 178.48,
        "duration": 3.759,
        "text": "guarantees that those relational"
      },
      {
        "start": 180.159,
        "duration": 4.961,
        "text": "databases are making"
      },
      {
        "start": 182.239,
        "duration": 4.401,
        "text": "first atomicity that means that all of"
      },
      {
        "start": 185.12,
        "duration": 3.839,
        "text": "the statements or mutations in the"
      },
      {
        "start": 186.64,
        "duration": 5.2,
        "text": "transaction will succeed or fail"
      },
      {
        "start": 188.959,
        "duration": 4.0,
        "text": "as a unit relational databases provide a"
      },
      {
        "start": 191.84,
        "duration": 3.36,
        "text": "behavior known as"
      },
      {
        "start": 192.959,
        "duration": 4.241,
        "text": "rollback this ensures that if a"
      },
      {
        "start": 195.2,
        "duration": 4.08,
        "text": "transaction can't be completed"
      },
      {
        "start": 197.2,
        "duration": 4.56,
        "text": "all data is returned to its original"
      },
      {
        "start": 199.28,
        "duration": 4.879,
        "text": "state prior to the transaction"
      },
      {
        "start": 201.76,
        "duration": 4.559,
        "text": "consistency now this is a different"
      },
      {
        "start": 204.159,
        "duration": 4.08,
        "text": "usage of the word consistency than we"
      },
      {
        "start": 206.319,
        "duration": 3.761,
        "text": "use in cassandra when we talk about"
      },
      {
        "start": 208.239,
        "duration": 4.56,
        "text": "consistency levels"
      },
      {
        "start": 210.08,
        "duration": 3.6,
        "text": "consistency in acid transactions usually"
      },
      {
        "start": 212.799,
        "duration": 3.761,
        "text": "refers to"
      },
      {
        "start": 213.68,
        "duration": 4.639,
        "text": "referential integrity isolation refers"
      },
      {
        "start": 216.56,
        "duration": 3.92,
        "text": "to the constraint that transactions do"
      },
      {
        "start": 218.319,
        "duration": 4.161,
        "text": "not interfere with each other"
      },
      {
        "start": 220.48,
        "duration": 4.16,
        "text": "various relational databases support"
      },
      {
        "start": 222.48,
        "duration": 4.72,
        "text": "this to various degrees of strictness"
      },
      {
        "start": 224.64,
        "duration": 5.04,
        "text": "and they support optimizations that bend"
      },
      {
        "start": 227.2,
        "duration": 5.119,
        "text": "this rule in certain circumstances"
      },
      {
        "start": 229.68,
        "duration": 5.04,
        "text": "research terms like linearizability if"
      },
      {
        "start": 232.319,
        "duration": 5.361,
        "text": "you want to dive more into this"
      },
      {
        "start": 234.72,
        "duration": 4.719,
        "text": "finally durability that refers to the"
      },
      {
        "start": 237.68,
        "duration": 2.639,
        "text": "persistence of the changes in a"
      },
      {
        "start": 239.439,
        "duration": 3.601,
        "text": "transaction"
      },
      {
        "start": 240.319,
        "duration": 4.881,
        "text": "even in the event of failure again"
      },
      {
        "start": 243.04,
        "duration": 3.199,
        "text": "cassandra does not support the acid"
      },
      {
        "start": 245.2,
        "duration": 2.959,
        "text": "semantics"
      },
      {
        "start": 246.239,
        "duration": 3.28,
        "text": "at least not in the same way as most"
      },
      {
        "start": 248.159,
        "duration": 3.761,
        "text": "relational databases"
      },
      {
        "start": 249.519,
        "duration": 4.241,
        "text": "in a distributed database like cassandra"
      },
      {
        "start": 251.92,
        "duration": 2.72,
        "text": "the locking and coordination that's"
      },
      {
        "start": 253.76,
        "duration": 3.36,
        "text": "required"
      },
      {
        "start": 254.64,
        "duration": 4.319,
        "text": "to implement two-phase commit semantics"
      },
      {
        "start": 257.12,
        "duration": 3.6,
        "text": "proves to be a significant performance"
      },
      {
        "start": 258.959,
        "duration": 4.401,
        "text": "penalty at large scales"
      },
      {
        "start": 260.72,
        "duration": 3.44,
        "text": "however cassandra does exhibit atomicity"
      },
      {
        "start": 263.36,
        "duration": 3.04,
        "text": "isolation"
      },
      {
        "start": 264.16,
        "duration": 3.36,
        "text": "and durability for writes to individual"
      },
      {
        "start": 266.4,
        "duration": 3.44,
        "text": "rows"
      },
      {
        "start": 267.52,
        "duration": 3.76,
        "text": "cassandra also supports a concept called"
      },
      {
        "start": 269.84,
        "duration": 3.76,
        "text": "tunable consistency"
      },
      {
        "start": 271.28,
        "duration": 4.16,
        "text": "which allows the client to specify the"
      },
      {
        "start": 273.6,
        "duration": 2.48,
        "text": "required level of agreement between"
      },
      {
        "start": 275.44,
        "duration": 3.12,
        "text": "nodes"
      },
      {
        "start": 276.08,
        "duration": 3.92,
        "text": "for your reads and rights cassandra also"
      },
      {
        "start": 278.56,
        "duration": 3.84,
        "text": "provides mechanisms like"
      },
      {
        "start": 280.0,
        "duration": 4.4,
        "text": "batches and lightweight transactions"
      },
      {
        "start": 282.4,
        "duration": 4.96,
        "text": "that you can use to provide stronger"
      },
      {
        "start": 284.4,
        "duration": 4.96,
        "text": "guarantees of consistency in some cases"
      },
      {
        "start": 287.36,
        "duration": 3.76,
        "text": "let's discuss the concept of tunable"
      },
      {
        "start": 289.36,
        "duration": 3.76,
        "text": "consistency in more detail"
      },
      {
        "start": 291.12,
        "duration": 3.359,
        "text": "to do that we'll need to reference the"
      },
      {
        "start": 293.12,
        "duration": 3.2,
        "text": "cap theorem"
      },
      {
        "start": 294.479,
        "duration": 3.841,
        "text": "the cap theorem was proposed by eric"
      },
      {
        "start": 296.32,
        "duration": 3.68,
        "text": "brewer as a way to describe the"
      },
      {
        "start": 298.32,
        "duration": 2.64,
        "text": "challenges of distributed database"
      },
      {
        "start": 300.0,
        "duration": 2.88,
        "text": "systems"
      },
      {
        "start": 300.96,
        "duration": 3.92,
        "text": "and it's been a useful tool for us to"
      },
      {
        "start": 302.88,
        "duration": 2.879,
        "text": "describe the trade-offs in distributed"
      },
      {
        "start": 304.88,
        "duration": 3.039,
        "text": "systems"
      },
      {
        "start": 305.759,
        "duration": 4.0,
        "text": "the premise is that with the failures"
      },
      {
        "start": 307.919,
        "duration": 3.921,
        "text": "inherent in distributed systems"
      },
      {
        "start": 309.759,
        "duration": 4.321,
        "text": "it's not possible to have a system that"
      },
      {
        "start": 311.84,
        "duration": 5.28,
        "text": "perfectly supports consistency"
      },
      {
        "start": 314.08,
        "duration": 5.6,
        "text": "availability and partition tolerance 100"
      },
      {
        "start": 317.12,
        "duration": 3.76,
        "text": "of the time therefore designers of"
      },
      {
        "start": 319.68,
        "duration": 3.16,
        "text": "systems must pick"
      },
      {
        "start": 320.88,
        "duration": 3.2,
        "text": "two out of three of those qualities to"
      },
      {
        "start": 322.84,
        "duration": 3.639,
        "text": "guarantee"
      },
      {
        "start": 324.08,
        "duration": 3.76,
        "text": "distributed systems typically sacrifice"
      },
      {
        "start": 326.479,
        "duration": 3.28,
        "text": "one of these qualities"
      },
      {
        "start": 327.84,
        "duration": 3.68,
        "text": "by default the choice that cassandra"
      },
      {
        "start": 329.759,
        "duration": 4.961,
        "text": "makes is to sacrifice"
      },
      {
        "start": 331.52,
        "duration": 3.76,
        "text": "consistency that is cassandra will"
      },
      {
        "start": 334.72,
        "duration": 2.88,
        "text": "accept"
      },
      {
        "start": 335.28,
        "duration": 4.16,
        "text": "temporary inconsistencies in data in"
      },
      {
        "start": 337.6,
        "duration": 2.879,
        "text": "order to make sure that the database is"
      },
      {
        "start": 339.44,
        "duration": 3.599,
        "text": "highly available"
      },
      {
        "start": 340.479,
        "duration": 3.921,
        "text": "and can support partitions which is why"
      },
      {
        "start": 343.039,
        "duration": 4.801,
        "text": "it's sometimes referred to"
      },
      {
        "start": 344.4,
        "duration": 5.84,
        "text": "as an ap database however i did say"
      },
      {
        "start": 347.84,
        "duration": 3.76,
        "text": "by default cassandra does provide the"
      },
      {
        "start": 350.24,
        "duration": 3.44,
        "text": "ability to require"
      },
      {
        "start": 351.6,
        "duration": 4.24,
        "text": "more consistency of the system by"
      },
      {
        "start": 353.68,
        "duration": 2.639,
        "text": "specifying the number of nodes that must"
      },
      {
        "start": 355.84,
        "duration": 3.52,
        "text": "agree"
      },
      {
        "start": 356.319,
        "duration": 5.361,
        "text": "on a read or a write in which case you"
      },
      {
        "start": 359.36,
        "duration": 4.72,
        "text": "could choose to sacrifice availability"
      },
      {
        "start": 361.68,
        "duration": 3.519,
        "text": "instead of consistency this flexibility"
      },
      {
        "start": 364.08,
        "duration": 4.239,
        "text": "is commonly referred to"
      },
      {
        "start": 365.199,
        "duration": 4.641,
        "text": "as tunable consistency now let's"
      },
      {
        "start": 368.319,
        "duration": 3.201,
        "text": "highlight one of the other differences"
      },
      {
        "start": 369.84,
        "duration": 2.72,
        "text": "between cassandra and relational"
      },
      {
        "start": 371.52,
        "duration": 3.519,
        "text": "databases"
      },
      {
        "start": 372.56,
        "duration": 4.479,
        "text": "cassandra does not support joins for"
      },
      {
        "start": 375.039,
        "duration": 4.241,
        "text": "review a join is a command in which"
      },
      {
        "start": 377.039,
        "duration": 4.081,
        "text": "query results from multiple tables"
      },
      {
        "start": 379.28,
        "duration": 3.68,
        "text": "are interleaved by the database to"
      },
      {
        "start": 381.12,
        "duration": 4.48,
        "text": "produce a combined result"
      },
      {
        "start": 382.96,
        "duration": 4.32,
        "text": "in the example shown videos and comments"
      },
      {
        "start": 385.6,
        "duration": 4.0,
        "text": "are stored in separate tables"
      },
      {
        "start": 387.28,
        "duration": 4.08,
        "text": "but by joining on the video id the"
      },
      {
        "start": 389.6,
        "duration": 3.92,
        "text": "comments for a particular video"
      },
      {
        "start": 391.36,
        "duration": 3.04,
        "text": "are returned alongside other attributes"
      },
      {
        "start": 393.52,
        "duration": 3.28,
        "text": "of the video"
      },
      {
        "start": 394.4,
        "duration": 4.16,
        "text": "to the application using a join query"
      },
      {
        "start": 396.8,
        "duration": 4.56,
        "text": "the results appear as a new"
      },
      {
        "start": 398.56,
        "duration": 4.96,
        "text": "virtual table as shown in the figure a"
      },
      {
        "start": 401.36,
        "duration": 3.6,
        "text": "join is a query that performs well when"
      },
      {
        "start": 403.52,
        "duration": 3.76,
        "text": "all the relevant data"
      },
      {
        "start": 404.96,
        "duration": 4.32,
        "text": "is available on a single node one of the"
      },
      {
        "start": 407.28,
        "duration": 4.72,
        "text": "main problems with implementing a join"
      },
      {
        "start": 409.28,
        "duration": 3.919,
        "text": "in a distributed database like cassandra"
      },
      {
        "start": 412.0,
        "duration": 3.12,
        "text": "is that the data that would be"
      },
      {
        "start": 413.199,
        "duration": 4.481,
        "text": "referenced from another table"
      },
      {
        "start": 415.12,
        "duration": 4.079,
        "text": "would most often exist on another node"
      },
      {
        "start": 417.68,
        "duration": 3.68,
        "text": "this has the potential to lead to"
      },
      {
        "start": 419.199,
        "duration": 4.641,
        "text": "unpredictable impact on latency as the"
      },
      {
        "start": 421.36,
        "duration": 4.08,
        "text": "scale of the database increases"
      },
      {
        "start": 423.84,
        "duration": 3.359,
        "text": "since joins are not supported in"
      },
      {
        "start": 425.44,
        "duration": 4.319,
        "text": "cassandra we promote a different"
      },
      {
        "start": 427.199,
        "duration": 4.481,
        "text": "approach to data modeling for cassandra"
      },
      {
        "start": 429.759,
        "duration": 3.761,
        "text": "let's assume for the sake of argument"
      },
      {
        "start": 431.68,
        "duration": 2.639,
        "text": "from an application user interface"
      },
      {
        "start": 433.52,
        "duration": 2.799,
        "text": "perspective"
      },
      {
        "start": 434.319,
        "duration": 4.16,
        "text": "we have two contexts in which we want to"
      },
      {
        "start": 436.319,
        "duration": 4.72,
        "text": "access comments"
      },
      {
        "start": 438.479,
        "duration": 4.241,
        "text": "first a video view where we display"
      },
      {
        "start": 441.039,
        "duration": 3.841,
        "text": "comments for a particular video"
      },
      {
        "start": 442.72,
        "duration": 4.0,
        "text": "and second a user view that allows a"
      },
      {
        "start": 444.88,
        "duration": 2.48,
        "text": "user to see all the comments they have"
      },
      {
        "start": 446.72,
        "duration": 3.36,
        "text": "made"
      },
      {
        "start": 447.36,
        "duration": 3.2,
        "text": "to support this design in cassandra will"
      },
      {
        "start": 450.08,
        "duration": 3.36,
        "text": "create"
      },
      {
        "start": 450.56,
        "duration": 3.919,
        "text": "two tables one that is targeted at each"
      },
      {
        "start": 453.44,
        "duration": 3.84,
        "text": "of our queries"
      },
      {
        "start": 454.479,
        "duration": 4.56,
        "text": "the comments by video table supports the"
      },
      {
        "start": 457.28,
        "duration": 3.28,
        "text": "ability to access comments for a"
      },
      {
        "start": 459.039,
        "duration": 4.16,
        "text": "specific video"
      },
      {
        "start": 460.56,
        "duration": 5.759,
        "text": "in this case we're using the video title"
      },
      {
        "start": 463.199,
        "duration": 4.961,
        "text": "plus a comment id as the primary key"
      },
      {
        "start": 466.319,
        "duration": 4.481,
        "text": "now don't worry we will dig more into"
      },
      {
        "start": 468.16,
        "duration": 3.68,
        "text": "this concept of complex primary keys and"
      },
      {
        "start": 470.8,
        "duration": 2.48,
        "text": "other units"
      },
      {
        "start": 471.84,
        "duration": 3.759,
        "text": "but the important thing to note at the"
      },
      {
        "start": 473.28,
        "duration": 4.479,
        "text": "moment is that this comment id"
      },
      {
        "start": 475.599,
        "duration": 4.241,
        "text": "helps us define a unique row in the"
      },
      {
        "start": 477.759,
        "duration": 4.72,
        "text": "database for each comment"
      },
      {
        "start": 479.84,
        "duration": 4.799,
        "text": "the second table comments by user"
      },
      {
        "start": 482.479,
        "duration": 4.481,
        "text": "supports that second view i mentioned"
      },
      {
        "start": 484.639,
        "duration": 4.161,
        "text": "notice that this table supports the same"
      },
      {
        "start": 486.96,
        "duration": 3.28,
        "text": "data as the first table but with a"
      },
      {
        "start": 488.8,
        "duration": 3.28,
        "text": "different primary key"
      },
      {
        "start": 490.24,
        "duration": 3.2,
        "text": "this time the comments are organized"
      },
      {
        "start": 492.08,
        "duration": 4.0,
        "text": "with the user id"
      },
      {
        "start": 493.44,
        "duration": 4.56,
        "text": "as part of the primary key and again we"
      },
      {
        "start": 496.08,
        "duration": 5.6,
        "text": "are also using a comment id"
      },
      {
        "start": 498.0,
        "duration": 6.0,
        "text": "to guarantee a unique row per comment"
      },
      {
        "start": 501.68,
        "duration": 4.239,
        "text": "note also these tables reflect a common"
      },
      {
        "start": 504.0,
        "duration": 2.879,
        "text": "naming convention we have for cassandra"
      },
      {
        "start": 505.919,
        "duration": 3.921,
        "text": "tables"
      },
      {
        "start": 506.879,
        "duration": 3.44,
        "text": "we append a by something to the table"
      },
      {
        "start": 509.84,
        "duration": 2.96,
        "text": "name"
      },
      {
        "start": 510.319,
        "duration": 4.481,
        "text": "to convey some idea of the query that"
      },
      {
        "start": 512.8,
        "duration": 4.0,
        "text": "the table is designed to support"
      },
      {
        "start": 514.8,
        "duration": 3.76,
        "text": "now let's look at one last difference"
      },
      {
        "start": 516.8,
        "duration": 3.2,
        "text": "between cassandra data modeling and"
      },
      {
        "start": 518.56,
        "duration": 4.32,
        "text": "relational data modeling"
      },
      {
        "start": 520.0,
        "duration": 4.56,
        "text": "having to do with joins and transactions"
      },
      {
        "start": 522.88,
        "duration": 3.84,
        "text": "one of the motivations for using"
      },
      {
        "start": 524.56,
        "duration": 3.92,
        "text": "transactions in relational data modeling"
      },
      {
        "start": 526.72,
        "duration": 3.119,
        "text": "is so that writes can be coordinated to"
      },
      {
        "start": 528.48,
        "duration": 3.359,
        "text": "multiple tables"
      },
      {
        "start": 529.839,
        "duration": 3.921,
        "text": "in the example shown here we want to"
      },
      {
        "start": 531.839,
        "duration": 2.961,
        "text": "ensure that when we add a record to the"
      },
      {
        "start": 533.76,
        "duration": 3.36,
        "text": "users table"
      },
      {
        "start": 534.8,
        "duration": 3.2,
        "text": "there's also an entry in the users by"
      },
      {
        "start": 537.12,
        "duration": 3.76,
        "text": "email table"
      },
      {
        "start": 538.0,
        "duration": 4.72,
        "text": "and vice versa we want this referential"
      },
      {
        "start": 540.88,
        "duration": 3.76,
        "text": "integrity between tables"
      },
      {
        "start": 542.72,
        "duration": 3.04,
        "text": "such that a user is either represented"
      },
      {
        "start": 544.64,
        "duration": 3.199,
        "text": "in both tables"
      },
      {
        "start": 545.76,
        "duration": 4.48,
        "text": "or neither of them this referential"
      },
      {
        "start": 547.839,
        "duration": 3.601,
        "text": "integrity is required for a join to work"
      },
      {
        "start": 550.24,
        "duration": 3.68,
        "text": "properly"
      },
      {
        "start": 551.44,
        "duration": 4.56,
        "text": "for example a join that combines contact"
      },
      {
        "start": 553.92,
        "duration": 4.32,
        "text": "information from the user table"
      },
      {
        "start": 556.0,
        "duration": 4.72,
        "text": "with username and password information"
      },
      {
        "start": 558.24,
        "duration": 5.2,
        "text": "from the users by email table"
      },
      {
        "start": 560.72,
        "duration": 4.88,
        "text": "in cassandra this referential integrity"
      },
      {
        "start": 563.44,
        "duration": 4.56,
        "text": "is not guaranteed by the database"
      },
      {
        "start": 565.6,
        "duration": 4.16,
        "text": "instead we have to enforce that at the"
      },
      {
        "start": 568.0,
        "duration": 3.279,
        "text": "application level"
      },
      {
        "start": 569.76,
        "duration": 3.6,
        "text": "the reason that cassandra does not"
      },
      {
        "start": 571.279,
        "duration": 2.641,
        "text": "provide this capability is that it would"
      },
      {
        "start": 573.36,
        "duration": 2.72,
        "text": "require"
      },
      {
        "start": 573.92,
        "duration": 3.76,
        "text": "a read before write which could lead to"
      },
      {
        "start": 576.08,
        "duration": 3.759,
        "text": "performance issues"
      },
      {
        "start": 577.68,
        "duration": 4.64,
        "text": "and would also not prevent data being"
      },
      {
        "start": 579.839,
        "duration": 4.0,
        "text": "changed between the read and the right"
      },
      {
        "start": 582.32,
        "duration": 3.68,
        "text": "there are techniques for writing to"
      },
      {
        "start": 583.839,
        "duration": 3.361,
        "text": "multiple tables such as cassandra's"
      },
      {
        "start": 586.0,
        "duration": 3.279,
        "text": "batch operation"
      },
      {
        "start": 587.2,
        "duration": 3.6,
        "text": "but remember this is not a full acid"
      },
      {
        "start": 589.279,
        "duration": 3.68,
        "text": "transaction"
      },
      {
        "start": 590.8,
        "duration": 3.84,
        "text": "another approach to managing rights to"
      },
      {
        "start": 592.959,
        "duration": 4.241,
        "text": "multiple denormalized tables"
      },
      {
        "start": 594.64,
        "duration": 3.44,
        "text": "is to use cassandra's materialized view"
      },
      {
        "start": 597.2,
        "duration": 2.96,
        "text": "feature"
      },
      {
        "start": 598.08,
        "duration": 3.52,
        "text": "finally you could choose to allow the"
      },
      {
        "start": 600.16,
        "duration": 3.359,
        "text": "possibility of temporary"
      },
      {
        "start": 601.6,
        "duration": 3.84,
        "text": "inconsistencies in your referential"
      },
      {
        "start": 603.519,
        "duration": 4.081,
        "text": "integrity you could fix this by"
      },
      {
        "start": 605.44,
        "duration": 4.32,
        "text": "implementing a background process to"
      },
      {
        "start": 607.6,
        "duration": 3.44,
        "text": "check and correct these errors or notify"
      },
      {
        "start": 609.76,
        "duration": 2.96,
        "text": "an operator"
      },
      {
        "start": 611.04,
        "duration": 4.16,
        "text": "it's very common to implement this kind"
      },
      {
        "start": 612.72,
        "duration": 5.59,
        "text": "of approach using dse analytics with"
      },
      {
        "start": 615.2,
        "duration": 5.83,
        "text": "apache spark"
      },
      {
        "start": 618.31,
        "duration": 2.72,
        "text": "[Music]"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T01:02:13.098817+00:00"
}