{
  "video_id": "PcH9b0janp0",
  "title": "DS220.08 Denormalization | Data Modeling with Apache Cassandra",
  "description": "#DataStaxAcademy #DS220\nDS220.08 Denormalization\nIn this unit, we will be covering denormalization, and how to denormalize for an Apache Cassandra data model.\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-14T09:20:10Z",
  "thumbnail": "https://i.ytimg.com/vi/PcH9b0janp0/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "data_modeling",
    "cassandra",
    "tutorial",
    "apache_cassandra",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=PcH9b0janp0",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] so let's talk about denormalization and how to denormalize for a cassandra data model now in the case where we have a relational database nobody panic i'm going to show you a relational database model this is how it works so this should look familiar multiple tables each one has an id these store different parts your domain so your data domain has videos users and comments how are we going to make these all work together well if you worked with relational databases for a long time you know the answer you're going to do a query to join those together how does that work in this case i want to find some comments for a particular movie if you look at those two tables you have comments in one you have videos on the other so that data exists in two different places so whenever i select a comment from videos how am i going to get that comment out if i just have the video well the join statement that join on comments is going to join those things together the join statement now that is how relational databases work in this case i say the title is equal to interstellar i know that i can use that to do a join on those two tables and get the comments just for that one title that is how relational databases were designed having multiple tables and then in the query that's when i start building these things together so the results of this query in this case will be if i want the title of interstellar i get the comments just for that one movie but the join happens in the database what about something a little more complicated maybe something like logins we're looking for particular comments by a user so here's this user emotions and we want to find out every comment that that user had put into the system again another join so in this case it's just a few but what if it's a lot more well there's the problem with relational database modeling is that eventually you're going to run into the situation if you're not careful and let's face it you don't know when it's gonna happen but eventually you're gonna see that there's too many records in the join and it'll start slowing down your queries a lot i've run relational databases for years and years and this is the thing that we always try to avoid and of course you do things like add indexes to it or maybe truncate some data which is really bad you could do that or another thing that we did quite a bit with relational databases that is denormalizing denormalizing is a really common technique even with relational databases but it's a really critical task with cassandra if you look at this diagram you see these two queries that we needed now represented an entire table so we want to find all the comments for a video or comments by a particular user those are now tables and those tables store all of the data you need if you look at the structure of these two tables they look really similar and there is a duplication of data here's the thing you need to be okay with when you denormalize you're gonna have duplicate data that's okay because you need data when you need it not whenever the server is ready to give it to you or hang on let me go do this really complicated join have you run an explain plan it's probably a little expensive this case you know exactly what you're getting looking at these two tables yes they're very much the same however look at the primary key the primary key is very different because in the first one video title is a partition key comment id is the clustering column the other table comments by user the user login is the partition key the comment id is again the clustering column the subtlety here between those two data models is the partition key what's that primary part of that record it's the person or the video and then the clustering column gives you the run out of everything that's happened for that video or for that person that's a really super efficient data model and it works really well in the cassandra world and these are denormalized tables now of that same join that you had to do in a relational database what it gives you is this really efficient and predictable query performance so if i look at the query result for comments by video or comments by user you get rows and columns in a very sequential way but it's very fast this is the key to high performance with a cassandra data model is not only understanding the partition key and how that works by putting your data in the right place the clustering column with a sort order what is it going to look like on disk but then finally how do i denormalize my data denormalizing is a really critical part of the plan you're going to be optimizing for certain queries in the way that you need it when you need it and sometimes i'm going to say this again you're going to have duplicate data that's okay when's the last time you were worried more about disk space than query performance that's what i thought so let's do an exercise on denormalization and see how it really works",
    "segments": [
      {
        "start": 1.47,
        "duration": 6.97,
        "text": "[Music]"
      },
      {
        "start": 7.44,
        "duration": 3.68,
        "text": "so let's talk about"
      },
      {
        "start": 8.44,
        "duration": 4.52,
        "text": "denormalization and how to denormalize"
      },
      {
        "start": 11.12,
        "duration": 3.28,
        "text": "for a cassandra data model"
      },
      {
        "start": 12.96,
        "duration": 3.6,
        "text": "now in the case where we have a"
      },
      {
        "start": 14.4,
        "duration": 3.28,
        "text": "relational database nobody panic"
      },
      {
        "start": 16.56,
        "duration": 3.92,
        "text": "i'm going to show you a relational"
      },
      {
        "start": 17.68,
        "duration": 4.56,
        "text": "database model this is how it works"
      },
      {
        "start": 20.48,
        "duration": 3.92,
        "text": "so this should look familiar multiple"
      },
      {
        "start": 22.24,
        "duration": 4.48,
        "text": "tables each one has an id"
      },
      {
        "start": 24.4,
        "duration": 4.48,
        "text": "these store different parts your domain"
      },
      {
        "start": 26.72,
        "duration": 3.04,
        "text": "so your data domain has videos users and"
      },
      {
        "start": 28.88,
        "duration": 2.159,
        "text": "comments"
      },
      {
        "start": 29.76,
        "duration": 2.88,
        "text": "how are we going to make these all work"
      },
      {
        "start": 31.039,
        "duration": 3.52,
        "text": "together well if you worked with"
      },
      {
        "start": 32.64,
        "duration": 4.0,
        "text": "relational databases for a long time"
      },
      {
        "start": 34.559,
        "duration": 4.081,
        "text": "you know the answer you're going to do a"
      },
      {
        "start": 36.64,
        "duration": 4.64,
        "text": "query to join those together"
      },
      {
        "start": 38.64,
        "duration": 4.8,
        "text": "how does that work in this case i want"
      },
      {
        "start": 41.28,
        "duration": 2.72,
        "text": "to find some comments for a particular"
      },
      {
        "start": 43.44,
        "duration": 2.4,
        "text": "movie"
      },
      {
        "start": 44.0,
        "duration": 3.44,
        "text": "if you look at those two tables you have"
      },
      {
        "start": 45.84,
        "duration": 2.0,
        "text": "comments in one you have videos on the"
      },
      {
        "start": 47.44,
        "duration": 2.4,
        "text": "other"
      },
      {
        "start": 47.84,
        "duration": 4.559,
        "text": "so that data exists in two different"
      },
      {
        "start": 49.84,
        "duration": 3.92,
        "text": "places so whenever i select a comment"
      },
      {
        "start": 52.399,
        "duration": 2.961,
        "text": "from videos"
      },
      {
        "start": 53.76,
        "duration": 3.119,
        "text": "how am i going to get that comment out"
      },
      {
        "start": 55.36,
        "duration": 4.08,
        "text": "if i just have the video"
      },
      {
        "start": 56.879,
        "duration": 3.52,
        "text": "well the join statement that join on"
      },
      {
        "start": 59.44,
        "duration": 2.56,
        "text": "comments"
      },
      {
        "start": 60.399,
        "duration": 3.201,
        "text": "is going to join those things together"
      },
      {
        "start": 62.0,
        "duration": 4.159,
        "text": "the join statement"
      },
      {
        "start": 63.6,
        "duration": 3.199,
        "text": "now that is how relational databases"
      },
      {
        "start": 66.159,
        "duration": 3.041,
        "text": "work"
      },
      {
        "start": 66.799,
        "duration": 3.521,
        "text": "in this case i say the title is equal to"
      },
      {
        "start": 69.2,
        "duration": 3.68,
        "text": "interstellar"
      },
      {
        "start": 70.32,
        "duration": 4.0,
        "text": "i know that i can use that to do a join"
      },
      {
        "start": 72.88,
        "duration": 3.76,
        "text": "on those two tables"
      },
      {
        "start": 74.32,
        "duration": 3.04,
        "text": "and get the comments just for that one"
      },
      {
        "start": 76.64,
        "duration": 2.479,
        "text": "title"
      },
      {
        "start": 77.36,
        "duration": 3.92,
        "text": "that is how relational databases were"
      },
      {
        "start": 79.119,
        "duration": 4.561,
        "text": "designed having multiple tables"
      },
      {
        "start": 81.28,
        "duration": 4.4,
        "text": "and then in the query that's when i"
      },
      {
        "start": 83.68,
        "duration": 4.479,
        "text": "start building these things together"
      },
      {
        "start": 85.68,
        "duration": 3.6,
        "text": "so the results of this query in this"
      },
      {
        "start": 88.159,
        "duration": 3.201,
        "text": "case will be"
      },
      {
        "start": 89.28,
        "duration": 3.12,
        "text": "if i want the title of interstellar i"
      },
      {
        "start": 91.36,
        "duration": 3.28,
        "text": "get the comments"
      },
      {
        "start": 92.4,
        "duration": 4.32,
        "text": "just for that one movie but the join"
      },
      {
        "start": 94.64,
        "duration": 3.119,
        "text": "happens in the database"
      },
      {
        "start": 96.72,
        "duration": 4.24,
        "text": "what about something a little more"
      },
      {
        "start": 97.759,
        "duration": 5.521,
        "text": "complicated maybe something like logins"
      },
      {
        "start": 100.96,
        "duration": 3.439,
        "text": "we're looking for particular comments by"
      },
      {
        "start": 103.28,
        "duration": 4.159,
        "text": "a user"
      },
      {
        "start": 104.399,
        "duration": 4.72,
        "text": "so here's this user emotions"
      },
      {
        "start": 107.439,
        "duration": 3.521,
        "text": "and we want to find out every comment"
      },
      {
        "start": 109.119,
        "duration": 4.481,
        "text": "that that user had put into the system"
      },
      {
        "start": 110.96,
        "duration": 4.0,
        "text": "again another join so in this case it's"
      },
      {
        "start": 113.6,
        "duration": 4.559,
        "text": "just a few"
      },
      {
        "start": 114.96,
        "duration": 4.32,
        "text": "but what if it's a lot more well there's"
      },
      {
        "start": 118.159,
        "duration": 3.441,
        "text": "the problem"
      },
      {
        "start": 119.28,
        "duration": 3.439,
        "text": "with relational database modeling is"
      },
      {
        "start": 121.6,
        "duration": 2.64,
        "text": "that eventually"
      },
      {
        "start": 122.719,
        "duration": 4.0,
        "text": "you're going to run into the situation"
      },
      {
        "start": 124.24,
        "duration": 4.079,
        "text": "if you're not careful and let's face it"
      },
      {
        "start": 126.719,
        "duration": 3.201,
        "text": "you don't know when it's gonna happen"
      },
      {
        "start": 128.319,
        "duration": 2.961,
        "text": "but eventually you're gonna see"
      },
      {
        "start": 129.92,
        "duration": 3.52,
        "text": "that there's too many records in the"
      },
      {
        "start": 131.28,
        "duration": 2.959,
        "text": "join and it'll start slowing down your"
      },
      {
        "start": 133.44,
        "duration": 3.519,
        "text": "queries"
      },
      {
        "start": 134.239,
        "duration": 4.161,
        "text": "a lot i've run relational databases for"
      },
      {
        "start": 136.959,
        "duration": 3.201,
        "text": "years and years and this is the thing"
      },
      {
        "start": 138.4,
        "duration": 3.68,
        "text": "that we always try to avoid"
      },
      {
        "start": 140.16,
        "duration": 3.12,
        "text": "and of course you do things like add"
      },
      {
        "start": 142.08,
        "duration": 3.2,
        "text": "indexes to it"
      },
      {
        "start": 143.28,
        "duration": 4.0,
        "text": "or maybe truncate some data which is"
      },
      {
        "start": 145.28,
        "duration": 3.84,
        "text": "really bad you could do that"
      },
      {
        "start": 147.28,
        "duration": 3.44,
        "text": "or another thing that we did quite a bit"
      },
      {
        "start": 149.12,
        "duration": 4.72,
        "text": "with relational databases"
      },
      {
        "start": 150.72,
        "duration": 3.599,
        "text": "that is denormalizing denormalizing is a"
      },
      {
        "start": 153.84,
        "duration": 2.479,
        "text": "really"
      },
      {
        "start": 154.319,
        "duration": 3.841,
        "text": "common technique even with relational"
      },
      {
        "start": 156.319,
        "duration": 3.441,
        "text": "databases but it's a really critical"
      },
      {
        "start": 158.16,
        "duration": 3.04,
        "text": "task with cassandra"
      },
      {
        "start": 159.76,
        "duration": 3.44,
        "text": "if you look at this diagram you see"
      },
      {
        "start": 161.2,
        "duration": 4.88,
        "text": "these two queries that we needed"
      },
      {
        "start": 163.2,
        "duration": 4.48,
        "text": "now represented an entire table so we"
      },
      {
        "start": 166.08,
        "duration": 2.4,
        "text": "want to find all the comments for a"
      },
      {
        "start": 167.68,
        "duration": 3.76,
        "text": "video"
      },
      {
        "start": 168.48,
        "duration": 3.68,
        "text": "or comments by a particular user those"
      },
      {
        "start": 171.44,
        "duration": 2.799,
        "text": "are now"
      },
      {
        "start": 172.16,
        "duration": 3.2,
        "text": "tables and those tables store all of the"
      },
      {
        "start": 174.239,
        "duration": 2.401,
        "text": "data you need"
      },
      {
        "start": 175.36,
        "duration": 4.0,
        "text": "if you look at the structure of these"
      },
      {
        "start": 176.64,
        "duration": 5.36,
        "text": "two tables they look really similar"
      },
      {
        "start": 179.36,
        "duration": 4.0,
        "text": "and there is a duplication of data"
      },
      {
        "start": 182.0,
        "duration": 3.28,
        "text": "here's the thing you need to be okay"
      },
      {
        "start": 183.36,
        "duration": 3.519,
        "text": "with when you denormalize you're gonna"
      },
      {
        "start": 185.28,
        "duration": 4.16,
        "text": "have duplicate data"
      },
      {
        "start": 186.879,
        "duration": 3.36,
        "text": "that's okay because you need data when"
      },
      {
        "start": 189.44,
        "duration": 2.48,
        "text": "you need it"
      },
      {
        "start": 190.239,
        "duration": 3.36,
        "text": "not whenever the server is ready to give"
      },
      {
        "start": 191.92,
        "duration": 3.2,
        "text": "it to you or hang on"
      },
      {
        "start": 193.599,
        "duration": 3.681,
        "text": "let me go do this really complicated"
      },
      {
        "start": 195.12,
        "duration": 4.96,
        "text": "join have you run an explain plan"
      },
      {
        "start": 197.28,
        "duration": 4.16,
        "text": "it's probably a little expensive this"
      },
      {
        "start": 200.08,
        "duration": 1.92,
        "text": "case you know exactly what you're"
      },
      {
        "start": 201.44,
        "duration": 2.719,
        "text": "getting"
      },
      {
        "start": 202.0,
        "duration": 3.28,
        "text": "looking at these two tables yes they're"
      },
      {
        "start": 204.159,
        "duration": 3.521,
        "text": "very much the same"
      },
      {
        "start": 205.28,
        "duration": 3.519,
        "text": "however look at the primary key the"
      },
      {
        "start": 207.68,
        "duration": 3.36,
        "text": "primary key is"
      },
      {
        "start": 208.799,
        "duration": 4.561,
        "text": "very different because in the first one"
      },
      {
        "start": 211.04,
        "duration": 5.44,
        "text": "video title is a partition key"
      },
      {
        "start": 213.36,
        "duration": 5.76,
        "text": "comment id is the clustering column"
      },
      {
        "start": 216.48,
        "duration": 3.92,
        "text": "the other table comments by user the"
      },
      {
        "start": 219.12,
        "duration": 3.52,
        "text": "user login"
      },
      {
        "start": 220.4,
        "duration": 3.6,
        "text": "is the partition key the comment id is"
      },
      {
        "start": 222.64,
        "duration": 3.519,
        "text": "again the clustering column"
      },
      {
        "start": 224.0,
        "duration": 3.12,
        "text": "the subtlety here between those two data"
      },
      {
        "start": 226.159,
        "duration": 3.521,
        "text": "models"
      },
      {
        "start": 227.12,
        "duration": 3.759,
        "text": "is the partition key what's that primary"
      },
      {
        "start": 229.68,
        "duration": 3.44,
        "text": "part of that record"
      },
      {
        "start": 230.879,
        "duration": 3.681,
        "text": "it's the person or the video and then"
      },
      {
        "start": 233.12,
        "duration": 2.88,
        "text": "the clustering column"
      },
      {
        "start": 234.56,
        "duration": 3.2,
        "text": "gives you the run out of everything"
      },
      {
        "start": 236.0,
        "duration": 4.56,
        "text": "that's happened for that video or"
      },
      {
        "start": 237.76,
        "duration": 4.24,
        "text": "for that person that's a really super"
      },
      {
        "start": 240.56,
        "duration": 2.64,
        "text": "efficient data model"
      },
      {
        "start": 242.0,
        "duration": 3.2,
        "text": "and it works really well in the"
      },
      {
        "start": 243.2,
        "duration": 4.399,
        "text": "cassandra world and these are"
      },
      {
        "start": 245.2,
        "duration": 4.0,
        "text": "denormalized tables now of that same"
      },
      {
        "start": 247.599,
        "duration": 3.041,
        "text": "join that you had to do in a relational"
      },
      {
        "start": 249.2,
        "duration": 3.52,
        "text": "database"
      },
      {
        "start": 250.64,
        "duration": 4.48,
        "text": "what it gives you is this really"
      },
      {
        "start": 252.72,
        "duration": 5.039,
        "text": "efficient and predictable"
      },
      {
        "start": 255.12,
        "duration": 4.88,
        "text": "query performance so if i look at the"
      },
      {
        "start": 257.759,
        "duration": 3.44,
        "text": "query result for comments by video or"
      },
      {
        "start": 260.0,
        "duration": 3.84,
        "text": "comments by user"
      },
      {
        "start": 261.199,
        "duration": 4.0,
        "text": "you get rows and columns in a very"
      },
      {
        "start": 263.84,
        "duration": 4.32,
        "text": "sequential way"
      },
      {
        "start": 265.199,
        "duration": 4.72,
        "text": "but it's very fast this is the key to"
      },
      {
        "start": 268.16,
        "duration": 2.479,
        "text": "high performance with a cassandra data"
      },
      {
        "start": 269.919,
        "duration": 2.401,
        "text": "model"
      },
      {
        "start": 270.639,
        "duration": 3.12,
        "text": "is not only understanding the partition"
      },
      {
        "start": 272.32,
        "duration": 3.36,
        "text": "key and how that works by"
      },
      {
        "start": 273.759,
        "duration": 3.121,
        "text": "putting your data in the right place the"
      },
      {
        "start": 275.68,
        "duration": 3.44,
        "text": "clustering column"
      },
      {
        "start": 276.88,
        "duration": 3.36,
        "text": "with a sort order what is it going to"
      },
      {
        "start": 279.12,
        "duration": 3.76,
        "text": "look like on disk"
      },
      {
        "start": 280.24,
        "duration": 3.44,
        "text": "but then finally how do i denormalize my"
      },
      {
        "start": 282.88,
        "duration": 3.12,
        "text": "data"
      },
      {
        "start": 283.68,
        "duration": 3.519,
        "text": "denormalizing is a really critical part"
      },
      {
        "start": 286.0,
        "duration": 2.479,
        "text": "of the plan"
      },
      {
        "start": 287.199,
        "duration": 3.361,
        "text": "you're going to be optimizing for"
      },
      {
        "start": 288.479,
        "duration": 3.521,
        "text": "certain queries in the way that you need"
      },
      {
        "start": 290.56,
        "duration": 3.44,
        "text": "it when you need it"
      },
      {
        "start": 292.0,
        "duration": 3.919,
        "text": "and sometimes i'm going to say this"
      },
      {
        "start": 294.0,
        "duration": 2.639,
        "text": "again you're going to have duplicate"
      },
      {
        "start": 295.919,
        "duration": 2.961,
        "text": "data"
      },
      {
        "start": 296.639,
        "duration": 3.761,
        "text": "that's okay when's the last time you"
      },
      {
        "start": 298.88,
        "duration": 3.84,
        "text": "were worried more about disk space"
      },
      {
        "start": 300.4,
        "duration": 4.239,
        "text": "than query performance that's what i"
      },
      {
        "start": 302.72,
        "duration": 3.12,
        "text": "thought so let's do an exercise on"
      },
      {
        "start": 304.639,
        "duration": 7.201,
        "text": "denormalization"
      },
      {
        "start": 305.84,
        "duration": 6.0,
        "text": "and see how it really works"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T00:56:08.586279+00:00"
}