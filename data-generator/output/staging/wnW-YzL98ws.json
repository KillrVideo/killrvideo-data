{
  "video_id": "wnW-YzL98ws",
  "title": "AWS Lambda Cloud Functions and Astra DB in 5 minutes",
  "description": "Dr. Artem Chetbotko walks you through how to connect AWS Lambda Cloud Functions written in Java and Python, using Java gRPC and Astra DB's Python SDK, to DataStax Astra DB, built on Apache Cassandra.\nCheck out a similar demo on Google Cloud Functions: \nhttps://www.youtube.com/watch?v=SasKofQgWqY\n\nCONNECT WITH DATASTAX\nSubscribe: http://www.youtube.com/c/datastaxdevs?sub_confirmation=1 \nTwitter: https://twitter.com/datastaxdevs\nTwitch: https://www.twitch.tv/datastaxdevs\n\nAbout DataStax:\nDataStax is the company behind the massively scalable, highly available, cloud-native NoSQL data platform built on Apache Cassandra™. DataStax gives developers and enterprises the freedom to run data in any cloud, Kubernetes, hybrid or bare metal at global scale with zero downtime and zero lock-in. More than 450 of the world’s leading enterprises including Capital One, Cisco, Comcast, Delta Airlines, Macy’s, McDonald’s, Safeway, Sony, and Walmart use DataStax to build transformational data architectures for real-world outcomes. For more, visit DataStax.com and @DataStax.\n\nAbout DataStax Developer:\nOn the DataStax Developers YouTube channel, you can find tutorials, workshops and much more to help you learn and stay updated with the latest information on Apache Cassandra©.  Visit https://datastax.com/dev for more free learning resources.",
  "published_at": "2022-10-07T18:12:20Z",
  "thumbnail": "https://i.ytimg.com/vi/wnW-YzL98ws/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "scalable",
    "demo",
    "workshop",
    "cassandra",
    "tutorial",
    "apache_cassandra",
    "nosql",
    "astra",
    "architecture",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=wnW-YzL98ws",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "foreign this is a demo of using AWS Lambda functions to create data stored in astrodb we will explore functions within in Java and python that use grpc and rest apis to interact with the database these functions can be recreated by following this step-by-step tutorial on the awesome Astra website for this demo I'm using a free tier AWS account and a free plan Astra account which gives me plenty of resources to experiment with let's take a look at the tutorial itself there are four examples here and each one has three main steps create a deployment package create a function and test the function let's look at the python SDK egg SDK example they diploma deployment package is a ZIP file with a function source code and dependencies it's quite straightforward to create the most interesting part is of course the source code of the function so here we Define c variables for Astra database ID region and application token and I will show you later where to find that information on the Astra website these variables we get the values from the environment variables and this can be will be configured later in when we create the function we create Astra HTTP clients and we have Lambda Handler which it gets executed each time we invoke our function so what this function does it simply retrieves one Valor one row from from the database and that row has a key local and it's from table local and key space system so this is the rest API call here and we do it with just one column SQL version and we return that so it's pretty simple function once we create this deployment package we can create a function through the web UI and here is we specify the name of the function the runtime and most importantly we upload our deployment package and we get to the screen that looks like this we do Define on the configuration tab we do Define these variables for ID region and token and after that we can deploy the function and test it and for Java grpc the process is similar the language is different the libraries are different but it's there are still the same three variables there uh there is a still uh query that retrieves that SQL version but this time it is expressed using cql or Cassandra query language so it's different way to interact with the database different language but the process is very very similar and the the process of creating a function is again through the uploading this package okay so this is the uh the dashboard of uh the Astra website so here I have my databases and the one that I'm using is the first one which is a function as a service Astrid B and this is how you find information for this database so this is database ID that you will need you can also create generate a token and copy it and keep it in secret and you can also click on the database and find the region So This Is Us East one in Google Cloud so this database this database runs in Google cloud and we will be working with it from uh using AWA AWS function um what else and you can of course you can create new database or use existing one it doesn't matter we don't need to create tables or insert something because we're using system key space which is standard for all databases enough said I have these two functions deployed let's look at python SDK first this function and the other one as well triggered every 60 seconds every minute by that's defined by the rule in event preach and that will allows us to um look at some performance figures performance statistics for this function so you can see the code and you can you can change this code and redeploy the function as needed but I'm gonna Focus mostly on the performance uh for this function so let's take a look at the one hour performance let's let's enlarge this chart and you can see the range is between 100 milliseconds and maybe and 140 milliseconds or so uh so we can even look at the other metrics okay so in Cloud watch under Matrix we can Define and we can see the minimum average and maximum but the average is probably not the most useful statistics here so let's look at P95 so 95 of within so for one hour range 95 of our requests complete under one 29 milliseconds okay so this is pretty good performance Let's uh take a look at the uh Java grpc1 okay so you cannot see Source codes because the package is too large larger than three megabytes and in line uh code editing is disabled so in terms of metrics we do have one outlier here let's look at the metrics uh right away let's define P95 okay P95 so 95 of our function invocations complete in 55 under 55.6 milliseconds and the The Fosters the best performance is 25.9 milliseconds which is pretty good and you can do even better with drivers with Java driver python driver and you can do additional optimization right now our we we deploying the the database in Google cloud and we have AWS functions um so it two different Cloud providers of course we can use we can deploy database in AWS or we can use Google Cloud functions and we have tutorial and video for that as well and with that thank you for your attention foreign",
    "segments": [
      {
        "start": 0.06,
        "duration": 3.0,
        "text": "foreign"
      },
      {
        "start": 5.1,
        "duration": 4.919,
        "text": "this is a demo of using AWS Lambda"
      },
      {
        "start": 7.919,
        "duration": 3.781,
        "text": "functions to create data stored in"
      },
      {
        "start": 10.019,
        "duration": 4.261,
        "text": "astrodb"
      },
      {
        "start": 11.7,
        "duration": 5.46,
        "text": "we will explore functions within in Java"
      },
      {
        "start": 14.28,
        "duration": 6.419,
        "text": "and python that use grpc and rest apis"
      },
      {
        "start": 17.16,
        "duration": 6.06,
        "text": "to interact with the database"
      },
      {
        "start": 20.699,
        "duration": 5.58,
        "text": "these functions can be recreated by"
      },
      {
        "start": 23.22,
        "duration": 6.719,
        "text": "following this step-by-step tutorial on"
      },
      {
        "start": 26.279,
        "duration": 7.261,
        "text": "the awesome Astra website for this demo"
      },
      {
        "start": 29.939,
        "duration": 6.541,
        "text": "I'm using a free tier AWS account and a"
      },
      {
        "start": 33.54,
        "duration": 7.32,
        "text": "free plan Astra account which gives me"
      },
      {
        "start": 36.48,
        "duration": 7.079,
        "text": "plenty of resources to experiment with"
      },
      {
        "start": 40.86,
        "duration": 5.82,
        "text": "let's take a look at the tutorial itself"
      },
      {
        "start": 43.559,
        "duration": 6.721,
        "text": "there are four examples here and each"
      },
      {
        "start": 46.68,
        "duration": 6.48,
        "text": "one has three main steps create a"
      },
      {
        "start": 50.28,
        "duration": 4.5,
        "text": "deployment package create a function and"
      },
      {
        "start": 53.16,
        "duration": 6.0,
        "text": "test the function"
      },
      {
        "start": 54.78,
        "duration": 5.52,
        "text": "let's look at the python SDK egg SDK"
      },
      {
        "start": 59.16,
        "duration": 5.399,
        "text": "example"
      },
      {
        "start": 60.3,
        "duration": 7.139,
        "text": "they diploma deployment package is a ZIP"
      },
      {
        "start": 64.559,
        "duration": 5.581,
        "text": "file with a function source code and"
      },
      {
        "start": 67.439,
        "duration": 6.18,
        "text": "dependencies it's quite straightforward"
      },
      {
        "start": 70.14,
        "duration": 6.18,
        "text": "to create the most interesting part is"
      },
      {
        "start": 73.619,
        "duration": 7.221,
        "text": "of course the source code of the"
      },
      {
        "start": 76.32,
        "duration": 8.76,
        "text": "function so here we Define c variables"
      },
      {
        "start": 80.84,
        "duration": 6.52,
        "text": "for Astra database ID region and"
      },
      {
        "start": 85.08,
        "duration": 4.859,
        "text": "application token and I will show you"
      },
      {
        "start": 87.36,
        "duration": 5.0,
        "text": "later where to find that information on"
      },
      {
        "start": 89.939,
        "duration": 5.521,
        "text": "the Astra website"
      },
      {
        "start": 92.36,
        "duration": 6.399,
        "text": "these variables we get the values from"
      },
      {
        "start": 95.46,
        "duration": 5.94,
        "text": "the environment variables and this can"
      },
      {
        "start": 98.759,
        "duration": 4.021,
        "text": "be will be configured later in when we"
      },
      {
        "start": 101.4,
        "duration": 5.46,
        "text": "create the function"
      },
      {
        "start": 102.78,
        "duration": 8.04,
        "text": "we create Astra HTTP clients and we have"
      },
      {
        "start": 106.86,
        "duration": 7.56,
        "text": "Lambda Handler which it gets executed"
      },
      {
        "start": 110.82,
        "duration": 6.479,
        "text": "each time we invoke our function"
      },
      {
        "start": 114.42,
        "duration": 5.4,
        "text": "so what this function does it simply"
      },
      {
        "start": 117.299,
        "duration": 6.661,
        "text": "retrieves one Valor"
      },
      {
        "start": 119.82,
        "duration": 5.88,
        "text": "one row from from the database and that"
      },
      {
        "start": 123.96,
        "duration": 5.7,
        "text": "row has"
      },
      {
        "start": 125.7,
        "duration": 7.8,
        "text": "a key local and it's from table local"
      },
      {
        "start": 129.66,
        "duration": 8.939,
        "text": "and key space system so this is the rest"
      },
      {
        "start": 133.5,
        "duration": 8.16,
        "text": "API call here and we do it with just one"
      },
      {
        "start": 138.599,
        "duration": 4.701,
        "text": "column SQL version and we return that so"
      },
      {
        "start": 141.66,
        "duration": 4.56,
        "text": "it's pretty simple"
      },
      {
        "start": 143.3,
        "duration": 5.799,
        "text": "function once we create this deployment"
      },
      {
        "start": 146.22,
        "duration": 7.26,
        "text": "package we can create a function through"
      },
      {
        "start": 149.099,
        "duration": 7.201,
        "text": "the web UI and here is we specify the"
      },
      {
        "start": 153.48,
        "duration": 5.16,
        "text": "name of the function the runtime and"
      },
      {
        "start": 156.3,
        "duration": 6.78,
        "text": "most importantly we upload our"
      },
      {
        "start": 158.64,
        "duration": 7.679,
        "text": "deployment package and we get to the"
      },
      {
        "start": 163.08,
        "duration": 5.22,
        "text": "screen that looks like this we do Define"
      },
      {
        "start": 166.319,
        "duration": 6.961,
        "text": "on the configuration tab we do Define"
      },
      {
        "start": 168.3,
        "duration": 6.78,
        "text": "these variables for ID region and token"
      },
      {
        "start": 173.28,
        "duration": 4.08,
        "text": "and"
      },
      {
        "start": 175.08,
        "duration": 4.439,
        "text": "after that we can deploy the function"
      },
      {
        "start": 177.36,
        "duration": 6.0,
        "text": "and test it"
      },
      {
        "start": 179.519,
        "duration": 5.701,
        "text": "and for Java grpc the process is similar"
      },
      {
        "start": 183.36,
        "duration": 4.8,
        "text": "the language is different the libraries"
      },
      {
        "start": 185.22,
        "duration": 5.939,
        "text": "are different but it's there are still"
      },
      {
        "start": 188.16,
        "duration": 6.24,
        "text": "the same three variables there uh there"
      },
      {
        "start": 191.159,
        "duration": 5.881,
        "text": "is a still uh query that retrieves that"
      },
      {
        "start": 194.4,
        "duration": 6.18,
        "text": "SQL version but this time it is"
      },
      {
        "start": 197.04,
        "duration": 5.52,
        "text": "expressed using cql or Cassandra query"
      },
      {
        "start": 200.58,
        "duration": 3.659,
        "text": "language so it's different way to"
      },
      {
        "start": 202.56,
        "duration": 4.38,
        "text": "interact with the database different"
      },
      {
        "start": 204.239,
        "duration": 7.201,
        "text": "language but the process is very very"
      },
      {
        "start": 206.94,
        "duration": 7.56,
        "text": "similar and the the process of creating"
      },
      {
        "start": 211.44,
        "duration": 6.0,
        "text": "a function is again through the"
      },
      {
        "start": 214.5,
        "duration": 7.319,
        "text": "uploading this package"
      },
      {
        "start": 217.44,
        "duration": 8.159,
        "text": "okay so this is the uh"
      },
      {
        "start": 221.819,
        "duration": 6.84,
        "text": "the dashboard of uh the Astra website so"
      },
      {
        "start": 225.599,
        "duration": 5.521,
        "text": "here I have my databases and the one"
      },
      {
        "start": 228.659,
        "duration": 5.041,
        "text": "that I'm using is the first one which is"
      },
      {
        "start": 231.12,
        "duration": 5.94,
        "text": "a function as a service Astrid B"
      },
      {
        "start": 233.7,
        "duration": 5.7,
        "text": "and this is how you find information for"
      },
      {
        "start": 237.06,
        "duration": 5.819,
        "text": "this database so this is database ID"
      },
      {
        "start": 239.4,
        "duration": 5.52,
        "text": "that you will need you can also create"
      },
      {
        "start": 242.879,
        "duration": 5.94,
        "text": "generate a token"
      },
      {
        "start": 244.92,
        "duration": 6.599,
        "text": "and copy it and keep it in secret"
      },
      {
        "start": 248.819,
        "duration": 5.7,
        "text": "and you can also click on the database"
      },
      {
        "start": 251.519,
        "duration": 6.12,
        "text": "and find the region So This Is Us East"
      },
      {
        "start": 254.519,
        "duration": 6.481,
        "text": "one in Google Cloud so this database"
      },
      {
        "start": 257.639,
        "duration": 6.78,
        "text": "this database runs in Google cloud and"
      },
      {
        "start": 261.0,
        "duration": 7.979,
        "text": "we will be working with it from uh using"
      },
      {
        "start": 264.419,
        "duration": 6.121,
        "text": "AWA AWS function"
      },
      {
        "start": 268.979,
        "duration": 4.401,
        "text": "um"
      },
      {
        "start": 270.54,
        "duration": 2.84,
        "text": "what else"
      },
      {
        "start": 274.08,
        "duration": 6.0,
        "text": "and you can of course you can create new"
      },
      {
        "start": 276.419,
        "duration": 5.941,
        "text": "database or use existing one it doesn't"
      },
      {
        "start": 280.08,
        "duration": 3.96,
        "text": "matter we don't need to create tables or"
      },
      {
        "start": 282.36,
        "duration": 3.899,
        "text": "insert something because we're using"
      },
      {
        "start": 284.04,
        "duration": 6.54,
        "text": "system key space which is standard for"
      },
      {
        "start": 286.259,
        "duration": 7.201,
        "text": "all databases enough said I have these"
      },
      {
        "start": 290.58,
        "duration": 6.38,
        "text": "two functions deployed let's look at"
      },
      {
        "start": 293.46,
        "duration": 7.28,
        "text": "python SDK first"
      },
      {
        "start": 296.96,
        "duration": 8.76,
        "text": "this function and the other one as well"
      },
      {
        "start": 300.74,
        "duration": 8.56,
        "text": "triggered every 60 seconds every minute"
      },
      {
        "start": 305.72,
        "duration": 7.84,
        "text": "by that's defined by the rule in event"
      },
      {
        "start": 309.3,
        "duration": 6.6,
        "text": "preach and that will allows us to um"
      },
      {
        "start": 313.56,
        "duration": 5.419,
        "text": "look at some performance figures"
      },
      {
        "start": 315.9,
        "duration": 7.32,
        "text": "performance statistics for this function"
      },
      {
        "start": 318.979,
        "duration": 6.22,
        "text": "so you can see the code and you can you"
      },
      {
        "start": 323.22,
        "duration": 5.16,
        "text": "can change this code and redeploy the"
      },
      {
        "start": 325.199,
        "duration": 6.141,
        "text": "function as needed but I'm gonna Focus"
      },
      {
        "start": 328.38,
        "duration": 6.36,
        "text": "mostly on the performance"
      },
      {
        "start": 331.34,
        "duration": 5.62,
        "text": "uh for this function so let's take a"
      },
      {
        "start": 334.74,
        "duration": 5.34,
        "text": "look at the one hour performance let's"
      },
      {
        "start": 336.96,
        "duration": 5.36,
        "text": "let's enlarge this chart"
      },
      {
        "start": 340.08,
        "duration": 6.24,
        "text": "and you can see the range is between 100"
      },
      {
        "start": 342.32,
        "duration": 6.219,
        "text": "milliseconds and maybe and 140"
      },
      {
        "start": 346.32,
        "duration": 6.36,
        "text": "milliseconds or so"
      },
      {
        "start": 348.539,
        "duration": 6.181,
        "text": "uh so we can even look at the other"
      },
      {
        "start": 352.68,
        "duration": 5.76,
        "text": "metrics"
      },
      {
        "start": 354.72,
        "duration": 5.16,
        "text": "okay so in Cloud watch under Matrix we"
      },
      {
        "start": 358.44,
        "duration": 3.66,
        "text": "can"
      },
      {
        "start": 359.88,
        "duration": 4.86,
        "text": "Define"
      },
      {
        "start": 362.1,
        "duration": 5.52,
        "text": "and we can see the minimum average and"
      },
      {
        "start": 364.74,
        "duration": 5.76,
        "text": "maximum but the average is probably not"
      },
      {
        "start": 367.62,
        "duration": 5.46,
        "text": "the most useful statistics here so let's"
      },
      {
        "start": 370.5,
        "duration": 6.78,
        "text": "look at P95"
      },
      {
        "start": 373.08,
        "duration": 4.2,
        "text": "so 95 of"
      },
      {
        "start": 377.759,
        "duration": 8.22,
        "text": "within so for one hour range 95 of our"
      },
      {
        "start": 382.08,
        "duration": 7.26,
        "text": "requests complete under one"
      },
      {
        "start": 385.979,
        "duration": 6.72,
        "text": "29 milliseconds okay"
      },
      {
        "start": 389.34,
        "duration": 7.38,
        "text": "so this is pretty good performance Let's"
      },
      {
        "start": 392.699,
        "duration": 8.12,
        "text": "uh take a look at the"
      },
      {
        "start": 396.72,
        "duration": 4.099,
        "text": "uh Java grpc1"
      },
      {
        "start": 402.72,
        "duration": 4.08,
        "text": "okay"
      },
      {
        "start": 404.699,
        "duration": 4.321,
        "text": "so you cannot see Source codes because"
      },
      {
        "start": 406.8,
        "duration": 5.22,
        "text": "the package is too large larger than"
      },
      {
        "start": 409.02,
        "duration": 7.7,
        "text": "three megabytes and in line"
      },
      {
        "start": 412.02,
        "duration": 4.7,
        "text": "uh code editing is disabled"
      },
      {
        "start": 417.9,
        "duration": 7.079,
        "text": "so in terms of metrics we do have one"
      },
      {
        "start": 421.62,
        "duration": 9.0,
        "text": "outlier here let's look at the metrics"
      },
      {
        "start": 424.979,
        "duration": 5.641,
        "text": "uh right away let's define P95"
      },
      {
        "start": 439.44,
        "duration": 4.92,
        "text": "okay"
      },
      {
        "start": 441.36,
        "duration": 3.0,
        "text": "P95"
      },
      {
        "start": 445.74,
        "duration": 8.28,
        "text": "so 95 of our function invocations"
      },
      {
        "start": 449.58,
        "duration": 6.899,
        "text": "complete in 55 under 55.6 milliseconds"
      },
      {
        "start": 454.02,
        "duration": 3.679,
        "text": "and the The Fosters the best performance"
      },
      {
        "start": 456.479,
        "duration": 3.78,
        "text": "is"
      },
      {
        "start": 457.699,
        "duration": 6.101,
        "text": "25.9 milliseconds which is pretty good"
      },
      {
        "start": 460.259,
        "duration": 6.72,
        "text": "and you can do even better with drivers"
      },
      {
        "start": 463.8,
        "duration": 5.64,
        "text": "with Java driver python driver and you"
      },
      {
        "start": 466.979,
        "duration": 6.181,
        "text": "can do additional optimization right now"
      },
      {
        "start": 469.44,
        "duration": 8.58,
        "text": "our we we deploying the the database in"
      },
      {
        "start": 473.16,
        "duration": 7.62,
        "text": "Google cloud and we have AWS functions"
      },
      {
        "start": 478.02,
        "duration": 5.1,
        "text": "um so it two different Cloud providers"
      },
      {
        "start": 480.78,
        "duration": 7.08,
        "text": "of course we can use we can deploy"
      },
      {
        "start": 483.12,
        "duration": 7.019,
        "text": "database in AWS or we can use Google"
      },
      {
        "start": 487.86,
        "duration": 5.7,
        "text": "Cloud functions and we have tutorial and"
      },
      {
        "start": 490.139,
        "duration": 5.221,
        "text": "video for that as well and with that"
      },
      {
        "start": 493.56,
        "duration": 4.8,
        "text": "thank you for your attention"
      },
      {
        "start": 495.36,
        "duration": 3.0,
        "text": "foreign"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-15T18:37:07.064326+00:00"
}