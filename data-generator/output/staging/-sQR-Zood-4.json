{
  "video_id": "-sQR-Zood-4",
  "title": "Cassandra Meetup with Yelp at BluePrintLdn!",
  "description": "We are excited to be hosting a Cassandra Meetup at BluePrintLdn, and hope to see lots of our community there! Join the DataStax Meetup on 10th March at 5:00pm to hear from the Database Reliability Team at Yelp! Yelp is a long term user of Apache Cassandraâ„¢ with dozens of clusters used by dozens of teams, so they know a thing or two about managing big Cassandra deployments in production.\n\nREGISTRATION FOR THE ENTIRE BLUEPRINTLDN CONFERENCE IS FREE!! They are some awesome tracks -- register here https://blueprintldn.com/\n\nðŸš€ ðŸš€ ENJOY !! ðŸš€ ðŸš€",
  "published_at": "2021-03-10T18:25:41Z",
  "thumbnail": "https://i.ytimg.com/vi/-sQR-Zood-4/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "conference",
    "cassandra",
    "database",
    "apache_cassandra",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=-sQR-Zood-4",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] on the same page [Music] hello everyone if you can see us if you can hear us please let us know and set the thumbs up in the youtube chat so we will be so happy to see you here today there is a meetup prepared by datastocks with help of our great yelp people and as a part of a blueprint london virtual event happening actually today and i have to introduce you our special guests uh but before i will not do that as long as i don't see any hello thumbs up in the chat let's warm up a little bit okay hey dennis thank you and that's incredible to have you here today we have dennis gosnell uh that's a very big pleasure for us to see so uh i'm alex volchniv developer advocate at data stocks uh but my role today is very simple i'm only to introduce you those who really matter today those who will speak about the things those who will make their great presentation and showing so many incredible things we are going to see all together i'm excited to be here today i hope you are too so let me introduce isel alex and binoa from yelp and hello everyone say something hey hi how are you yeah good so hello yeah could you please introduce yourselves hazel used yep hey everyone i'm isel i'm a technical recruiter at yelp and i'm here to talk about the open positions that we currently have great and you know what that what really matters in every project it's always about people technologies great team even with not the best technologies can build great products and like not so great team even with the best of technologies may build not so great projects so here today we speak about great technologies and also yelp hiring great people so i still will have a moment for that and alex who are you and what do you do at help uh hey folks um so yeah my name is alex i'm a software engineer at the database reliability engineering team um yeah i've been part of yelp for about four years now uh and today i'll be talking about the stargate at yelp okay yeah so stargate is a new new for most of the visitors of today's talk so you are going to learn something new what really extensive possibilities of apache cassandra or data strikes enterprise today we speak about apache cassandra and benue who are you and what do you do hey uh so i'm benua uh i'm french i live in boston and i work for the dre team at yelp same team as alex and today i will be presenting to you how we do schema changes uh and and the lessons we've learned develop um like deploying a new a new system to handle kissinger's commentations that yelp that's a really great and very interesting topic you know i work as a developer advocate with apache cassandra first of all and really a lot of people ask like how do you manage shaman changes really a lot that's every workshop i get this question um so i can't wait uh you are going to speak uh you are last definitely not released today in the list so please stay till the end that's definitely something what deserves your attention so i think we can start and i'm going to switch to the first part that's for a few minutes isil will take our attention to show what are the hiring options now today at yelp okay so give me a moment we are switching good either so they're all yours um i am here to talk about our open positions at yelp however before that i wanted to introduce myself briefly and just say a little bit about what excites me to work at yelp so i'm isil i'm a technical recruiter i've been helping uh grow teams within engineering in uk and germany i've been at yelp for over a year now and there's a few things actually that excite me to work at yelp however i would say if i had to highlight the main two that would be people and culture i'm very uh happy and lucky to be working with amongst intelligent and supportive and kind people that motivate me on a daily basis and help and push me to grow further and um i also really like the culture at yelp and uh one of the things it promotes which is one of its core values is playing well with others treating people with respect and encouraging collaboration so that's about me um and here's why how why other people want to work at yelp so yelp enables us to fuel professional growth meaningful opportunities so people can engage in learning programs and obviously have a rich culture of diversity and inclusion and with over 14 yelp groups across the company there's a place for everyone at yelp to feel included so now in terms of hiring uh we are hiring for multiple roles as you can see here so we're hiring for data back and engineers site reliability engineers database reliability engineers applied scientists and data scientists machine learning engineers and engineering managers these are just some roles amongst others that we have currently we are hiring in the uk um and um to also a note that we are hiring across all the cities in england so there is an opportunity to work fully remote from any parts of england don't have to necessarily be based in london if you are based in london then we do also have an awesome office based on liverpool street that we will be going back into but no matter whether you choose to work fully remote or from an office you will be also part of a dynamic environment and an exciting team and of course participating in our regular hackathons and off sites virtually at the moment so um i guess um get in touch have a look at our website um on the careers page so yelp.com careers you can also email me directly if you have any uh questions however you can go on the careers page have a look at the roles and apply and we'll be in touch and that's all for me great thank you so what's uh comes next next comes alex and we've it comes not alone but he comes with stargate so uh if you don't mind uh mind either i would ask you to switch off your shared screen and we have to ask alex to share his and we are about to start all right let me share my screen so your camera is on and now we are waiting for your screen but don't worry no pushing while we are waiting for the screen uh how long do you work with apache cassandra all right uh yeah your screen is live uh all right yeah i had some technical difficulties but now i'm back online uh yeah um thanks for tuning in folks so today in this talk i'll be sharing with you an ongoing project at yelp that we started earlier this year which is one of the highest priority projects at yelps infrastructure world this year and the project aims to mainly replace one of the most critical services at yelp with an open source project that is called stargate and so hopefully by the end of the talk you'll know a bit more about services at yelp um you know certain challenges of integrating an open source project into a mature service oriented architecture and and possibly a few lessons on replacing the most critical piece of infrastructure at yale and in general i guess at a service at the end of the architecture and so let me let me just tell you a few words about myself um so my name is alex um i'm part of database reliability engineering team and our team spans uh three different um three different countries so we are in london san francisco and in hamburg and i'm personally working remotely from hamburg um remotely to the london part of the team and what what we do what our team does is we do essentially databases that help we maintain uh improve um all the data infrastructure related to databases at yelp so let me walk you through what's going to be happening today so i will tell you a little bit about our setup um of about history of cassandra at yelp um about our setup um i'll share just a few numbers few interesting numbers um and then i want to talk a little bit about the stargate itself um in in the motivation behind it why we chose uh to go with this open source project and sort of motivation behind a stargate um and then um i want to devote the bulk of our time to the actual migration progress sort of walk you through the steps that we did to do the actual migration to the project and so at the end there'll be just a few more slides about the future kind of steps and the q a so let's start with just a brief view of our of cassandra for those that are not familiar with the with this database it is essentially a distributed white column no sql data store and it is optimized for heavy write load and it has a very fine grain ability to tune consistency and uh just a few numbers few interesting numbers about our setup so we generally have about 90 billion cassandra queries per month so we run our production infrastructure and then generally entire infrastructure on on kubernetes and uh sort of like on average um our on average load we have about 60 cash under clusters and about 500 community spots deployed and in terms of the clusters that have the highest load reading right load our highest read load cluster is um sort of on average is about 600 000 requests per seconds and our highest right load is about 400 000 requests per seconds um so this is our production setup we also have obviously multiple environments with pretty much replicated setup but obviously fewer instances and kind of like a little lower load uh so let me give you just a bit of history of uh how we use cassandra at yelp so when we started about six or uh probably about seven years ago we had just one big monolith application and just a few services so when we deployed our cassandra clusters every service would um try to do the discovery of cassandra cluster on their own they used um different cassandra drivers which with merchants that with versions that didn't match with each other so it sort of resulted in a very hectic and a messy situation where the load on our cassandra clusters was not evenly distributed and the cassandra drivers were not properly supported by database reliability team so generally it was very kind of like a hectic situation and so naturally the next step was to introduce a proxy service an internal proxy service um called apollo so nowadays hundreds of developers that yelp um access cassandra clusters through um this proxy service and so that so the original idea of the service was very simple we wanted to isolate the complexity of accessing and managing the infrastructure from the future teams um and so you can so um what kind of allowed us to go even further is to um isolate different um instances of the polar um a portal layer so that for example we could isolate the services that has that have the biggest um business impact on yelp so for for example when a certain instance of apollo will go down um it doesn't impact the rest of the cluster um and so the kind of like advantages and the original idea was based on you know first is we wanted to isolate the this whole complexity of managing infrastructure and then on the future teams we wanted to let them um iterate on the query code a lot faster and so i'm referring to future teams um but that is essentially i'll be talking more about this in in kind of like future um but this generally i'm referring to any team at yelp that is working with cassandra as a client um but they're not concerned about the sort of underlying infrastructure of cassandra and so for these teams we wanted to make it easy to iterate on a query code and make it a lot faster um and on our site as maintainers of the infrastructure we wanted to iterate on the infrastructure itself a lot easier and faster so we wanted to replace you know the underlying infrastructure or bump the cassandra cluster version or even replace cassandra driver so all of this uh having a proxy allowed us to do all of these things but as time has passed and and for apollo fulfilled its role as a proxy um it is very successful and is used for about six years now um but it's sort of ballooned in this mini monolith and right now in 2021 um it serves about 140 different use cases across 40 different clusters and it costs about 60 000 lines of other teams business logic and integration tests and in addition um about 3 000 units that new interest have to be run every time we deploy apollo which we which happens about um several times a day and the service itself scale to hundreds of instances so generally um on on kind of like developer velocity side the um we also noticed that service becomes a liability um so for example when future teams need to write a simplest possible sql query to you know get the review content from uh from reviews table in cassandra and they would need to do a lot of steps so they would need to obviously write some you know python code write their client and the logic that actually executes the query they would also need to write unit and integration tests um they would also need to write swagger specs to kind of expose the the api and in a bunch of config values in fake data uh to kind of like rub wrap up the setup so that is a lot of boilerplate just to work with the simplest possible query to cassandra and so it became clear to us that the system needed a replacement an interesting story when i joined yale for the first time probably about four years ago i i was getting a tour around the office and i saw an engineer was writing this um schema on the whiteboard and this is probably the first time i actually saw apollo and it sort of remind me of my reaction ironically it reminds me of my reaction on my first day when i was thinking what is what is even going on what is this apollo uh and i also found out about uh cassandra that yelp is using cassandra on pretty much my first day from this schema on the whiteboard from this beautiful drawing you know so anyway so when we were considering the requirements for the cassandra uh proxy replacement there's primarily two things that we were looking at so first is we wanted to take uh the main advantage of apollo that is essentially isolation of complexity of accessing managing infrastructure for the future teams but at the same time we wanted to attack its main shortcoming we didn't want to have any client business logic exist in the service it should be actually just a simple thin layer on top of cassandra and kind of further um further side effects that we wanted to have is obviously we wanted to improve the developer velocity um so that engineers don't have to write as much code as much boilerplate to just run as simple as possible query on cassandra cluster and we wanted to also simplify the access to the cassandra cluster um engineer we have uh modernize our technology um because um apollo has been in production for about six or seven years now um and it's about time to do the modernization so this is how we found out about stargate project so you can generally think of stargate as an api for your database it is really just a layer between your application and the database and it's implemented and used in production by data stocks and the organizer of this midas so let me walk you on um going kind of like a little bit deeper on into how this actually works is you can think of on a very high level about cassandra cluster as a set of nodes that are organized in a ring and so when a request comes in one of the nodes is selected as coordinator and its role is basically to manage the entire life cycle of the request and among other things it should select the proper um proper replicas of proper nodes that have the copy of the data query them gather the guided reply and send it back to the client so stargate is based on this um on this concept of coordinator node and it's sort of sort of very similar to you know fat client notion um but it generally means when the target is deployed it joins cassandra cluster as a coordinator node um but the important distinction is it doesn't store any data and so this allows us to have a very interesting setup so sort of side effect of this is we could ideally scale up this compute layer the stargate independently of the storage layer um and generally on a very high level uh sort of like a high level architecture is um it joins the the cluster as a coordinated node but at the same time it also exposes a set of apis for the easier access of future teams and most notable ones are you know a rest api and graphql api um and we went with graphql api and let me let me just walk you through the kind of like a few reasons why we chose to go with the graphql so graphql api is basically allows us to have a type save api right it solves an interesting problem kind of very common problem of over and under fetching of the data it allows graphql allows feature teams to define the exact fields that needs to be returned sort of solving this problem very naturally and at the same time it also allows to run multiple queries in one atomic request sort of like an atomic fashion um for example when we want to keep multiple views of the same data on or we want to update multiple tables at the same time uh avoiding avoiding the network round trips and saving the latency obviously and we also can have custom formatters defined so for example we could have a custom date formatting custom text transformation for example we could have uh numbers formatting all of all of the all of it done kind of like on on the client side um and it would be a lot more harder to achieve with the crude interface with the rest api um and generally finally graphql is becoming a new standard for api development and it's used extensively um right now at facebook twitter github um as well as yelp we've been using help we'll be using graphql for quite some time now and there's already a lot of feature teams that um kind of get used to you to using um graphql and so we assume that the transition to graphql based api is going to be a lot easier for the future teams and so let me tell you a little bit about our progress so far um so we give it kind of like break broke down our um transition internal transition from apollo to stargate into several steps so we essentially started with just a simple mvp deployment of one cassandra note and then we did a few interesting tweaking to certain aspects of the deployment right so we looked at the client libraries essentially a way of uh is this a way how um uh services interact with each other in yelp's ecosystem um so we did a bit of tweaking to graphql playground i'll i'll share a few interesting tips there um and then finally we did a few interesting developments on the testing and a probability side of things so before we even start any deployment we kind of wanted to look at the stargate and understand what are the limiting factors in setting up this uh this kind of like thin layer how does the resources scale as we scale our service um is it stable are there any crashes memory leaks are there any resource limitations and so we did this very basic simple mvp deployment setup with just a single stargate node that joined a test cassandra cluster with three separate replicas it had a uh so we ran 100 threads and we were trying to keep the load um up to 3000 requests per seconds on the cluster um and there's a few scenarios right so we were keeping the load for 24 hours kind of continuously and we wanted to test how the target would behave if we would do the rolling restart of cassandra cluster and what if we do the restart of the instance itself and we also looked at the authentication token expiration in the target node itself so basically what's going to happen if the authentication token expires is going to start running throwing errors or you know latency is going to spike up and so you can see on the graph kind of like the result of our test is um we were gradually increasing the load on a cluster and we kept it at around 3000 requests per second for the majority of the day and in terms of latencies we kind of feel that the latencies are in a very acceptable range um you can see that then you know the high tail latency spiked a little bit um at the end um but we did a bit of jvm tuning to bring this latencies down a little bit um so we kind of reuse the cassandra uh settings uh just under jvm settings there and so as a result of of the deployment we we kind of understood that the memory is generally stable there are no leaks uh the cpu load is increased with the amount of throughput that we have the way that we put at the system um as i mentioned we also did a bit of tuning to the jvm to that decrease the high latencies a little bit uh and so about the authentication talking we noticed that when it it has expired the latencies spiked immersively because the servers just started erroring out and what we did is we basically disabled authentication token in favor of a more sort of sophisticated authentication uh strategy which i will cover a bit later in the sort of future work uh uh area and and then in the end we automated the entire benchmarking setup so that we can run the setup at any given moment um you know going forward as we do more development to the stargate as we do the migration of clients so let me tell you a little bit about the client libraries so services at yelp um generally communicate with each other not through directly managing you know http queries and responses so we use um client libraries and so our current approach is to generate automatically generate client libraries from uh swagger specs um and so this is what we decided to do with the stargate we decided to kind of like leverage this um mature uh mature infrastructure mature client lib infrastructure at yelp to also generate automatically generate the client leave for the stargate and our swag spec looked something very close to to this uh code um we basically exposed a single endpoint where client can give key space that they need to access and the sort of the body the actual graphql request and on the client side um they so the client the future teams when they work with a stargate they work with a service as if it's any other service in yelp's ecosystem so what they really need to do is to just import the library um call the call the endpoint and pass their um quitting and get the result back so very kind of like very simple sort of reminds you of just querying the local package um so you don't even know that the network request goes um underneath and kind of like having utilized this mature infrastructure gave us a few out of the box interesting kind of like properties um so clients have automated service discovery of the stargate instances they don't need to you know directly write down the host and part of the instances the discovery is done automatically we were also able to have a very granular control of the request budgets and the propagation of distributed tracing headers so that we could integrate a stargate into our distributed tracing infrastructure and generally um with the client clip you have out of the box client-side observability metrics available to you and so we were able to integrate that in our kind of like metrics dashboards so in terms of graphql playground um when clients want to iterate on their queries the easiest and most sort of widely adopted way of doing this is through a playground it's essentially a graphical interactive in browser ede so we did uh so when you um work with a graphql playground stargate gives a few interesting things out of the box you could um press on a schema or docs on the right corner and you can see all the available operations that you can do on a selected key space you know you can add the table drop the table or run the particular query mutation so like everything that you probably need to construct your query is available right there in the ide uh and we did a few interesting uh tweaks to kind of like improve the setup so we in order to limit the possibility um to run a very damaging and possibly costly queries we only made playground available in developing environment and disable that completely in production and we also disable the ability to run schema table related queries for example it's not possible to create a table to create a key space or destroy key space through a playground on production and the way we do it is a sort of a very interesting topic in itself and binola we'll share a little more about it in in the next topic in the next talk and another interesting tweak that we did is um when client run their query uh graphql query um they usually get the response back in sort of json format right um and we also added um the actual secret query that the original graphql query was translated to so that clients can't have visibility into what is actually happening underneath what is the actual query that is being run by stargate so in terms of testing um traditional union testing is a relative state form from the upstream service point of view stargate service is just no different than any other service python service in the ops ecosystem um so like all the best practices involving you know mocking fixtures are applied to our servers as well um so joining that yelp we use you know pi test and python mock libraries to do the mocking of our service calls a more interesting thing is integration testing and as opposed to just pure unit testing which is entirely self-contained in within a project and working with acceptance testing raises certain challenges um just because of the number of real external components that um a test rely on so in our setup we uh use an internal tool at yelp that replaces docker compose that we kind of call you know yield compose uh and uh the original idea of the tool is to just simplify the sort of discovery and the mark making service dependencies a lot easier to handle for the future teams let me just walk you very quickly with a simple example of how can this be done so when um developers start working with guild compose they really only need to know four commands how to start their playground how to how to build how to start it how to get a status of their playground and how to stop it after they're done and so it's a simple example imagine we have a very high level service business details and we want to write an integration test uh kind of like end to end so um when we want to actually test end-to-end environment we need to know all the services all the downstream services that are being called by the service that we want to test and it's usually extremely complicated to know the entire request lifecycle um so what we do is we allow each owner of the of the service to define their own yield couples dot yaml file where they essentially point to a docker file um that that shows how to build their service and when each service has um this file exposed um when you run your playground the yelp compose will recursively look through uh through the files and it will um recursively build like the one giant yield compose file and build the environment out of it so that means that when you want to test your service you only really need to know first level dependencies um in our case it's just user reviews and special offers as examples so that simplifies a lot on kind of like testing side of things so there's a few more interesting things that we need to kind of bootstrap the clients when they work with stargate so we created two simple files one is um the one that would create a test key space and another that would create a test table um that would populate um stargate on start so when yelp compost starts our service this is what is happening very roughly um we essentially start the actual stargate instance um we wait until it's healthy and it's up and once it's up we run the queries that we defined so we essentially bootstrap um by running uh you know creating a key space creating a table so that by the time yield compose environment is up and when client just starts uh the environment with you know ycp start they already have the key space running they already have the table inside and all they need to do is to just focus on um their business case they're they're kind of like testing the the actual business logic and not care about any kind of cassandra internals so we hope that will really simplify simplify the process of writing integration tests for the clients so on operability side of things um we did a few a few interesting tweaks here and there um i won't go into much more details of every single point but generally we did a few interesting things so we integrated the stargate in our distributed tracing infrastructure so that clients can have an easier way to have visibility into the timing of the requests uh you know look at the latencies of how how long each uh request to the stargate takes then we also exposed the actual stargate metrics for the better observability um you know the actual load the cpu load the memory uh load on on the cluster um and since stargate joins cassandra cluster and works as coordinator node it also exposes the standard cassandra metrics as well so the very nice side effect is we were able to look at the cassandra matrix and stargate metrics sort of in parallel and compare the the results we also did a bit of tweaking to uh the error logging um so that we can integrate with our error dashboards and we added just a you know internal tls setting uh for a bit of a you know security um and so in terms of the actual migration of the clients um there's a few important steps that we need that we did um to kind of like facilitate this process so so generally internal migration done in two steps so we started with just a better better step uh where we you know work on the steps that i did that i just mentioned you know working on the mvp working in the client libraries testing every ability and in parallel we were doing an initial set of conversations with future teams where we essentially identified just a few potential good candidates for the test migration and we were looking at really the complexity of the cases and the business impact um and by the kind of like when when things are ready when we are done with our milestones we wanted to do just a simple internal uh migration of one client um kind of like select the easiest case maybe like a simple select statement and try to migrate this to a graphql case so once we migrate the first client once we let it marinate in a production for a bit of time we go into a general availability internal general availability uh state where um we set a moratorium on the new apollo client so no code should be added to the apollo at that point um and we set the deadline on the migration of the existing up cassandra clients and the the drd team itself we wanted to prioritize a very high priority clients and clients that have you know the complex cases where they have a lot of business logic that exists in apollo where um the business impact is very high um yeah so and then in terms of future work and there's a few areas that we wanted to attack uh that that sort of uh right now are in more of a planning phase um obviously we need to spend quite a bit of time on the security and authentication part of things um the only kind of authentication that was available to us by default is just the token and we disabled that in favor of more you know role-based i guess authentication setup we also wanted to work on the business of queries um to avoid running uh to kind of like have more visibility into um what are the queries that are being run uh and a few for a few different other reasons um and then we also wanted to make a few improvements to the client library um to have you know the comparison when we want to do the dark long to our clients once you do the comparison between you know the uh status quo response and the new response from graphql to to kind of confirm that we're not doing damaging things and actually finish the client's migration part uh yeah that's pretty much it uh pretty much what i wanted to share with you um thank you very much for your attention uh i'll uh yeah thank you very much uh great alex uh thank you so much that's kind of unique moment we have two alex's at the screen some replication factor on alex so uh before we proceed and i will ask i will read some questions from the chat i wanted to ask you said what you have how to discovery for stargate notes and how do you do that so what's at this side yeah so let me go so essentially yeah so apollo thing is um as i mentioned it's just a proxy service just a service that exists uh on top of cassandra cluster um let me actually go back to the slide i think the slide will actually demonstrate it really well yes uh okay hold up okay there you go so uh so this is what i pretty much mentioned at the very beginning so when um there's no sort of proxy by default every service that exists in yelp would try to access a separate cassandra cluster and that results in a very sort of messy situation right um and so what we have right now is apollo is essentially a cassandra proxy service it's a service that lives um you know on top of cassandra cluster that is deployed separately and that simplifies a lot of a lot of things on our side and there's a few reasons why we did that you know we wanted to isolate the complexity um make it easier to iterate in query code and make it easy to rate the iterated infrastructure so this is pretty much the thing that we're actually replacing let's see great uh so question on the youtube chat from uh vinod sankar uh how do you handle large partitions in cassandra also can you give an estimate on how big is your largest partition in production so this uh so i cannot really tell out of the box or from the top of my head uh it's sort of a an interesting question but it feels a little little out of the scope of the document uh let me let me get back to you maybe after after the talk um i'll need only to double check it's sort of uh an interesting question that i don't i don't have an answer from the top of my head yep i would say uh from my at least point of view there is only one proper way to deal with a large partitions do not create them by proper data modeling uh i wouldn't suggest anything better than data modeling indeed so i'm trying uh a question about the cluster you were testing stargate a question was is your cluster multi-data center but i guess answer is no because it's an mvp and test cluster so our current um cassandra the actual cassandra setup the cassandra clusters that run kubernetes um they are um we have a few uh that is data centers uh we have two big ones um so yeah um but the in in the apollo setup that sort of like the service that exists on top of it we actually deployed um in two big regions yeah uh but the the the sort of the mvp the stargate is obviously we just deployed an mvp uh it's very early to say how it's going to how the setup is going to look in the future okay and finally i mean introducing the data api layer like stargate or apollo that's actually a pretty big job so you are putting a lot of effort into that um my question is what do you think the biggest benefit for developers developing application developing your project and what's the biggest benefit of using these data api for the business you run because those points of view are usually a little bit different so well as i said there's a few sort of big benefits right so there's obviously a benefit on the client side they um they can run their there's a sort of like developer velocity improvement big one right so they don't have to write as much boilerplate code there's a lot of site there's a lot of improvement on like beneficial improvements on our site as well um because we don't have to support uh as much of infrastructure load so the the layer becomes a very thin sort of layer and that translates well into a business i guess business perspective right because um because if the developer velocity um increases then we're able to ship things faster we're able to shin ship things a lot kind of like more reliable in a more reliable way and on infrastructure side as well um right now with apollo we have an interesting situation when um it's sort of like it ballooned to do this big size and when one part of the service goes down and the blast radius can take a few other services you know down with it and so when we have a stargate when you have a thin layer uh kind of like more reliable uh thin layer instead of apollo that obviously simplifies a lot of things on our side as an infrastructure team we can invest more time into you know other features that are beneficial for the clients and that kind of like goes back into the loop that clients are able to like future teams are able to ship things faster um so i would say just having this project in itself it's a lot of effort but it but it generally translates well into like all sides of the all sides of the organization and on the future team so infrastructure part and the business itself okay so uh two last questions but already uh pretty briefly because we're a little bit out of time and we have to keep some time for benue uh so first question stargate offers not only graphql but also rest api and document api what do you think are you going to use them or those aren't so interesting to you that's a good question um we did consider at the very beginning uh we kind of like look at the possible options and we decided to go single-handedly with just uh graphql rest api is something we did consider uh but as of now graphql is sort of the only focus that we have and we want to make our infrastructure so like support this use case as much as as good as possible i guess okay and last question anyway no more uh questions regarding that on youtube chat so um stargate is an open source uh project but frankly speaking i just don't know if uh yelp was involved into the direct development of stargate so but my question is not about the past myocash question is more about the future what do you think about the participating in the stargate as an oss project it's a good question uh i think it's more of a business i guess a related question uh but let just to tell you a little bit from from my experience of the kind of like past few months of working with it with the repo we generally like very work very closely with the development team um so the development team always is very open to answer any or questions we did submitted a few kind of like issues that we that we encountered and we also did submit a few minor improvements to the actual open source project and internally we keep the fork of the project and we try to merge the the higher high you know upstream changes kind of like regularly uh so it's hard to say how the setup is going to look like in the future um but right now it's sort of like we we keep the fork and we uh you know uh from time to time when we discover an issue we submit the issue to the to the github and we try to resolve it if possible um ourselves great thank you so much uh that's incredible and i'm happy to see how this project grows and develops over time and i guess your experience to share it today will help many more people to give it a try and take a look how useful it could be how in how could it increase their developer velocity and that was alex shiroka from yelp and we are going to introduce benoit with the next talk so benoit could you please share your screen and alex is going to switch off his i be noah could you please turn on the camera yeah perfect and yes your screen is live you are live and wait a second say it again one two one two can you hear me you are live okay screen live uh sound life let's start okay so let's talk about how we do schema changes first of all the obligatory introduction slide and since i'm a parent you get to see a photo of my child let's get that out of the way right now uh about me so i'm been at yelp for eight years uh i'm part just just like alex i'm part of the dre team the the nosql side of it i work remote from boston and i've been doing so for a couple of years so before it was cool uh and then my latest hobby is that i've as of this year i've tapped my own maple trees in my backyard and i've i'm boiling my own maples here all right overview of the talk i'm going to tell you how we used to do schema changes at yelp and and why there were what what the issues were with the with the pure system uh we we changed to a new system and so i'm going to explain to you how developers uh submit and apply a schema change then i'll give you an overview of how the new system works and i'll finish with some lessons learned there are some positives and some negatives first of all a little definition uh i'm going to use the term push plan which is specific to yelp a push plan is used to be a text file that contains just a set of written instructions for an engineer that is deploying code usually to production to apply before during or after deployment this could be config changes or most often were schema changes and so we kept that term and you'll hear you'll hear me refer to it throughout this talk and when you hear push plan you can really just swap it with schema change it's pretty interchangeable so uh for preparing for this talk i looked a little bit of the the stats uh in terms of to to try to give you an idea of like what's this how many schema changes we do so over the past six months we've we do about 15 push plans per month uh knowing that a push plan could be several different sql statements these were written by 35 different developers on many many different teams and were applied to 15 different cassandra clusters which can exist in five or so uh environments so we have a development environment several staging environments and finally a production environment so before uh all of our schemas for all of our cassandra clusters were stored in a git repository and on each cassandra node that we owned we had a process that was running in cron that would periodically verify that the schemas on the cluster actually match the schemas that were stored in the git repository if the schemas did not match the process tried to make the necessary modifications and if the process wasn't able to it would file a jira ticket to let us know that hey there is a mismatch and that manual action needs to be taken so there are several challenges with this approach and a lot of them stem from the principle of least surprise so this is straight from wikipedia the principal of his surprise says people are part of the system the design should match the user's experience expectations and mental models and as you'll see the expectations really didn't match didn't match and there were lots of surprises so first of all uh we didn't support auto table statements which is a pretty big problem in my opinion we could only the we could only the process that run on the on the consumer notes could only create tables or create key space and so anything else would need to be done manually and nothing would really tell developers that yes it was written in our documentation but who has time to read the documentation also the second point is that the developers didn't get any feedback if and when their schema changes were applied so a lot of times we would get like people coming in our slack channel and asking like hey i made a schema change an hour ago and i really don't i don't see it yet like is it still going like what's going on um and also the third point is the schema changes would be applied in a random order of environments so it's really just whichever process is up in the contab would pick it up and so the the schema change could be done in production before it was done in the development environment which is really not a good practice like we we should do the schema changes in increasing order of importance so starting your dev and then stage and then production and also we we suffered from a lack of context so this is an actual comment that i found in this git repository i removed the name of the developer because i didn't want to publicly shame them but this is really not a very good this is not a very good git comment message and it doesn't give any context about what the change that they're making like what what purpose does it serve it doesn't point to any like external resource that would enable us in one two several years to go back and figure out like how like what what this was about and talking about the review process we would only rely on human review so each each schema change would be reviewed by us dre members hopefully and we were the ones saying like hey your sql statement is probably not syntactically correct and may fail plus there was no actual mandatory review from the dre team so some schema changes could possibly go to production without without us looking at them and so it overall it was more work for us uh because we had to explain these surprises over and over again uh we had to go debug problematic schema changes not necessarily knowing where they were tried to be applied first and we had to do a lot of manual schema changes because auto table statements were not supported so we needed a better system and luckily for us we at that time we joined forces with the what was called the database team so the mysql team and and they had a system in place that uh that they used to do schema changes and we evaluated writing a whole new system to handle schema changes for cassandra but ultimately we decided to modify the existing like mysql system to make it a system that can handle schema changes for both bicycle and cassandra so before i explain to you how it works i'm going to to go step by step and explain to you how a developer would go and and start a schema change so first of all uh the the developer would uh clone this git repository which is called pushplan and on every one of our development box there is this uh utility called push plan which is used now to handle uh schema changes so a few interesting things to note uh so the the developer would start by creating a push plan um they gave the the database type interestingly uh the interesting thing is that there is a mandatory jira ticket field here so each what this means is that each schema change like has a mandatory ticket attached so we can always go back and uh read about the context behind behind the schematic and then you give it a cluster a key space and optionally a table and the result of this is that it creates in the right in the right path it creates an empty sql file where the developer can now write that sql so let's go write that sql we create a very simple table meetup.attendance and has two columns id and name so now let's transform the sql file into a push plan so the developer now uses the pushdown generate yaml command passes it that sql file and oh so we have a couple of validation errors the first one is that we have an unknown data type str is not a valve data type second one is i forgot to specify a primary key interesting thing to note here we added a message that contains a url to our internal documentation which goes into more details about why it failed and and in some cases will give will give details about like how how people should resolve these validation errors so uh turns out i'm a very bad cassandra developer so let's fix this schema uh and and add a primary key and change sdr to our chart let's try again and now the generate yaml command succeeds and what it does is it replaces this sql file with a yama file and let's go look at the content of the camel file so at the bottom there are two main sections metadata and the actual statement question statement section so the metadata there let's go through the fields so we have a unique push plan id so we can refer to any schema change by this unique id we have the requester run by is a field that we can set manually to manual and what this does is it would prevent the push plan to be applied automatically in some very rare cases we still want to to apply some push plans manually a time stamp uh version is a field that enables us to make breaking validation changes meaning that if we write a new validator that would make validation break for some previous previously existing schema changes we would bump the default version to plus one what that means is the higher the version number the more strict the validation will be and then the developer will open the pull request um get now a mandatory ship it from from one of us uh in dre and finally once they have that chip that [Music] positive review then they can merge their comment and then everything works automatically the the push plan is going to the the schema chain is going to be applied in increasing order of importance so first in our dev environment then your stages environment and then finally in production and for each of these environments the developer will be pinged on slack with the result of the the push plan so as you can see from this example this garbage uh pushpan oh which actually is that that is a mysql pushpan but it doesn't really it doesn't really matter it looks exactly the same for cassandra uh that push plan failed in uh the dev environment the developer also has a couple of options to go check the the result of the pushpan so we have the pushpan status command which gives uh brief information about like the status of a specific push plan in this case we can see that it succeeded in devon stage and it ended up failing in prawn and we have the pushpan history command that gives a little bit more detail about how a pushpan was run but more interestingly we can it allows us to list all the push plans that have been applied on a specific cluster we can also specify an environment um so that that's if we're trying to answer the question of like what change that could have caused this thing six months ago uh the pushpan history command would be a good a good tool to use to try to see if there were any schema changes that happened during that time so let's go into a little bit of a system overview um so we rely on a git repository uh which contains all the mysql and cassandra push plans the pushpan generator python package uh is installed on all of our development boxes um it has it has the pushdown command so pushbutton create pushpin generate yaml and so on and it does the automatic like the the validation of cassandra and and mysql pushpins we have the push plan execution service that is in charge of running workers that will apply schema changes again for both casino and mysql and the brains of the operation is the aws step function state machine so this really controls the execution of the schema change uh makes it so that we run from one environment to the next and all the statuses of push plans are stored in the back end my sql database so each push plan will be in that database with the status and and the time that they were run and the environment so going from left to right uh a push plan is started either manually the other dre tools command or automatically when the the comment is merged into master and then uh what that does is it's it's essentially starts the the state machine for the dave environment um the push plan execution workers uh will pick up the or pick up the push plan and attempt to apply it uh if it doesn't succeed then it fail and it will fail fast meaning other environments will not even be attempted if it's successful in dev then we'll go into we'll start another state machine for the next environment until we finish in the production environment and if it's successful then the push plan is going to be marked as successful so going a little bit deeper in the push plan execution worker logic there are a few steps a few things that the worker will check before even running the the sql statement um first of all we're able to ignore some environments within the pushpan i didn't i didn't show that in the yaml but you can add some yaml to say like hey i'd like to ignore the dev environment uh if that's the case then then this the worker will just skip the push plan um and i'll continue to the next environment um we'll also check if the cluster uh for this push pen actually exists in this environment so not all clusters exist in all environments um so we we do check that first and then finally it has a push plan with a similar push plan id already been complete in that environment this is really important because this ensures that we can only run a push plan a single time per environment like we don't want to have a case where we would run the same push plan more than once in in an environment and so once the worker finds out that yes indeed they should be running the the push plan he'll mark the pushpan as enqueued so this means like write that into the mysql database of the pushpan execution service it will acquire a zookeeper lock for this environment and cluster pair what this does for us is that it ensures that we only do a single schema change per cluster at a time we don't we decided that we didn't want to have more than one schema change happen at the same time once the zookeeper lock is acquired we'll mark the push planner started in this environment and we'll ping the push pin out there on slack we'll say hey we're we're starting the we're starting this the schema change on the in this environment the worker will connect to cassandra and apply the the sql statement and if it's successful it will mark the pushpan as compute completed again writing that to the mysql database and i'll ping the author on slack to tell them that their schema change was successful if the schematic was not successful the two last steps would be exactly the same but replace completed with failed so let's talk a little bit about the automated validation of a sql statement that we do there are several advantages to to this first of all we don't solely rely on manual testing of sql statements so we always recommend developers that they try their sql statements like on a on a test cluster but we can't rely on that like we can't we can't rely that that everybody would do that and so we we can still catch a lot of errors with this automated validation and then developers get fast feedback on on synthetically wrong sql so before you they would in in the previous system they would open a pull request and they'd wait a few hours days to get feedback from us that hey actually this is not valid uh sql this is not a valid sql statement now nowadays they get feedback as soon as they try to generate that push plan yaml file and we also able to enforce best practices that we've established here in gary so it's not just to say hey your sql statement is is syntactically correct we also ensure that they're doing the right thing and and that's a really important thing for us so how does the automated validation work uh we wrote a fairly simple large parser that supports only the sql schema modifying statements and we so we parse the sql and once it's parsed for each of our validation rule we'll inspect the tree um the parse tree and we'll verify that it it matches our evolution like it it's okay with regard to other additionals so a few examples of automated valuation rules that we have so we have some simple things like what you saw like one we one and only one primary keeper table that all the table options are valid and of the valid type um and then the the two last ones are things that we've decided to do it's not necessarily that the sql statement is not valid it's just that we've decided that this would not be okay so while we had a mix of cassandra 2 and cassandra 3 clusters it's not the case anymore but it used to be we decided to say hey let's let's prevent people from altering column types uh even if that's could this could have been valid in a casino 2 cluster we wanted people to we wanted developers to be educated that this would not be possible anymore and the second example is not adding more than 20 columns at a time um we've had an incident about a year ago where a schema change was adding hundreds of columns to a standard table and the effect that this had was that uh it brought the cluster down to its knees and like the metadata that was added was just way too much and the performance of the cluster was was really badly impacted and so when we wrote the postmodern for this incident uh we we decided that we would add a validation rule that makes it so that a developer is not able to add more than 20 columns at a time to a table and interestingly enough a couple of months ago a developer was trying to do just that and they reached out to us and so we we talked to them about this change and uh we the result was that we worked because of that validation failure that they had they came to us and we worked with them to actually make this change possible and and we we split their sql statements into many different sql statements and we ran them manually to ensure that the performance of the cluster remained uh decent through throughout this operation and it's really easy to add new validation rules it's just a simple python method that takes the the parse tree and just checks checks that some things in the tree are are as they should so what are the lessons learned after running this system in production for about six months now so a couple of challenges um from the point of view of a developer a new schema change is it's a little bit more involved uh before they just had to modify a single file in uh in a git repository and and things would be changed now there is a little bit more wet tape um but ultimately we think that this is for the best and it allows us to to have a safer cassandra infrastructure and also like developers get fast feedback also we're storing in that push plan git repository we're storing only diffs of the schemas so it's only the actual the the sql is is what changed uh we still have a need to store the full schemas in a separate repository uh specifically for integration testing for apollo and so developers need to actually change the schemas in two different places which is not ideal but that may go away once uh this target project is completed and positives uh there are two sides of positives so first of all the schema changes reviews are much easier for for the dre team automatic validation does most of the work we don't have to hunt like silly sql mistakes uh we we can uh when we review a schema change we can spend more time to actually think whether the schema changes is what needs to be modified and not about like the nitty-gritty of it um it's now possible for us to enforce cassandra best practices so it's not only like is your sql statement valid it's also like is are you doing the the best thing you can and developers know how to get the status of the schema change they don't need to come to us anymore to ask like hey what is happening without schema change i don't see anything i guess okay i'm missing a couple of sides here i don't know what's happening okay yep that's right we'll just we'll just wing it um and the the the last the last one the last big positive for us is that we have mandatory context gathering for each of the for each of the schema change so because we enforce that there is a jira ticket attached to each schema change it means that a few years after a schema change happened we still can easily find uh documentation around that schema change why it was made and why it was done in a certain way and that's that's really vital for us um great so i had a hiring slide because we wanted to let you know again that uh yelp is hiring uh we are hiring both for the diary no sql team and for a lot of different other teams so if you're interested in a career at help come visit careers.gov.com or you can reach out to isil uh you can find her email address in the beginning of this presentation so um and just to the conclusion um like we do a lot of schema changes we have a lot of clusters maybe you work for a small company and you don't have a need for such like a big project to manage your schema changes but like we think there are two important takeaways for you uh the first one is gathering feedback we think it's really vital uh so if you don't have a process in place to to like attach a schema change with with some context uh try to try to put that in place it will maybe save your skin in a in a few years when when you have a bad problem with it with a previous schema change and the second one is automated validation it may not be necessary for for a lot of people but we found that for us it really helped us save a lot of time for developers as well as for us like cassandra administrators uh and it it makes applying a schema change a lot safer and easier thank you for your time uh i will now take a few questions if there are some questions yep uh so there is uh first of all uh this is great thank you from dr denis gosnell which is really great to see i have one question on youtube chat which doesn't directly relates to that topic you told but i guess will be interesting to all of our listeners are you using only one database cassandra at yelp i know what answer is no but yeah so um i i so if we're talking about database types uh we have a job we have mostly support for mysql database as well as cassandra database and if you consider elasticsearch database then we also have a lot of elastic stretch clusters uh and some this these are the three main uh custom the three main database types that we supported yeah if we're talking about uh database clusters for cassandra no we don't have a single we don't we don't run a single cassandra instance at yalp we run dozens of them um i don't actually it's it's several dozens uh is i don't actually know the the number uh plus each each of these clusters uh runs independently in several uh environments so all in all like we run probably more than a hundred uh cassandra crystals talking about your presentation some years ago many years ago i've read a book by robert glass one very cool software engineer with like long long long long many dozens of your experience on this field and the phrase in his book what it would be great to have the ability to link every change set every change in our code into the task what we are doing so bad we don't have this ability and i was like oh yeah it would be indeed great uh to have this ability to link them and then like stop but we do have already uh i realized what book was written before uh the tools like git were introduced and now we have this ability and you go even further you are linking the change sets to the chemist of your database to a particular task you are executing and you are automating validation to do that i'm a big fan of auto magic and the things you uh automate like that how it helps the developers and business and that's incredible to see uh people taking care of that so seriously that's a really incredible talk and that's really incredible job you are doing there like i i see we have many dozens of people watching this meetup live and very warm feedback and now we see what with the attention what yelp puts to their code and how do they work with the database with semichanges migrations that's maybe a really good place to work so you may have to contact either and i think i'm switching back to a main view and if we have if you have any more questions that would be great to get you people asking them right now because we are going to stop so ask now or stay quiet forever kidding ask questions later you guests will be able to find us on linkedin i think so give me a moment alex it's weird give me a moment okay so i see no more questions only thank you thank you this is great on the youtube chat uh so i think that's we are done and enough for today well thanks for attending um it was it was a blast and um yeah come come talk to our hr uh to our tech recruiting folks uh if you're interested to uh come first see for yourself what we're doing here at yeah yep and i i don't know about our attendees but i am definitely to contact you not because of a hiring question sorry uh but more i want you to speak more often at cassandra global meetups uh at datastax developers on youtube because you guys have incredible experience with apache cassandra and community over the world wants you to share it that's for sure right okay uh so that was uh blueprint london virtual event yelp engineers speaking at the meetup organized with the support of the datastax developers and thank you everyone for attending us and i think we are done for today so thank you and see you next time have a great week",
    "segments": [
      {
        "start": 35.83,
        "duration": 24.01,
        "text": "[Music]"
      },
      {
        "start": 43.44,
        "duration": 16.4,
        "text": "on the same page"
      },
      {
        "start": 60.59,
        "duration": 40.45,
        "text": "[Music]"
      },
      {
        "start": 98.0,
        "duration": 6.24,
        "text": "hello everyone if you can see us"
      },
      {
        "start": 101.04,
        "duration": 5.359,
        "text": "if you can hear us please let us know"
      },
      {
        "start": 104.24,
        "duration": 2.8,
        "text": "and set the thumbs up in the youtube"
      },
      {
        "start": 106.399,
        "duration": 3.68,
        "text": "chat"
      },
      {
        "start": 107.04,
        "duration": 4.079,
        "text": "so we will be so happy to see you here"
      },
      {
        "start": 110.079,
        "duration": 4.161,
        "text": "today"
      },
      {
        "start": 111.119,
        "duration": 6.161,
        "text": "there is a meetup prepared by"
      },
      {
        "start": 114.24,
        "duration": 7.44,
        "text": "datastocks with help of our great"
      },
      {
        "start": 117.28,
        "duration": 7.839,
        "text": "yelp people and as a part of a blueprint"
      },
      {
        "start": 121.68,
        "duration": 6.88,
        "text": "london virtual event happening actually"
      },
      {
        "start": 125.119,
        "duration": 6.881,
        "text": "today and i have"
      },
      {
        "start": 128.56,
        "duration": 5.759,
        "text": "to introduce you our special guests"
      },
      {
        "start": 132.0,
        "duration": 3.36,
        "text": "uh but before i will not do that as long"
      },
      {
        "start": 134.319,
        "duration": 4.321,
        "text": "as i don't see"
      },
      {
        "start": 135.36,
        "duration": 6.48,
        "text": "any hello thumbs up in the chat"
      },
      {
        "start": 138.64,
        "duration": 4.08,
        "text": "let's warm up a little bit okay hey"
      },
      {
        "start": 141.84,
        "duration": 4.08,
        "text": "dennis"
      },
      {
        "start": 142.72,
        "duration": 4.159,
        "text": "thank you and that's incredible to have"
      },
      {
        "start": 145.92,
        "duration": 5.039,
        "text": "you here today"
      },
      {
        "start": 146.879,
        "duration": 7.761,
        "text": "we have dennis gosnell uh that's a"
      },
      {
        "start": 150.959,
        "duration": 6.161,
        "text": "very big pleasure for us to see so"
      },
      {
        "start": 154.64,
        "duration": 3.679,
        "text": "uh i'm alex volchniv developer advocate"
      },
      {
        "start": 157.12,
        "duration": 3.839,
        "text": "at data stocks"
      },
      {
        "start": 158.319,
        "duration": 4.321,
        "text": "uh but my role today is very simple i'm"
      },
      {
        "start": 160.959,
        "duration": 3.761,
        "text": "only to introduce you"
      },
      {
        "start": 162.64,
        "duration": 3.92,
        "text": "those who really matter today those who"
      },
      {
        "start": 164.72,
        "duration": 3.599,
        "text": "will speak about the things"
      },
      {
        "start": 166.56,
        "duration": 3.84,
        "text": "those who will make their great"
      },
      {
        "start": 168.319,
        "duration": 4.321,
        "text": "presentation and showing"
      },
      {
        "start": 170.4,
        "duration": 3.6,
        "text": "so many incredible things we are going"
      },
      {
        "start": 172.64,
        "duration": 4.16,
        "text": "to see all together"
      },
      {
        "start": 174.0,
        "duration": 3.68,
        "text": "i'm excited to be here today i hope you"
      },
      {
        "start": 176.8,
        "duration": 4.079,
        "text": "are too"
      },
      {
        "start": 177.68,
        "duration": 7.12,
        "text": "so let me introduce isel"
      },
      {
        "start": 180.879,
        "duration": 6.64,
        "text": "alex and binoa from yelp and"
      },
      {
        "start": 184.8,
        "duration": 2.719,
        "text": "hello everyone"
      },
      {
        "start": 188.08,
        "duration": 7.12,
        "text": "say something hey hi how are you"
      },
      {
        "start": 191.76,
        "duration": 7.36,
        "text": "yeah good so hello yeah could you please"
      },
      {
        "start": 195.2,
        "duration": 7.679,
        "text": "introduce yourselves"
      },
      {
        "start": 199.12,
        "duration": 6.56,
        "text": "hazel used yep hey everyone i'm isel"
      },
      {
        "start": 202.879,
        "duration": 4.72,
        "text": "i'm a technical recruiter at yelp and"
      },
      {
        "start": 205.68,
        "duration": 4.96,
        "text": "i'm here to talk about the open"
      },
      {
        "start": 207.599,
        "duration": 5.601,
        "text": "positions that we currently have"
      },
      {
        "start": 210.64,
        "duration": 4.72,
        "text": "great and you know what that what really"
      },
      {
        "start": 213.2,
        "duration": 2.72,
        "text": "matters in every project it's always"
      },
      {
        "start": 215.36,
        "duration": 3.68,
        "text": "about"
      },
      {
        "start": 215.92,
        "duration": 4.8,
        "text": "people technologies great team even with"
      },
      {
        "start": 219.04,
        "duration": 5.279,
        "text": "not the best technologies"
      },
      {
        "start": 220.72,
        "duration": 5.36,
        "text": "can build great products and like not so"
      },
      {
        "start": 224.319,
        "duration": 4.161,
        "text": "great team even with the best of"
      },
      {
        "start": 226.08,
        "duration": 3.04,
        "text": "technologies may build not so great"
      },
      {
        "start": 228.48,
        "duration": 2.8,
        "text": "projects"
      },
      {
        "start": 229.12,
        "duration": 3.199,
        "text": "so here today we speak about great"
      },
      {
        "start": 231.28,
        "duration": 4.319,
        "text": "technologies"
      },
      {
        "start": 232.319,
        "duration": 5.12,
        "text": "and also yelp hiring great people"
      },
      {
        "start": 235.599,
        "duration": 4.0,
        "text": "so i still will have a moment for that"
      },
      {
        "start": 237.439,
        "duration": 3.841,
        "text": "and alex who are you and what do you do"
      },
      {
        "start": 239.599,
        "duration": 4.081,
        "text": "at help"
      },
      {
        "start": 241.28,
        "duration": 3.12,
        "text": "uh hey folks um so yeah my name is alex"
      },
      {
        "start": 243.68,
        "duration": 2.479,
        "text": "i'm a"
      },
      {
        "start": 244.4,
        "duration": 3.52,
        "text": "software engineer at the database"
      },
      {
        "start": 246.159,
        "duration": 3.761,
        "text": "reliability engineering team"
      },
      {
        "start": 247.92,
        "duration": 3.36,
        "text": "um yeah i've been part of yelp for about"
      },
      {
        "start": 249.92,
        "duration": 3.28,
        "text": "four years now"
      },
      {
        "start": 251.28,
        "duration": 5.04,
        "text": "uh and today i'll be talking about the"
      },
      {
        "start": 253.2,
        "duration": 6.159,
        "text": "stargate at yelp"
      },
      {
        "start": 256.32,
        "duration": 6.64,
        "text": "okay yeah so stargate is a new"
      },
      {
        "start": 259.359,
        "duration": 4.641,
        "text": "new for most of the visitors of today's"
      },
      {
        "start": 262.96,
        "duration": 3.12,
        "text": "talk"
      },
      {
        "start": 264.0,
        "duration": 4.32,
        "text": "so you are going to learn something new"
      },
      {
        "start": 266.08,
        "duration": 4.16,
        "text": "what really extensive possibilities"
      },
      {
        "start": 268.32,
        "duration": 3.12,
        "text": "of apache cassandra or data strikes"
      },
      {
        "start": 270.24,
        "duration": 3.28,
        "text": "enterprise"
      },
      {
        "start": 271.44,
        "duration": 3.52,
        "text": "today we speak about apache cassandra"
      },
      {
        "start": 273.52,
        "duration": 4.48,
        "text": "and benue"
      },
      {
        "start": 274.96,
        "duration": 7.12,
        "text": "who are you and what do you do hey uh"
      },
      {
        "start": 278.0,
        "duration": 6.639,
        "text": "so i'm benua uh i'm french i"
      },
      {
        "start": 282.08,
        "duration": 3.04,
        "text": "live in boston and i work for the dre"
      },
      {
        "start": 284.639,
        "duration": 3.601,
        "text": "team"
      },
      {
        "start": 285.12,
        "duration": 5.76,
        "text": "at yelp same team as alex"
      },
      {
        "start": 288.24,
        "duration": 3.2,
        "text": "and today i will be presenting to you"
      },
      {
        "start": 290.88,
        "duration": 3.84,
        "text": "how"
      },
      {
        "start": 291.44,
        "duration": 4.56,
        "text": "we do schema changes uh and and the"
      },
      {
        "start": 294.72,
        "duration": 4.24,
        "text": "lessons we've learned develop"
      },
      {
        "start": 296.0,
        "duration": 3.6,
        "text": "um like deploying a new a new system to"
      },
      {
        "start": 298.96,
        "duration": 2.56,
        "text": "handle"
      },
      {
        "start": 299.6,
        "duration": 3.68,
        "text": "kissinger's commentations that yelp"
      },
      {
        "start": 301.52,
        "duration": 2.8,
        "text": "that's a really great and very"
      },
      {
        "start": 303.28,
        "duration": 3.199,
        "text": "interesting topic"
      },
      {
        "start": 304.32,
        "duration": 4.159,
        "text": "you know i work as a developer advocate"
      },
      {
        "start": 306.479,
        "duration": 4.481,
        "text": "with apache cassandra first of all"
      },
      {
        "start": 308.479,
        "duration": 4.401,
        "text": "and really a lot of people ask like how"
      },
      {
        "start": 310.96,
        "duration": 4.239,
        "text": "do you manage shaman changes"
      },
      {
        "start": 312.88,
        "duration": 3.599,
        "text": "really a lot that's every workshop i get"
      },
      {
        "start": 315.199,
        "duration": 5.121,
        "text": "this question"
      },
      {
        "start": 316.479,
        "duration": 4.961,
        "text": "um so i can't wait uh you are going to"
      },
      {
        "start": 320.32,
        "duration": 2.96,
        "text": "speak uh"
      },
      {
        "start": 321.44,
        "duration": 3.12,
        "text": "you are last definitely not released"
      },
      {
        "start": 323.28,
        "duration": 4.24,
        "text": "today in the list"
      },
      {
        "start": 324.56,
        "duration": 4.8,
        "text": "so please stay till the end that's"
      },
      {
        "start": 327.52,
        "duration": 3.519,
        "text": "definitely something what deserves your"
      },
      {
        "start": 329.36,
        "duration": 4.48,
        "text": "attention"
      },
      {
        "start": 331.039,
        "duration": 4.72,
        "text": "so i think we can start and i'm going to"
      },
      {
        "start": 333.84,
        "duration": 4.88,
        "text": "switch to the first part"
      },
      {
        "start": 335.759,
        "duration": 4.081,
        "text": "that's for a few minutes isil will take"
      },
      {
        "start": 338.72,
        "duration": 4.88,
        "text": "our attention"
      },
      {
        "start": 339.84,
        "duration": 7.28,
        "text": "to show what are the hiring options"
      },
      {
        "start": 343.6,
        "duration": 6.48,
        "text": "now today at yelp okay so give me a"
      },
      {
        "start": 347.12,
        "duration": 2.96,
        "text": "moment we are switching"
      },
      {
        "start": 351.199,
        "duration": 4.321,
        "text": "good either so they're all yours"
      },
      {
        "start": 356.08,
        "duration": 4.32,
        "text": "um i am here to talk about our open"
      },
      {
        "start": 359.199,
        "duration": 4.161,
        "text": "positions at yelp"
      },
      {
        "start": 360.4,
        "duration": 3.919,
        "text": "however before that i wanted to"
      },
      {
        "start": 363.36,
        "duration": 4.32,
        "text": "introduce myself"
      },
      {
        "start": 364.319,
        "duration": 5.6,
        "text": "briefly and just say a little bit about"
      },
      {
        "start": 367.68,
        "duration": 4.32,
        "text": "what excites me to work"
      },
      {
        "start": 369.919,
        "duration": 3.041,
        "text": "at yelp so i'm isil i'm a technical"
      },
      {
        "start": 372.0,
        "duration": 3.759,
        "text": "recruiter"
      },
      {
        "start": 372.96,
        "duration": 4.16,
        "text": "i've been helping uh grow teams within"
      },
      {
        "start": 375.759,
        "duration": 4.481,
        "text": "engineering"
      },
      {
        "start": 377.12,
        "duration": 6.639,
        "text": "in uk and germany i've been at yelp for"
      },
      {
        "start": 380.24,
        "duration": 4.32,
        "text": "over a year now and there's a few things"
      },
      {
        "start": 383.759,
        "duration": 3.361,
        "text": "actually that"
      },
      {
        "start": 384.56,
        "duration": 3.04,
        "text": "excite me to work at yelp however i"
      },
      {
        "start": 387.12,
        "duration": 2.32,
        "text": "would say"
      },
      {
        "start": 387.6,
        "duration": 4.719,
        "text": "if i had to highlight the main two that"
      },
      {
        "start": 389.44,
        "duration": 5.44,
        "text": "would be people and culture"
      },
      {
        "start": 392.319,
        "duration": 3.681,
        "text": "i'm very uh happy and lucky to be"
      },
      {
        "start": 394.88,
        "duration": 3.52,
        "text": "working with"
      },
      {
        "start": 396.0,
        "duration": 3.759,
        "text": "amongst intelligent and supportive and"
      },
      {
        "start": 398.4,
        "duration": 4.4,
        "text": "kind people that"
      },
      {
        "start": 399.759,
        "duration": 6.321,
        "text": "motivate me on a daily basis and help"
      },
      {
        "start": 402.8,
        "duration": 5.839,
        "text": "and push me to grow further and um"
      },
      {
        "start": 406.08,
        "duration": 3.2,
        "text": "i also really like the culture at yelp"
      },
      {
        "start": 408.639,
        "duration": 2.641,
        "text": "and"
      },
      {
        "start": 409.28,
        "duration": 4.4,
        "text": "uh one of the things it promotes which"
      },
      {
        "start": 411.28,
        "duration": 4.8,
        "text": "is one of its core values"
      },
      {
        "start": 413.68,
        "duration": 4.16,
        "text": "is playing well with others treating"
      },
      {
        "start": 416.08,
        "duration": 3.28,
        "text": "people with respect and encouraging"
      },
      {
        "start": 417.84,
        "duration": 5.6,
        "text": "collaboration"
      },
      {
        "start": 419.36,
        "duration": 6.239,
        "text": "so that's about me um and here's why"
      },
      {
        "start": 423.44,
        "duration": 3.039,
        "text": "how why other people want to work at"
      },
      {
        "start": 425.599,
        "duration": 3.921,
        "text": "yelp"
      },
      {
        "start": 426.479,
        "duration": 6.401,
        "text": "so yelp enables us to"
      },
      {
        "start": 429.52,
        "duration": 5.679,
        "text": "fuel professional growth meaningful"
      },
      {
        "start": 432.88,
        "duration": 3.599,
        "text": "opportunities so people can engage in"
      },
      {
        "start": 435.199,
        "duration": 3.761,
        "text": "learning programs"
      },
      {
        "start": 436.479,
        "duration": 4.56,
        "text": "and obviously have a rich culture of"
      },
      {
        "start": 438.96,
        "duration": 4.88,
        "text": "diversity and inclusion"
      },
      {
        "start": 441.039,
        "duration": 4.88,
        "text": "and with over 14 yelp groups across the"
      },
      {
        "start": 443.84,
        "duration": 4.56,
        "text": "company there's a place for everyone at"
      },
      {
        "start": 445.919,
        "duration": 5.521,
        "text": "yelp to feel included"
      },
      {
        "start": 448.4,
        "duration": 5.519,
        "text": "so now in terms of hiring"
      },
      {
        "start": 451.44,
        "duration": 4.72,
        "text": "uh we are hiring for multiple roles as"
      },
      {
        "start": 453.919,
        "duration": 4.56,
        "text": "you can see here so we're hiring for"
      },
      {
        "start": 456.16,
        "duration": 5.12,
        "text": "data back and engineers site reliability"
      },
      {
        "start": 458.479,
        "duration": 5.041,
        "text": "engineers database reliability engineers"
      },
      {
        "start": 461.28,
        "duration": 4.0,
        "text": "applied scientists and data scientists"
      },
      {
        "start": 463.52,
        "duration": 5.04,
        "text": "machine learning engineers and"
      },
      {
        "start": 465.28,
        "duration": 6.8,
        "text": "engineering managers these are just some"
      },
      {
        "start": 468.56,
        "duration": 6.56,
        "text": "roles amongst others that we have"
      },
      {
        "start": 472.08,
        "duration": 6.239,
        "text": "currently we are hiring in the uk"
      },
      {
        "start": 475.12,
        "duration": 6.799,
        "text": "um and um"
      },
      {
        "start": 478.319,
        "duration": 6.961,
        "text": "to also a note that we are hiring across"
      },
      {
        "start": 481.919,
        "duration": 5.84,
        "text": "all the cities in england so there is an"
      },
      {
        "start": 485.28,
        "duration": 4.88,
        "text": "opportunity to work fully remote"
      },
      {
        "start": 487.759,
        "duration": 4.481,
        "text": "from any parts of england don't have to"
      },
      {
        "start": 490.16,
        "duration": 4.319,
        "text": "necessarily be based in london"
      },
      {
        "start": 492.24,
        "duration": 3.359,
        "text": "if you are based in london then we do"
      },
      {
        "start": 494.479,
        "duration": 4.16,
        "text": "also have an"
      },
      {
        "start": 495.599,
        "duration": 6.801,
        "text": "awesome office based on liverpool street"
      },
      {
        "start": 498.639,
        "duration": 6.481,
        "text": "that we will be going back into"
      },
      {
        "start": 502.4,
        "duration": 3.76,
        "text": "but no matter whether you choose to work"
      },
      {
        "start": 505.12,
        "duration": 4.479,
        "text": "fully remote"
      },
      {
        "start": 506.16,
        "duration": 5.68,
        "text": "or from an office you will be"
      },
      {
        "start": 509.599,
        "duration": 3.68,
        "text": "also part of a dynamic environment and"
      },
      {
        "start": 511.84,
        "duration": 2.319,
        "text": "an exciting team and of course"
      },
      {
        "start": 513.279,
        "duration": 4.56,
        "text": "participating"
      },
      {
        "start": 514.159,
        "duration": 7.201,
        "text": "in our regular hackathons and off sites"
      },
      {
        "start": 517.839,
        "duration": 6.32,
        "text": "virtually at the moment so um"
      },
      {
        "start": 521.36,
        "duration": 3.84,
        "text": "i guess um get in touch have a look at"
      },
      {
        "start": 524.159,
        "duration": 3.921,
        "text": "our website"
      },
      {
        "start": 525.2,
        "duration": 3.759,
        "text": "um on the careers page so yelp.com"
      },
      {
        "start": 528.08,
        "duration": 3.439,
        "text": "careers"
      },
      {
        "start": 528.959,
        "duration": 3.601,
        "text": "you can also email me directly if you"
      },
      {
        "start": 531.519,
        "duration": 3.281,
        "text": "have any uh"
      },
      {
        "start": 532.56,
        "duration": 5.04,
        "text": "questions however you can go on the"
      },
      {
        "start": 534.8,
        "duration": 5.68,
        "text": "careers page have a look at the roles"
      },
      {
        "start": 537.6,
        "duration": 5.679,
        "text": "and apply and we'll be in touch and"
      },
      {
        "start": 540.48,
        "duration": 2.799,
        "text": "that's all for me"
      },
      {
        "start": 544.88,
        "duration": 7.519,
        "text": "great thank you so"
      },
      {
        "start": 549.36,
        "duration": 6.56,
        "text": "what's uh comes next next comes"
      },
      {
        "start": 552.399,
        "duration": 6.641,
        "text": "alex and we've"
      },
      {
        "start": 555.92,
        "duration": 6.24,
        "text": "it comes not alone but he comes with"
      },
      {
        "start": 559.04,
        "duration": 6.799,
        "text": "stargate so uh if you don't"
      },
      {
        "start": 562.16,
        "duration": 8.32,
        "text": "mind uh mind either i would ask you to"
      },
      {
        "start": 565.839,
        "duration": 4.641,
        "text": "switch off your shared screen"
      },
      {
        "start": 570.64,
        "duration": 6.8,
        "text": "and we have to"
      },
      {
        "start": 574.0,
        "duration": 6.0,
        "text": "ask alex to share his and we are about"
      },
      {
        "start": 577.44,
        "duration": 2.56,
        "text": "to start"
      },
      {
        "start": 581.76,
        "duration": 4.4,
        "text": "all right let me share my screen"
      },
      {
        "start": 588.88,
        "duration": 5.28,
        "text": "so your camera is on and now we are"
      },
      {
        "start": 592.08,
        "duration": 13.759,
        "text": "waiting for your screen"
      },
      {
        "start": 594.16,
        "duration": 11.679,
        "text": "but don't worry no pushing"
      },
      {
        "start": 616.32,
        "duration": 3.92,
        "text": "while we are waiting for the screen uh"
      },
      {
        "start": 618.72,
        "duration": 4.08,
        "text": "how long do you work with apache"
      },
      {
        "start": 620.24,
        "duration": 2.56,
        "text": "cassandra"
      },
      {
        "start": 631.04,
        "duration": 6.64,
        "text": "all right uh yeah your screen is live"
      },
      {
        "start": 635.839,
        "duration": 4.24,
        "text": "uh all right yeah i had some technical"
      },
      {
        "start": 637.68,
        "duration": 5.92,
        "text": "difficulties but now i'm back online"
      },
      {
        "start": 640.079,
        "duration": 6.801,
        "text": "uh yeah um"
      },
      {
        "start": 643.6,
        "duration": 5.44,
        "text": "thanks for tuning in folks so today"
      },
      {
        "start": 646.88,
        "duration": 3.84,
        "text": "in this talk i'll be sharing with you an"
      },
      {
        "start": 649.04,
        "duration": 3.919,
        "text": "ongoing project at yelp"
      },
      {
        "start": 650.72,
        "duration": 3.359,
        "text": "that we started earlier this year which"
      },
      {
        "start": 652.959,
        "duration": 2.641,
        "text": "is one of the highest"
      },
      {
        "start": 654.079,
        "duration": 3.76,
        "text": "priority projects at yelps"
      },
      {
        "start": 655.6,
        "duration": 5.2,
        "text": "infrastructure world this year"
      },
      {
        "start": 657.839,
        "duration": 4.881,
        "text": "and the project aims to mainly replace"
      },
      {
        "start": 660.8,
        "duration": 2.4,
        "text": "one of the most critical services at"
      },
      {
        "start": 662.72,
        "duration": 2.239,
        "text": "yelp"
      },
      {
        "start": 663.2,
        "duration": 4.24,
        "text": "with an open source project that is"
      },
      {
        "start": 664.959,
        "duration": 4.481,
        "text": "called stargate and so hopefully"
      },
      {
        "start": 667.44,
        "duration": 3.76,
        "text": "by the end of the talk you'll know a bit"
      },
      {
        "start": 669.44,
        "duration": 3.36,
        "text": "more about services at yelp"
      },
      {
        "start": 671.2,
        "duration": 3.6,
        "text": "um you know certain challenges of"
      },
      {
        "start": 672.8,
        "duration": 4.719,
        "text": "integrating an open source project"
      },
      {
        "start": 674.8,
        "duration": 3.599,
        "text": "into a mature service oriented"
      },
      {
        "start": 677.519,
        "duration": 2.641,
        "text": "architecture"
      },
      {
        "start": 678.399,
        "duration": 4.081,
        "text": "and and possibly a few lessons on"
      },
      {
        "start": 680.16,
        "duration": 5.04,
        "text": "replacing the most critical piece of"
      },
      {
        "start": 682.48,
        "duration": 3.44,
        "text": "infrastructure at yale and in general i"
      },
      {
        "start": 685.2,
        "duration": 2.24,
        "text": "guess"
      },
      {
        "start": 685.92,
        "duration": 3.68,
        "text": "at a service at the end of the"
      },
      {
        "start": 687.44,
        "duration": 4.399,
        "text": "architecture and so let me let me just"
      },
      {
        "start": 689.6,
        "duration": 6.0,
        "text": "tell you a few words about myself"
      },
      {
        "start": 691.839,
        "duration": 5.44,
        "text": "um so my name is alex um"
      },
      {
        "start": 695.6,
        "duration": 3.919,
        "text": "i'm part of database reliability"
      },
      {
        "start": 697.279,
        "duration": 2.961,
        "text": "engineering team and our team spans uh"
      },
      {
        "start": 699.519,
        "duration": 3.681,
        "text": "three different"
      },
      {
        "start": 700.24,
        "duration": 4.4,
        "text": "um three different countries so we are"
      },
      {
        "start": 703.2,
        "duration": 3.199,
        "text": "in london san francisco"
      },
      {
        "start": 704.64,
        "duration": 3.52,
        "text": "and in hamburg and i'm personally"
      },
      {
        "start": 706.399,
        "duration": 4.24,
        "text": "working remotely from hamburg"
      },
      {
        "start": 708.16,
        "duration": 3.119,
        "text": "um remotely to the london part of the"
      },
      {
        "start": 710.639,
        "duration": 3.361,
        "text": "team"
      },
      {
        "start": 711.279,
        "duration": 3.521,
        "text": "and what what we do what our team does"
      },
      {
        "start": 714.0,
        "duration": 3.04,
        "text": "is we"
      },
      {
        "start": 714.8,
        "duration": 3.2,
        "text": "do essentially databases that help we"
      },
      {
        "start": 717.04,
        "duration": 3.359,
        "text": "maintain"
      },
      {
        "start": 718.0,
        "duration": 4.32,
        "text": "uh improve um all the data"
      },
      {
        "start": 720.399,
        "duration": 4.0,
        "text": "infrastructure related to databases at"
      },
      {
        "start": 722.32,
        "duration": 4.319,
        "text": "yelp"
      },
      {
        "start": 724.399,
        "duration": 3.601,
        "text": "so let me walk you through what's going"
      },
      {
        "start": 726.639,
        "duration": 3.121,
        "text": "to be happening today"
      },
      {
        "start": 728.0,
        "duration": 3.6,
        "text": "so i will tell you a little bit about"
      },
      {
        "start": 729.76,
        "duration": 4.4,
        "text": "our setup um of about"
      },
      {
        "start": 731.6,
        "duration": 3.359,
        "text": "history of cassandra at yelp um about"
      },
      {
        "start": 734.16,
        "duration": 2.479,
        "text": "our setup"
      },
      {
        "start": 734.959,
        "duration": 3.361,
        "text": "um i'll share just a few numbers few"
      },
      {
        "start": 736.639,
        "duration": 3.841,
        "text": "interesting numbers um"
      },
      {
        "start": 738.32,
        "duration": 3.92,
        "text": "and then i want to talk a little bit"
      },
      {
        "start": 740.48,
        "duration": 4.32,
        "text": "about the stargate itself"
      },
      {
        "start": 742.24,
        "duration": 4.48,
        "text": "um in in the motivation behind it why we"
      },
      {
        "start": 744.8,
        "duration": 2.479,
        "text": "chose uh to go with this open source"
      },
      {
        "start": 746.72,
        "duration": 2.96,
        "text": "project"
      },
      {
        "start": 747.279,
        "duration": 3.12,
        "text": "and sort of motivation behind a stargate"
      },
      {
        "start": 749.68,
        "duration": 3.36,
        "text": "um"
      },
      {
        "start": 750.399,
        "duration": 4.641,
        "text": "and then um i want to devote the bulk of"
      },
      {
        "start": 753.04,
        "duration": 2.64,
        "text": "our time to the actual migration"
      },
      {
        "start": 755.04,
        "duration": 2.239,
        "text": "progress"
      },
      {
        "start": 755.68,
        "duration": 3.04,
        "text": "sort of walk you through the steps that"
      },
      {
        "start": 757.279,
        "duration": 4.481,
        "text": "we did to"
      },
      {
        "start": 758.72,
        "duration": 5.44,
        "text": "do the actual migration to the project"
      },
      {
        "start": 761.76,
        "duration": 4.079,
        "text": "and so at the end there'll be just a few"
      },
      {
        "start": 764.16,
        "duration": 2.4,
        "text": "more slides about the future kind of"
      },
      {
        "start": 765.839,
        "duration": 3.921,
        "text": "steps"
      },
      {
        "start": 766.56,
        "duration": 5.68,
        "text": "and the q a so"
      },
      {
        "start": 769.76,
        "duration": 3.04,
        "text": "let's start with just a brief view of"
      },
      {
        "start": 772.24,
        "duration": 2.64,
        "text": "our"
      },
      {
        "start": 772.8,
        "duration": 3.599,
        "text": "of cassandra for those that are not"
      },
      {
        "start": 774.88,
        "duration": 3.519,
        "text": "familiar with the"
      },
      {
        "start": 776.399,
        "duration": 4.0,
        "text": "with this database it is essentially a"
      },
      {
        "start": 778.399,
        "duration": 4.88,
        "text": "distributed white column"
      },
      {
        "start": 780.399,
        "duration": 3.201,
        "text": "no sql data store and it is optimized"
      },
      {
        "start": 783.279,
        "duration": 3.36,
        "text": "for"
      },
      {
        "start": 783.6,
        "duration": 3.679,
        "text": "heavy write load and it has a very fine"
      },
      {
        "start": 786.639,
        "duration": 4.401,
        "text": "grain"
      },
      {
        "start": 787.279,
        "duration": 5.921,
        "text": "ability to tune consistency"
      },
      {
        "start": 791.04,
        "duration": 4.56,
        "text": "and uh just a few numbers few"
      },
      {
        "start": 793.2,
        "duration": 5.52,
        "text": "interesting numbers about our setup"
      },
      {
        "start": 795.6,
        "duration": 5.76,
        "text": "so we generally have about 90 billion"
      },
      {
        "start": 798.72,
        "duration": 4.64,
        "text": "cassandra queries per month so we run"
      },
      {
        "start": 801.36,
        "duration": 4.159,
        "text": "our production infrastructure and then"
      },
      {
        "start": 803.36,
        "duration": 3.12,
        "text": "generally entire infrastructure on on"
      },
      {
        "start": 805.519,
        "duration": 4.161,
        "text": "kubernetes"
      },
      {
        "start": 806.48,
        "duration": 5.44,
        "text": "and uh sort of like on average um our on"
      },
      {
        "start": 809.68,
        "duration": 3.279,
        "text": "average load we have about 60 cash under"
      },
      {
        "start": 811.92,
        "duration": 4.479,
        "text": "clusters"
      },
      {
        "start": 812.959,
        "duration": 6.0,
        "text": "and about 500 community spots deployed"
      },
      {
        "start": 816.399,
        "duration": 3.041,
        "text": "and in terms of the clusters that have"
      },
      {
        "start": 818.959,
        "duration": 3.281,
        "text": "the"
      },
      {
        "start": 819.44,
        "duration": 4.399,
        "text": "highest load reading right load our"
      },
      {
        "start": 822.24,
        "duration": 4.88,
        "text": "highest read load cluster"
      },
      {
        "start": 823.839,
        "duration": 4.961,
        "text": "is um sort of on average is about 600"
      },
      {
        "start": 827.12,
        "duration": 4.399,
        "text": "000 requests per seconds"
      },
      {
        "start": 828.8,
        "duration": 4.479,
        "text": "and our highest right load is about 400"
      },
      {
        "start": 831.519,
        "duration": 4.481,
        "text": "000 requests per seconds"
      },
      {
        "start": 833.279,
        "duration": 3.841,
        "text": "um so this is our production setup we"
      },
      {
        "start": 836.0,
        "duration": 2.88,
        "text": "also have"
      },
      {
        "start": 837.12,
        "duration": 3.36,
        "text": "obviously multiple environments with"
      },
      {
        "start": 838.88,
        "duration": 2.48,
        "text": "pretty much replicated setup but"
      },
      {
        "start": 840.48,
        "duration": 3.12,
        "text": "obviously"
      },
      {
        "start": 841.36,
        "duration": 3.52,
        "text": "fewer instances and kind of like a"
      },
      {
        "start": 843.6,
        "duration": 5.12,
        "text": "little lower"
      },
      {
        "start": 844.88,
        "duration": 5.12,
        "text": "load uh so let me give you just a bit of"
      },
      {
        "start": 848.72,
        "duration": 3.84,
        "text": "history of uh"
      },
      {
        "start": 850.0,
        "duration": 3.04,
        "text": "how we use cassandra at yelp so when we"
      },
      {
        "start": 852.56,
        "duration": 3.04,
        "text": "started"
      },
      {
        "start": 853.04,
        "duration": 4.0,
        "text": "about six or uh probably about seven"
      },
      {
        "start": 855.6,
        "duration": 4.799,
        "text": "years ago"
      },
      {
        "start": 857.04,
        "duration": 6.08,
        "text": "we had just one big monolith application"
      },
      {
        "start": 860.399,
        "duration": 5.041,
        "text": "and just a few services so when we"
      },
      {
        "start": 863.12,
        "duration": 5.68,
        "text": "deployed our cassandra clusters"
      },
      {
        "start": 865.44,
        "duration": 5.36,
        "text": "every service would um try to"
      },
      {
        "start": 868.8,
        "duration": 4.0,
        "text": "do the discovery of cassandra cluster on"
      },
      {
        "start": 870.8,
        "duration": 3.52,
        "text": "their own they used um different"
      },
      {
        "start": 872.8,
        "duration": 3.36,
        "text": "cassandra drivers which"
      },
      {
        "start": 874.32,
        "duration": 3.759,
        "text": "with merchants that with versions that"
      },
      {
        "start": 876.16,
        "duration": 4.239,
        "text": "didn't match with each other"
      },
      {
        "start": 878.079,
        "duration": 4.241,
        "text": "so it sort of resulted in a very hectic"
      },
      {
        "start": 880.399,
        "duration": 3.601,
        "text": "and a messy situation where the load on"
      },
      {
        "start": 882.32,
        "duration": 4.8,
        "text": "our cassandra clusters"
      },
      {
        "start": 884.0,
        "duration": 4.72,
        "text": "was not evenly distributed and the"
      },
      {
        "start": 887.12,
        "duration": 3.279,
        "text": "cassandra drivers were not"
      },
      {
        "start": 888.72,
        "duration": 3.6,
        "text": "properly supported by database"
      },
      {
        "start": 890.399,
        "duration": 4.321,
        "text": "reliability team so generally it was"
      },
      {
        "start": 892.32,
        "duration": 5.44,
        "text": "very kind of like a hectic situation"
      },
      {
        "start": 894.72,
        "duration": 5.84,
        "text": "and so naturally the next step"
      },
      {
        "start": 897.76,
        "duration": 4.4,
        "text": "was to introduce a proxy service an"
      },
      {
        "start": 900.56,
        "duration": 4.24,
        "text": "internal proxy service"
      },
      {
        "start": 902.16,
        "duration": 3.919,
        "text": "um called apollo so nowadays hundreds of"
      },
      {
        "start": 904.8,
        "duration": 3.68,
        "text": "developers that yelp um"
      },
      {
        "start": 906.079,
        "duration": 4.081,
        "text": "access cassandra clusters through um"
      },
      {
        "start": 908.48,
        "duration": 4.159,
        "text": "this proxy service"
      },
      {
        "start": 910.16,
        "duration": 4.479,
        "text": "and so that so the original idea of the"
      },
      {
        "start": 912.639,
        "duration": 4.88,
        "text": "service was very simple"
      },
      {
        "start": 914.639,
        "duration": 4.241,
        "text": "we wanted to isolate the complexity of"
      },
      {
        "start": 917.519,
        "duration": 3.68,
        "text": "accessing and managing the"
      },
      {
        "start": 918.88,
        "duration": 5.759,
        "text": "infrastructure from the future teams"
      },
      {
        "start": 921.199,
        "duration": 6.0,
        "text": "um and so you can so"
      },
      {
        "start": 924.639,
        "duration": 3.44,
        "text": "um what kind of allowed us to go even"
      },
      {
        "start": 927.199,
        "duration": 4.08,
        "text": "further is"
      },
      {
        "start": 928.079,
        "duration": 6.081,
        "text": "to um isolate different um"
      },
      {
        "start": 931.279,
        "duration": 4.161,
        "text": "instances of the polar um a portal layer"
      },
      {
        "start": 934.16,
        "duration": 4.0,
        "text": "so that for example"
      },
      {
        "start": 935.44,
        "duration": 3.839,
        "text": "we could isolate the services that has"
      },
      {
        "start": 938.16,
        "duration": 3.44,
        "text": "that have the biggest"
      },
      {
        "start": 939.279,
        "duration": 3.201,
        "text": "um business impact on yelp so for for"
      },
      {
        "start": 941.6,
        "duration": 2.799,
        "text": "example when"
      },
      {
        "start": 942.48,
        "duration": 4.32,
        "text": "a certain instance of apollo will go"
      },
      {
        "start": 944.399,
        "duration": 3.44,
        "text": "down um it doesn't impact the rest of"
      },
      {
        "start": 946.8,
        "duration": 4.159,
        "text": "the cluster"
      },
      {
        "start": 947.839,
        "duration": 5.36,
        "text": "um and so the"
      },
      {
        "start": 950.959,
        "duration": 3.521,
        "text": "kind of like advantages and the original"
      },
      {
        "start": 953.199,
        "duration": 3.841,
        "text": "idea was based on"
      },
      {
        "start": 954.48,
        "duration": 4.159,
        "text": "you know first is we wanted to isolate"
      },
      {
        "start": 957.04,
        "duration": 4.4,
        "text": "the this whole"
      },
      {
        "start": 958.639,
        "duration": 4.401,
        "text": "complexity of managing infrastructure"
      },
      {
        "start": 961.44,
        "duration": 4.88,
        "text": "and then on the future teams"
      },
      {
        "start": 963.04,
        "duration": 5.52,
        "text": "we wanted to let them um iterate on the"
      },
      {
        "start": 966.32,
        "duration": 3.68,
        "text": "query code a lot faster and so i'm"
      },
      {
        "start": 968.56,
        "duration": 3.04,
        "text": "referring to future teams"
      },
      {
        "start": 970.0,
        "duration": 3.44,
        "text": "um but that is essentially i'll be"
      },
      {
        "start": 971.6,
        "duration": 4.32,
        "text": "talking more about this"
      },
      {
        "start": 973.44,
        "duration": 3.839,
        "text": "in in kind of like future um but this"
      },
      {
        "start": 975.92,
        "duration": 3.44,
        "text": "generally i'm referring to"
      },
      {
        "start": 977.279,
        "duration": 3.841,
        "text": "any team at yelp that is working with"
      },
      {
        "start": 979.36,
        "duration": 3.68,
        "text": "cassandra as a client"
      },
      {
        "start": 981.12,
        "duration": 3.76,
        "text": "um but they're not concerned about the"
      },
      {
        "start": 983.04,
        "duration": 2.96,
        "text": "sort of underlying infrastructure of"
      },
      {
        "start": 984.88,
        "duration": 3.44,
        "text": "cassandra"
      },
      {
        "start": 986.0,
        "duration": 4.8,
        "text": "and so for these teams we wanted to make"
      },
      {
        "start": 988.32,
        "duration": 4.639,
        "text": "it easy to iterate on a query code"
      },
      {
        "start": 990.8,
        "duration": 3.039,
        "text": "and make it a lot faster um and on our"
      },
      {
        "start": 992.959,
        "duration": 2.961,
        "text": "site as"
      },
      {
        "start": 993.839,
        "duration": 4.0,
        "text": "maintainers of the infrastructure we"
      },
      {
        "start": 995.92,
        "duration": 4.08,
        "text": "wanted to iterate on"
      },
      {
        "start": 997.839,
        "duration": 4.24,
        "text": "the infrastructure itself a lot easier"
      },
      {
        "start": 1000.0,
        "duration": 4.16,
        "text": "and faster so we wanted to replace"
      },
      {
        "start": 1002.079,
        "duration": 3.12,
        "text": "you know the underlying infrastructure"
      },
      {
        "start": 1004.16,
        "duration": 3.28,
        "text": "or bump"
      },
      {
        "start": 1005.199,
        "duration": 4.08,
        "text": "the cassandra cluster version or even"
      },
      {
        "start": 1007.44,
        "duration": 4.88,
        "text": "replace cassandra driver"
      },
      {
        "start": 1009.279,
        "duration": 3.36,
        "text": "so all of this uh having a proxy allowed"
      },
      {
        "start": 1012.32,
        "duration": 4.24,
        "text": "us"
      },
      {
        "start": 1012.639,
        "duration": 6.64,
        "text": "to do all of these things but as time"
      },
      {
        "start": 1016.56,
        "duration": 3.6,
        "text": "has passed and and for apollo fulfilled"
      },
      {
        "start": 1019.279,
        "duration": 3.521,
        "text": "its role as"
      },
      {
        "start": 1020.16,
        "duration": 3.599,
        "text": "a proxy um it is very successful and is"
      },
      {
        "start": 1022.8,
        "duration": 3.68,
        "text": "used"
      },
      {
        "start": 1023.759,
        "duration": 4.56,
        "text": "for about six years now um but it's sort"
      },
      {
        "start": 1026.48,
        "duration": 5.359,
        "text": "of ballooned in this"
      },
      {
        "start": 1028.319,
        "duration": 6.081,
        "text": "mini monolith and right now in 2021"
      },
      {
        "start": 1031.839,
        "duration": 3.521,
        "text": "um it serves about 140 different use"
      },
      {
        "start": 1034.4,
        "duration": 4.32,
        "text": "cases across"
      },
      {
        "start": 1035.36,
        "duration": 6.479,
        "text": "40 different clusters and it"
      },
      {
        "start": 1038.72,
        "duration": 4.239,
        "text": "costs about 60 000 lines of other teams"
      },
      {
        "start": 1041.839,
        "duration": 3.921,
        "text": "business logic"
      },
      {
        "start": 1042.959,
        "duration": 5.201,
        "text": "and integration tests and in addition um"
      },
      {
        "start": 1045.76,
        "duration": 4.72,
        "text": "about 3 000 units that new interest"
      },
      {
        "start": 1048.16,
        "duration": 3.519,
        "text": "have to be run every time we deploy"
      },
      {
        "start": 1050.48,
        "duration": 3.52,
        "text": "apollo which we"
      },
      {
        "start": 1051.679,
        "duration": 3.12,
        "text": "which happens about um several times a"
      },
      {
        "start": 1054.0,
        "duration": 3.6,
        "text": "day"
      },
      {
        "start": 1054.799,
        "duration": 4.801,
        "text": "and the service itself scale to hundreds"
      },
      {
        "start": 1057.6,
        "duration": 5.199,
        "text": "of instances"
      },
      {
        "start": 1059.6,
        "duration": 4.8,
        "text": "so generally um on on kind of like"
      },
      {
        "start": 1062.799,
        "duration": 4.641,
        "text": "developer velocity side"
      },
      {
        "start": 1064.4,
        "duration": 4.32,
        "text": "the um we also noticed that service"
      },
      {
        "start": 1067.44,
        "duration": 3.44,
        "text": "becomes a liability"
      },
      {
        "start": 1068.72,
        "duration": 4.079,
        "text": "um so for example when future teams need"
      },
      {
        "start": 1070.88,
        "duration": 4.4,
        "text": "to write a simplest possible"
      },
      {
        "start": 1072.799,
        "duration": 3.441,
        "text": "sql query to you know get the review"
      },
      {
        "start": 1075.28,
        "duration": 4.0,
        "text": "content from"
      },
      {
        "start": 1076.24,
        "duration": 4.24,
        "text": "uh from reviews table in cassandra and"
      },
      {
        "start": 1079.28,
        "duration": 3.759,
        "text": "they would need to do"
      },
      {
        "start": 1080.48,
        "duration": 3.6,
        "text": "a lot of steps so they would need to"
      },
      {
        "start": 1083.039,
        "duration": 3.281,
        "text": "obviously write some"
      },
      {
        "start": 1084.08,
        "duration": 3.12,
        "text": "you know python code write their client"
      },
      {
        "start": 1086.32,
        "duration": 2.88,
        "text": "and"
      },
      {
        "start": 1087.2,
        "duration": 3.359,
        "text": "the logic that actually executes the"
      },
      {
        "start": 1089.2,
        "duration": 3.599,
        "text": "query"
      },
      {
        "start": 1090.559,
        "duration": 3.921,
        "text": "they would also need to write unit and"
      },
      {
        "start": 1092.799,
        "duration": 4.24,
        "text": "integration tests"
      },
      {
        "start": 1094.48,
        "duration": 3.199,
        "text": "um they would also need to write swagger"
      },
      {
        "start": 1097.039,
        "duration": 3.681,
        "text": "specs"
      },
      {
        "start": 1097.679,
        "duration": 4.081,
        "text": "to kind of expose the the api and in a"
      },
      {
        "start": 1100.72,
        "duration": 3.36,
        "text": "bunch of config"
      },
      {
        "start": 1101.76,
        "duration": 3.919,
        "text": "values in fake data uh to kind of like"
      },
      {
        "start": 1104.08,
        "duration": 4.959,
        "text": "rub wrap up the setup"
      },
      {
        "start": 1105.679,
        "duration": 5.601,
        "text": "so that is a lot of boilerplate just to"
      },
      {
        "start": 1109.039,
        "duration": 3.121,
        "text": "work with the simplest possible query to"
      },
      {
        "start": 1111.28,
        "duration": 2.56,
        "text": "cassandra"
      },
      {
        "start": 1112.16,
        "duration": 4.639,
        "text": "and so it became clear to us that the"
      },
      {
        "start": 1113.84,
        "duration": 5.6,
        "text": "system needed a replacement"
      },
      {
        "start": 1116.799,
        "duration": 4.24,
        "text": "an interesting story when i joined yale"
      },
      {
        "start": 1119.44,
        "duration": 4.479,
        "text": "for the first time probably about"
      },
      {
        "start": 1121.039,
        "duration": 4.721,
        "text": "four years ago i i was getting a tour"
      },
      {
        "start": 1123.919,
        "duration": 2.961,
        "text": "around the office and i saw an engineer"
      },
      {
        "start": 1125.76,
        "duration": 4.08,
        "text": "was writing this"
      },
      {
        "start": 1126.88,
        "duration": 5.52,
        "text": "um schema on the whiteboard and this is"
      },
      {
        "start": 1129.84,
        "duration": 4.8,
        "text": "probably the first time i actually saw"
      },
      {
        "start": 1132.4,
        "duration": 3.2,
        "text": "apollo and it sort of remind me of my"
      },
      {
        "start": 1134.64,
        "duration": 3.039,
        "text": "reaction"
      },
      {
        "start": 1135.6,
        "duration": 3.84,
        "text": "ironically it reminds me of my reaction"
      },
      {
        "start": 1137.679,
        "duration": 3.36,
        "text": "on my first day when i was thinking what"
      },
      {
        "start": 1139.44,
        "duration": 2.32,
        "text": "is what is even going on what is this"
      },
      {
        "start": 1141.039,
        "duration": 3.441,
        "text": "apollo"
      },
      {
        "start": 1141.76,
        "duration": 5.039,
        "text": "uh and i also found out about uh"
      },
      {
        "start": 1144.48,
        "duration": 4.64,
        "text": "cassandra that yelp is using cassandra"
      },
      {
        "start": 1146.799,
        "duration": 4.24,
        "text": "on pretty much my first day from this"
      },
      {
        "start": 1149.12,
        "duration": 3.36,
        "text": "schema on the whiteboard from this"
      },
      {
        "start": 1151.039,
        "duration": 4.64,
        "text": "beautiful drawing"
      },
      {
        "start": 1152.48,
        "duration": 4.64,
        "text": "you know so anyway so when we were"
      },
      {
        "start": 1155.679,
        "duration": 2.801,
        "text": "considering the requirements for the"
      },
      {
        "start": 1157.12,
        "duration": 3.52,
        "text": "cassandra uh"
      },
      {
        "start": 1158.48,
        "duration": 3.84,
        "text": "proxy replacement there's primarily two"
      },
      {
        "start": 1160.64,
        "duration": 4.88,
        "text": "things that we were looking at"
      },
      {
        "start": 1162.32,
        "duration": 6.4,
        "text": "so first is we wanted to take uh"
      },
      {
        "start": 1165.52,
        "duration": 4.159,
        "text": "the main advantage of apollo that is"
      },
      {
        "start": 1168.72,
        "duration": 3.52,
        "text": "essentially"
      },
      {
        "start": 1169.679,
        "duration": 4.24,
        "text": "isolation of complexity of accessing"
      },
      {
        "start": 1172.24,
        "duration": 2.64,
        "text": "managing infrastructure for the future"
      },
      {
        "start": 1173.919,
        "duration": 2.64,
        "text": "teams"
      },
      {
        "start": 1174.88,
        "duration": 3.6,
        "text": "but at the same time we wanted to attack"
      },
      {
        "start": 1176.559,
        "duration": 4.401,
        "text": "its main shortcoming"
      },
      {
        "start": 1178.48,
        "duration": 3.6,
        "text": "we didn't want to have any client"
      },
      {
        "start": 1180.96,
        "duration": 3.839,
        "text": "business logic"
      },
      {
        "start": 1182.08,
        "duration": 4.24,
        "text": "exist in the service it should be"
      },
      {
        "start": 1184.799,
        "duration": 4.721,
        "text": "actually just a simple"
      },
      {
        "start": 1186.32,
        "duration": 4.239,
        "text": "thin layer on top of cassandra and kind"
      },
      {
        "start": 1189.52,
        "duration": 4.24,
        "text": "of"
      },
      {
        "start": 1190.559,
        "duration": 4.48,
        "text": "further um further side effects that we"
      },
      {
        "start": 1193.76,
        "duration": 2.72,
        "text": "wanted to have is"
      },
      {
        "start": 1195.039,
        "duration": 3.601,
        "text": "obviously we wanted to improve the"
      },
      {
        "start": 1196.48,
        "duration": 3.76,
        "text": "developer velocity um so that engineers"
      },
      {
        "start": 1198.64,
        "duration": 3.279,
        "text": "don't have to write as much code as much"
      },
      {
        "start": 1200.24,
        "duration": 4.08,
        "text": "boilerplate to just run as simple as"
      },
      {
        "start": 1201.919,
        "duration": 4.0,
        "text": "possible query on cassandra cluster"
      },
      {
        "start": 1204.32,
        "duration": 3.359,
        "text": "and we wanted to also simplify the"
      },
      {
        "start": 1205.919,
        "duration": 4.24,
        "text": "access to the cassandra cluster"
      },
      {
        "start": 1207.679,
        "duration": 3.36,
        "text": "um engineer we have uh modernize our"
      },
      {
        "start": 1210.159,
        "duration": 3.361,
        "text": "technology"
      },
      {
        "start": 1211.039,
        "duration": 4.161,
        "text": "um because um apollo has been in"
      },
      {
        "start": 1213.52,
        "duration": 2.08,
        "text": "production for about six or seven years"
      },
      {
        "start": 1215.2,
        "duration": 2.56,
        "text": "now"
      },
      {
        "start": 1215.6,
        "duration": 3.76,
        "text": "um and it's about time to do the"
      },
      {
        "start": 1217.76,
        "duration": 3.76,
        "text": "modernization"
      },
      {
        "start": 1219.36,
        "duration": 4.799,
        "text": "so this is how we found out about"
      },
      {
        "start": 1221.52,
        "duration": 4.96,
        "text": "stargate project"
      },
      {
        "start": 1224.159,
        "duration": 4.721,
        "text": "so you can generally think of stargate"
      },
      {
        "start": 1226.48,
        "duration": 5.679,
        "text": "as an api for your database"
      },
      {
        "start": 1228.88,
        "duration": 5.6,
        "text": "it is really just a layer between your"
      },
      {
        "start": 1232.159,
        "duration": 3.841,
        "text": "application and the database"
      },
      {
        "start": 1234.48,
        "duration": 3.28,
        "text": "and it's implemented and used in"
      },
      {
        "start": 1236.0,
        "duration": 4.72,
        "text": "production by data stocks"
      },
      {
        "start": 1237.76,
        "duration": 4.0,
        "text": "and the organizer of this midas so let"
      },
      {
        "start": 1240.72,
        "duration": 3.04,
        "text": "me walk you on"
      },
      {
        "start": 1241.76,
        "duration": 3.52,
        "text": "um going kind of like a little bit"
      },
      {
        "start": 1243.76,
        "duration": 4.88,
        "text": "deeper on into how"
      },
      {
        "start": 1245.28,
        "duration": 5.279,
        "text": "this actually works is you can think of"
      },
      {
        "start": 1248.64,
        "duration": 2.56,
        "text": "on a very high level about cassandra"
      },
      {
        "start": 1250.559,
        "duration": 3.36,
        "text": "cluster"
      },
      {
        "start": 1251.2,
        "duration": 4.24,
        "text": "as a set of nodes that are organized in"
      },
      {
        "start": 1253.919,
        "duration": 4.64,
        "text": "a ring"
      },
      {
        "start": 1255.44,
        "duration": 3.68,
        "text": "and so when a request comes in one of"
      },
      {
        "start": 1258.559,
        "duration": 3.681,
        "text": "the"
      },
      {
        "start": 1259.12,
        "duration": 4.799,
        "text": "nodes is selected as coordinator and its"
      },
      {
        "start": 1262.24,
        "duration": 3.76,
        "text": "role is basically to"
      },
      {
        "start": 1263.919,
        "duration": 4.24,
        "text": "manage the entire life cycle of the"
      },
      {
        "start": 1266.0,
        "duration": 6.0,
        "text": "request and among other things"
      },
      {
        "start": 1268.159,
        "duration": 6.241,
        "text": "it should select the proper um proper"
      },
      {
        "start": 1272.0,
        "duration": 3.6,
        "text": "replicas of proper nodes that have the"
      },
      {
        "start": 1274.4,
        "duration": 4.56,
        "text": "copy of the data"
      },
      {
        "start": 1275.6,
        "duration": 5.28,
        "text": "query them gather the guided reply and"
      },
      {
        "start": 1278.96,
        "duration": 4.959,
        "text": "send it back to the client"
      },
      {
        "start": 1280.88,
        "duration": 5.84,
        "text": "so stargate is based on this um"
      },
      {
        "start": 1283.919,
        "duration": 4.401,
        "text": "on this concept of coordinator node and"
      },
      {
        "start": 1286.72,
        "duration": 3.439,
        "text": "it's sort of sort of very similar to you"
      },
      {
        "start": 1288.32,
        "duration": 4.4,
        "text": "know fat client notion"
      },
      {
        "start": 1290.159,
        "duration": 3.76,
        "text": "um but it generally means when the"
      },
      {
        "start": 1292.72,
        "duration": 2.959,
        "text": "target is deployed"
      },
      {
        "start": 1293.919,
        "duration": 3.281,
        "text": "it joins cassandra cluster as a"
      },
      {
        "start": 1295.679,
        "duration": 3.12,
        "text": "coordinator node um"
      },
      {
        "start": 1297.2,
        "duration": 3.44,
        "text": "but the important distinction is it"
      },
      {
        "start": 1298.799,
        "duration": 4.161,
        "text": "doesn't store any data"
      },
      {
        "start": 1300.64,
        "duration": 3.68,
        "text": "and so this allows us to have a very"
      },
      {
        "start": 1302.96,
        "duration": 4.0,
        "text": "interesting"
      },
      {
        "start": 1304.32,
        "duration": 3.599,
        "text": "setup so sort of side effect of this is"
      },
      {
        "start": 1306.96,
        "duration": 4.079,
        "text": "we could"
      },
      {
        "start": 1307.919,
        "duration": 4.24,
        "text": "ideally scale up this compute layer the"
      },
      {
        "start": 1311.039,
        "duration": 4.481,
        "text": "stargate"
      },
      {
        "start": 1312.159,
        "duration": 5.841,
        "text": "independently of the storage layer um"
      },
      {
        "start": 1315.52,
        "duration": 4.08,
        "text": "and generally on a very high level uh"
      },
      {
        "start": 1318.0,
        "duration": 2.08,
        "text": "sort of like a high level architecture"
      },
      {
        "start": 1319.6,
        "duration": 3.12,
        "text": "is"
      },
      {
        "start": 1320.08,
        "duration": 3.76,
        "text": "um it joins the the cluster as a"
      },
      {
        "start": 1322.72,
        "duration": 3.12,
        "text": "coordinated node"
      },
      {
        "start": 1323.84,
        "duration": 4.64,
        "text": "but at the same time it also exposes a"
      },
      {
        "start": 1325.84,
        "duration": 6.079,
        "text": "set of apis for the easier access"
      },
      {
        "start": 1328.48,
        "duration": 3.92,
        "text": "of future teams and most notable ones"
      },
      {
        "start": 1331.919,
        "duration": 3.841,
        "text": "are"
      },
      {
        "start": 1332.4,
        "duration": 6.639,
        "text": "you know a rest api and graphql api um"
      },
      {
        "start": 1335.76,
        "duration": 5.6,
        "text": "and we went with graphql api and let me"
      },
      {
        "start": 1339.039,
        "duration": 4.241,
        "text": "let me just walk you through the kind of"
      },
      {
        "start": 1341.36,
        "duration": 5.12,
        "text": "like a few reasons why we chose to go"
      },
      {
        "start": 1343.28,
        "duration": 6.56,
        "text": "with the graphql"
      },
      {
        "start": 1346.48,
        "duration": 3.679,
        "text": "so graphql api is basically allows us to"
      },
      {
        "start": 1349.84,
        "duration": 3.36,
        "text": "have"
      },
      {
        "start": 1350.159,
        "duration": 4.801,
        "text": "a type save api right it solves an"
      },
      {
        "start": 1353.2,
        "duration": 3.359,
        "text": "interesting problem kind of very common"
      },
      {
        "start": 1354.96,
        "duration": 4.16,
        "text": "problem of"
      },
      {
        "start": 1356.559,
        "duration": 3.441,
        "text": "over and under fetching of the data it"
      },
      {
        "start": 1359.12,
        "duration": 3.76,
        "text": "allows graphql"
      },
      {
        "start": 1360.0,
        "duration": 5.039,
        "text": "allows feature teams to define the exact"
      },
      {
        "start": 1362.88,
        "duration": 4.32,
        "text": "fields that needs to be returned"
      },
      {
        "start": 1365.039,
        "duration": 4.241,
        "text": "sort of solving this problem very"
      },
      {
        "start": 1367.2,
        "duration": 3.839,
        "text": "naturally and at the same time it also"
      },
      {
        "start": 1369.28,
        "duration": 5.6,
        "text": "allows"
      },
      {
        "start": 1371.039,
        "duration": 5.681,
        "text": "to run multiple queries in one"
      },
      {
        "start": 1374.88,
        "duration": 4.24,
        "text": "atomic request sort of like an atomic"
      },
      {
        "start": 1376.72,
        "duration": 2.8,
        "text": "fashion um for example when we want to"
      },
      {
        "start": 1379.12,
        "duration": 3.2,
        "text": "keep"
      },
      {
        "start": 1379.52,
        "duration": 4.56,
        "text": "multiple views of the same data on or we"
      },
      {
        "start": 1382.32,
        "duration": 2.719,
        "text": "want to update multiple tables at the"
      },
      {
        "start": 1384.08,
        "duration": 3.76,
        "text": "same time"
      },
      {
        "start": 1385.039,
        "duration": 4.161,
        "text": "uh avoiding avoiding the network round"
      },
      {
        "start": 1387.84,
        "duration": 4.88,
        "text": "trips and"
      },
      {
        "start": 1389.2,
        "duration": 6.24,
        "text": "saving the latency obviously and we also"
      },
      {
        "start": 1392.72,
        "duration": 4.079,
        "text": "can have custom formatters defined so"
      },
      {
        "start": 1395.44,
        "duration": 3.68,
        "text": "for example we could have"
      },
      {
        "start": 1396.799,
        "duration": 3.921,
        "text": "a custom date formatting custom text"
      },
      {
        "start": 1399.12,
        "duration": 3.439,
        "text": "transformation"
      },
      {
        "start": 1400.72,
        "duration": 3.52,
        "text": "for example we could have uh numbers"
      },
      {
        "start": 1402.559,
        "duration": 3.281,
        "text": "formatting all of all of the"
      },
      {
        "start": 1404.24,
        "duration": 3.28,
        "text": "all of it done kind of like on on the"
      },
      {
        "start": 1405.84,
        "duration": 3.04,
        "text": "client side um"
      },
      {
        "start": 1407.52,
        "duration": 3.84,
        "text": "and it would be a lot more harder to"
      },
      {
        "start": 1408.88,
        "duration": 4.72,
        "text": "achieve with the crude interface"
      },
      {
        "start": 1411.36,
        "duration": 3.04,
        "text": "with the rest api um and generally"
      },
      {
        "start": 1413.6,
        "duration": 2.959,
        "text": "finally"
      },
      {
        "start": 1414.4,
        "duration": 3.36,
        "text": "graphql is becoming a new standard for"
      },
      {
        "start": 1416.559,
        "duration": 3.681,
        "text": "api development"
      },
      {
        "start": 1417.76,
        "duration": 4.24,
        "text": "and it's used extensively um right now"
      },
      {
        "start": 1420.24,
        "duration": 4.24,
        "text": "at facebook twitter github"
      },
      {
        "start": 1422.0,
        "duration": 3.919,
        "text": "um as well as yelp we've been using help"
      },
      {
        "start": 1424.48,
        "duration": 2.4,
        "text": "we'll be using graphql for quite some"
      },
      {
        "start": 1425.919,
        "duration": 2.801,
        "text": "time now"
      },
      {
        "start": 1426.88,
        "duration": 4.24,
        "text": "and there's already a lot of feature"
      },
      {
        "start": 1428.72,
        "duration": 5.52,
        "text": "teams that um kind of get used to you"
      },
      {
        "start": 1431.12,
        "duration": 4.88,
        "text": "to using um graphql"
      },
      {
        "start": 1434.24,
        "duration": 3.12,
        "text": "and so we assume that the transition to"
      },
      {
        "start": 1436.0,
        "duration": 2.96,
        "text": "graphql based api"
      },
      {
        "start": 1437.36,
        "duration": 4.08,
        "text": "is going to be a lot easier for the"
      },
      {
        "start": 1438.96,
        "duration": 4.16,
        "text": "future teams"
      },
      {
        "start": 1441.44,
        "duration": 3.76,
        "text": "and so let me tell you a little bit"
      },
      {
        "start": 1443.12,
        "duration": 4.48,
        "text": "about our progress so far"
      },
      {
        "start": 1445.2,
        "duration": 3.12,
        "text": "um so we give it kind of like break"
      },
      {
        "start": 1447.6,
        "duration": 2.88,
        "text": "broke down"
      },
      {
        "start": 1448.32,
        "duration": 3.44,
        "text": "our um transition internal transition"
      },
      {
        "start": 1450.48,
        "duration": 4.96,
        "text": "from apollo to"
      },
      {
        "start": 1451.76,
        "duration": 5.2,
        "text": "stargate into several steps so"
      },
      {
        "start": 1455.44,
        "duration": 3.359,
        "text": "we essentially started with just a"
      },
      {
        "start": 1456.96,
        "duration": 5.76,
        "text": "simple mvp deployment of"
      },
      {
        "start": 1458.799,
        "duration": 6.081,
        "text": "one cassandra note and then we"
      },
      {
        "start": 1462.72,
        "duration": 3.76,
        "text": "did a few interesting tweaking to"
      },
      {
        "start": 1464.88,
        "duration": 2.64,
        "text": "certain aspects of the deployment right"
      },
      {
        "start": 1466.48,
        "duration": 3.12,
        "text": "so we looked at"
      },
      {
        "start": 1467.52,
        "duration": 5.36,
        "text": "the client libraries essentially a way"
      },
      {
        "start": 1469.6,
        "duration": 5.6,
        "text": "of uh is this a way how um"
      },
      {
        "start": 1472.88,
        "duration": 3.679,
        "text": "uh services interact with each other in"
      },
      {
        "start": 1475.2,
        "duration": 3.12,
        "text": "yelp's ecosystem"
      },
      {
        "start": 1476.559,
        "duration": 3.12,
        "text": "um so we did a bit of tweaking to"
      },
      {
        "start": 1478.32,
        "duration": 3.52,
        "text": "graphql playground i'll"
      },
      {
        "start": 1479.679,
        "duration": 3.921,
        "text": "i'll share a few interesting tips there"
      },
      {
        "start": 1481.84,
        "duration": 3.52,
        "text": "um and then finally"
      },
      {
        "start": 1483.6,
        "duration": 3.52,
        "text": "we did a few interesting developments on"
      },
      {
        "start": 1485.36,
        "duration": 4.08,
        "text": "the testing and a probability side of"
      },
      {
        "start": 1487.12,
        "duration": 2.32,
        "text": "things"
      },
      {
        "start": 1489.6,
        "duration": 5.679,
        "text": "so before we even start any deployment"
      },
      {
        "start": 1493.52,
        "duration": 3.84,
        "text": "we kind of wanted to look at the"
      },
      {
        "start": 1495.279,
        "duration": 3.76,
        "text": "stargate and understand what are the"
      },
      {
        "start": 1497.36,
        "duration": 4.64,
        "text": "limiting factors in setting"
      },
      {
        "start": 1499.039,
        "duration": 5.201,
        "text": "up this uh this kind of like thin layer"
      },
      {
        "start": 1502.0,
        "duration": 3.039,
        "text": "how does the resources scale as we scale"
      },
      {
        "start": 1504.24,
        "duration": 3.039,
        "text": "our service"
      },
      {
        "start": 1505.039,
        "duration": 4.0,
        "text": "um is it stable are there any crashes"
      },
      {
        "start": 1507.279,
        "duration": 3.361,
        "text": "memory leaks are there any resource"
      },
      {
        "start": 1509.039,
        "duration": 4.081,
        "text": "limitations"
      },
      {
        "start": 1510.64,
        "duration": 3.68,
        "text": "and so we did this very basic simple mvp"
      },
      {
        "start": 1513.12,
        "duration": 3.12,
        "text": "deployment setup"
      },
      {
        "start": 1514.32,
        "duration": 4.16,
        "text": "with just a single stargate node that"
      },
      {
        "start": 1516.24,
        "duration": 2.559,
        "text": "joined a test cassandra cluster with"
      },
      {
        "start": 1518.48,
        "duration": 3.52,
        "text": "three"
      },
      {
        "start": 1518.799,
        "duration": 4.48,
        "text": "separate replicas it had a uh so we ran"
      },
      {
        "start": 1522.0,
        "duration": 3.679,
        "text": "100 threads"
      },
      {
        "start": 1523.279,
        "duration": 4.64,
        "text": "and we were trying to keep the load um"
      },
      {
        "start": 1525.679,
        "duration": 3.761,
        "text": "up to 3000 requests per seconds on the"
      },
      {
        "start": 1527.919,
        "duration": 3.76,
        "text": "cluster"
      },
      {
        "start": 1529.44,
        "duration": 3.04,
        "text": "um and there's a few scenarios right so"
      },
      {
        "start": 1531.679,
        "duration": 3.36,
        "text": "we"
      },
      {
        "start": 1532.48,
        "duration": 3.12,
        "text": "were keeping the load for 24 hours kind"
      },
      {
        "start": 1535.039,
        "duration": 3.361,
        "text": "of"
      },
      {
        "start": 1535.6,
        "duration": 4.559,
        "text": "continuously and we wanted to test how"
      },
      {
        "start": 1538.4,
        "duration": 3.92,
        "text": "the target would behave if we would do"
      },
      {
        "start": 1540.159,
        "duration": 3.841,
        "text": "the rolling restart of cassandra cluster"
      },
      {
        "start": 1542.32,
        "duration": 3.359,
        "text": "and what if we do the restart of the"
      },
      {
        "start": 1544.0,
        "duration": 3.44,
        "text": "instance itself"
      },
      {
        "start": 1545.679,
        "duration": 3.841,
        "text": "and we also looked at the authentication"
      },
      {
        "start": 1547.44,
        "duration": 2.96,
        "text": "token expiration in the target node"
      },
      {
        "start": 1549.52,
        "duration": 2.399,
        "text": "itself"
      },
      {
        "start": 1550.4,
        "duration": 3.36,
        "text": "so basically what's going to happen if"
      },
      {
        "start": 1551.919,
        "duration": 4.801,
        "text": "the authentication token expires is"
      },
      {
        "start": 1553.76,
        "duration": 3.36,
        "text": "going to start running throwing errors"
      },
      {
        "start": 1556.72,
        "duration": 2.88,
        "text": "or"
      },
      {
        "start": 1557.12,
        "duration": 3.52,
        "text": "you know latency is going to spike up"
      },
      {
        "start": 1559.6,
        "duration": 2.72,
        "text": "and"
      },
      {
        "start": 1560.64,
        "duration": 3.36,
        "text": "so you can see on the graph kind of like"
      },
      {
        "start": 1562.32,
        "duration": 4.16,
        "text": "the result of our test is um"
      },
      {
        "start": 1564.0,
        "duration": 4.64,
        "text": "we were gradually increasing the load on"
      },
      {
        "start": 1566.48,
        "duration": 3.92,
        "text": "a cluster and we kept it at around 3000"
      },
      {
        "start": 1568.64,
        "duration": 3.36,
        "text": "requests per second for the majority of"
      },
      {
        "start": 1570.4,
        "duration": 4.24,
        "text": "the day"
      },
      {
        "start": 1572.0,
        "duration": 4.24,
        "text": "and in terms of latencies we kind of"
      },
      {
        "start": 1574.64,
        "duration": 2.8,
        "text": "feel that the latencies are in a very"
      },
      {
        "start": 1576.24,
        "duration": 3.12,
        "text": "acceptable range"
      },
      {
        "start": 1577.44,
        "duration": 4.32,
        "text": "um you can see that then you know the"
      },
      {
        "start": 1579.36,
        "duration": 3.12,
        "text": "high tail latency spiked a little bit um"
      },
      {
        "start": 1581.76,
        "duration": 3.84,
        "text": "at the end"
      },
      {
        "start": 1582.48,
        "duration": 5.76,
        "text": "um but we did a bit of jvm tuning to"
      },
      {
        "start": 1585.6,
        "duration": 5.28,
        "text": "bring this latencies down a little bit"
      },
      {
        "start": 1588.24,
        "duration": 4.799,
        "text": "um so we kind of reuse the cassandra uh"
      },
      {
        "start": 1590.88,
        "duration": 4.159,
        "text": "settings uh just under jvm settings"
      },
      {
        "start": 1593.039,
        "duration": 4.721,
        "text": "there"
      },
      {
        "start": 1595.039,
        "duration": 3.12,
        "text": "and so as a result of of the deployment"
      },
      {
        "start": 1597.76,
        "duration": 1.84,
        "text": "we"
      },
      {
        "start": 1598.159,
        "duration": 3.281,
        "text": "we kind of understood that the memory is"
      },
      {
        "start": 1599.6,
        "duration": 3.84,
        "text": "generally stable there are no leaks"
      },
      {
        "start": 1601.44,
        "duration": 3.52,
        "text": "uh the cpu load is increased with the"
      },
      {
        "start": 1603.44,
        "duration": 3.359,
        "text": "amount of throughput that we have the"
      },
      {
        "start": 1604.96,
        "duration": 3.92,
        "text": "way that we put at the system"
      },
      {
        "start": 1606.799,
        "duration": 3.681,
        "text": "um as i mentioned we also did a bit of"
      },
      {
        "start": 1608.88,
        "duration": 4.08,
        "text": "tuning to the jvm to"
      },
      {
        "start": 1610.48,
        "duration": 3.36,
        "text": "that decrease the high latencies a"
      },
      {
        "start": 1612.96,
        "duration": 3.199,
        "text": "little bit"
      },
      {
        "start": 1613.84,
        "duration": 3.92,
        "text": "uh and so about the authentication"
      },
      {
        "start": 1616.159,
        "duration": 4.081,
        "text": "talking we noticed that when it"
      },
      {
        "start": 1617.76,
        "duration": 3.36,
        "text": "it has expired the latencies spiked"
      },
      {
        "start": 1620.24,
        "duration": 2.08,
        "text": "immersively"
      },
      {
        "start": 1621.12,
        "duration": 3.12,
        "text": "because the servers just started"
      },
      {
        "start": 1622.32,
        "duration": 3.599,
        "text": "erroring out and"
      },
      {
        "start": 1624.24,
        "duration": 3.76,
        "text": "what we did is we basically disabled"
      },
      {
        "start": 1625.919,
        "duration": 2.561,
        "text": "authentication token in favor of a more"
      },
      {
        "start": 1628.0,
        "duration": 2.96,
        "text": "sort of"
      },
      {
        "start": 1628.48,
        "duration": 4.16,
        "text": "sophisticated authentication uh strategy"
      },
      {
        "start": 1630.96,
        "duration": 2.719,
        "text": "which i will cover a bit later in the"
      },
      {
        "start": 1632.64,
        "duration": 4.56,
        "text": "sort of future work"
      },
      {
        "start": 1633.679,
        "duration": 5.841,
        "text": "uh uh area and and then in the end"
      },
      {
        "start": 1637.2,
        "duration": 4.079,
        "text": "we automated the entire benchmarking"
      },
      {
        "start": 1639.52,
        "duration": 3.92,
        "text": "setup so that we can run"
      },
      {
        "start": 1641.279,
        "duration": 3.76,
        "text": "the setup at any given moment um you"
      },
      {
        "start": 1643.44,
        "duration": 3.52,
        "text": "know going forward as we do more"
      },
      {
        "start": 1645.039,
        "duration": 5.441,
        "text": "development to the stargate as we"
      },
      {
        "start": 1646.96,
        "duration": 3.52,
        "text": "do the migration of clients"
      },
      {
        "start": 1650.799,
        "duration": 3.36,
        "text": "so let me tell you a little bit about"
      },
      {
        "start": 1652.399,
        "duration": 4.0,
        "text": "the client libraries so"
      },
      {
        "start": 1654.159,
        "duration": 4.561,
        "text": "services at yelp um generally"
      },
      {
        "start": 1656.399,
        "duration": 5.201,
        "text": "communicate with each other"
      },
      {
        "start": 1658.72,
        "duration": 5.04,
        "text": "not through directly managing you know"
      },
      {
        "start": 1661.6,
        "duration": 4.799,
        "text": "http queries and responses"
      },
      {
        "start": 1663.76,
        "duration": 4.08,
        "text": "so we use um client libraries and so our"
      },
      {
        "start": 1666.399,
        "duration": 3.28,
        "text": "current approach is to generate"
      },
      {
        "start": 1667.84,
        "duration": 3.76,
        "text": "automatically generate client libraries"
      },
      {
        "start": 1669.679,
        "duration": 3.921,
        "text": "from uh swagger specs"
      },
      {
        "start": 1671.6,
        "duration": 3.52,
        "text": "um and so this is what we decided to do"
      },
      {
        "start": 1673.6,
        "duration": 4.88,
        "text": "with the stargate we decided to"
      },
      {
        "start": 1675.12,
        "duration": 5.76,
        "text": "kind of like leverage this um mature uh"
      },
      {
        "start": 1678.48,
        "duration": 3.76,
        "text": "mature infrastructure mature client lib"
      },
      {
        "start": 1680.88,
        "duration": 3.6,
        "text": "infrastructure at yelp"
      },
      {
        "start": 1682.24,
        "duration": 4.96,
        "text": "to also generate automatically generate"
      },
      {
        "start": 1684.48,
        "duration": 5.439,
        "text": "the client leave for the stargate"
      },
      {
        "start": 1687.2,
        "duration": 4.16,
        "text": "and our swag spec looked something very"
      },
      {
        "start": 1689.919,
        "duration": 4.321,
        "text": "close to to this uh"
      },
      {
        "start": 1691.36,
        "duration": 3.76,
        "text": "code um we basically exposed a single"
      },
      {
        "start": 1694.24,
        "duration": 3.919,
        "text": "endpoint"
      },
      {
        "start": 1695.12,
        "duration": 4.159,
        "text": "where client can give key space that"
      },
      {
        "start": 1698.159,
        "duration": 3.361,
        "text": "they need to access"
      },
      {
        "start": 1699.279,
        "duration": 4.561,
        "text": "and the sort of the body the actual"
      },
      {
        "start": 1701.52,
        "duration": 6.0,
        "text": "graphql request"
      },
      {
        "start": 1703.84,
        "duration": 5.439,
        "text": "and on the client side um they"
      },
      {
        "start": 1707.52,
        "duration": 3.68,
        "text": "so the client the future teams when they"
      },
      {
        "start": 1709.279,
        "duration": 4.801,
        "text": "work with a stargate"
      },
      {
        "start": 1711.2,
        "duration": 4.8,
        "text": "they work with a service as if it's any"
      },
      {
        "start": 1714.08,
        "duration": 3.36,
        "text": "other service in yelp's ecosystem"
      },
      {
        "start": 1716.0,
        "duration": 3.12,
        "text": "so what they really need to do is to"
      },
      {
        "start": 1717.44,
        "duration": 4.88,
        "text": "just import the library"
      },
      {
        "start": 1719.12,
        "duration": 6.24,
        "text": "um call the call the endpoint and pass"
      },
      {
        "start": 1722.32,
        "duration": 4.479,
        "text": "their um quitting and get the result"
      },
      {
        "start": 1725.36,
        "duration": 3.439,
        "text": "back so very kind of like very simple"
      },
      {
        "start": 1726.799,
        "duration": 4.161,
        "text": "sort of reminds you of just querying the"
      },
      {
        "start": 1728.799,
        "duration": 4.401,
        "text": "local package um so you don't even"
      },
      {
        "start": 1730.96,
        "duration": 3.839,
        "text": "know that the network request goes um"
      },
      {
        "start": 1733.2,
        "duration": 4.88,
        "text": "underneath"
      },
      {
        "start": 1734.799,
        "duration": 5.041,
        "text": "and kind of like having utilized this"
      },
      {
        "start": 1738.08,
        "duration": 4.479,
        "text": "mature infrastructure"
      },
      {
        "start": 1739.84,
        "duration": 3.28,
        "text": "gave us a few out of the box interesting"
      },
      {
        "start": 1742.559,
        "duration": 4.24,
        "text": "kind of like"
      },
      {
        "start": 1743.12,
        "duration": 6.159,
        "text": "properties um so clients"
      },
      {
        "start": 1746.799,
        "duration": 4.48,
        "text": "have automated service discovery of the"
      },
      {
        "start": 1749.279,
        "duration": 3.841,
        "text": "stargate instances they don't need to"
      },
      {
        "start": 1751.279,
        "duration": 3.921,
        "text": "you know directly write down the host"
      },
      {
        "start": 1753.12,
        "duration": 4.64,
        "text": "and part of the instances"
      },
      {
        "start": 1755.2,
        "duration": 4.4,
        "text": "the discovery is done automatically we"
      },
      {
        "start": 1757.76,
        "duration": 2.88,
        "text": "were also able to have a very granular"
      },
      {
        "start": 1759.6,
        "duration": 3.36,
        "text": "control of the"
      },
      {
        "start": 1760.64,
        "duration": 4.0,
        "text": "request budgets and the propagation of"
      },
      {
        "start": 1762.96,
        "duration": 3.199,
        "text": "distributed tracing headers so that we"
      },
      {
        "start": 1764.64,
        "duration": 3.519,
        "text": "could integrate a"
      },
      {
        "start": 1766.159,
        "duration": 3.12,
        "text": "stargate into our distributed tracing"
      },
      {
        "start": 1768.159,
        "duration": 3.201,
        "text": "infrastructure"
      },
      {
        "start": 1769.279,
        "duration": 3.76,
        "text": "and generally um with the client clip"
      },
      {
        "start": 1771.36,
        "duration": 3.919,
        "text": "you have out of the box"
      },
      {
        "start": 1773.039,
        "duration": 3.441,
        "text": "client-side observability metrics"
      },
      {
        "start": 1775.279,
        "duration": 3.12,
        "text": "available to you"
      },
      {
        "start": 1776.48,
        "duration": 5.6,
        "text": "and so we were able to integrate that in"
      },
      {
        "start": 1778.399,
        "duration": 7.041,
        "text": "our kind of like metrics dashboards"
      },
      {
        "start": 1782.08,
        "duration": 6.479,
        "text": "so in terms of graphql playground um"
      },
      {
        "start": 1785.44,
        "duration": 5.76,
        "text": "when clients want to iterate"
      },
      {
        "start": 1788.559,
        "duration": 5.201,
        "text": "on their queries the easiest and most"
      },
      {
        "start": 1791.2,
        "duration": 5.199,
        "text": "sort of widely adopted way of doing this"
      },
      {
        "start": 1793.76,
        "duration": 4.08,
        "text": "is through a playground it's essentially"
      },
      {
        "start": 1796.399,
        "duration": 4.721,
        "text": "a graphical interactive"
      },
      {
        "start": 1797.84,
        "duration": 6.319,
        "text": "in browser ede so we did uh"
      },
      {
        "start": 1801.12,
        "duration": 3.6,
        "text": "so when you um work with a graphql"
      },
      {
        "start": 1804.159,
        "duration": 2.4,
        "text": "playground"
      },
      {
        "start": 1804.72,
        "duration": 3.439,
        "text": "stargate gives a few interesting things"
      },
      {
        "start": 1806.559,
        "duration": 4.081,
        "text": "out of the box you could um"
      },
      {
        "start": 1808.159,
        "duration": 3.361,
        "text": "press on a schema or docs on the right"
      },
      {
        "start": 1810.64,
        "duration": 2.399,
        "text": "corner"
      },
      {
        "start": 1811.52,
        "duration": 3.2,
        "text": "and you can see all the available"
      },
      {
        "start": 1813.039,
        "duration": 3.681,
        "text": "operations that you can do on"
      },
      {
        "start": 1814.72,
        "duration": 4.0,
        "text": "a selected key space you know you can"
      },
      {
        "start": 1816.72,
        "duration": 4.079,
        "text": "add the table drop the table or"
      },
      {
        "start": 1818.72,
        "duration": 3.679,
        "text": "run the particular query mutation so"
      },
      {
        "start": 1820.799,
        "duration": 3.76,
        "text": "like everything that you probably need"
      },
      {
        "start": 1822.399,
        "duration": 4.4,
        "text": "to construct your query is available"
      },
      {
        "start": 1824.559,
        "duration": 4.401,
        "text": "right there in the ide"
      },
      {
        "start": 1826.799,
        "duration": 3.521,
        "text": "uh and we did a few interesting uh"
      },
      {
        "start": 1828.96,
        "duration": 4.16,
        "text": "tweaks to"
      },
      {
        "start": 1830.32,
        "duration": 4.079,
        "text": "kind of like improve the setup so we in"
      },
      {
        "start": 1833.12,
        "duration": 4.559,
        "text": "order to"
      },
      {
        "start": 1834.399,
        "duration": 5.681,
        "text": "limit the possibility um to run"
      },
      {
        "start": 1837.679,
        "duration": 3.12,
        "text": "a very damaging and possibly costly"
      },
      {
        "start": 1840.08,
        "duration": 3.199,
        "text": "queries"
      },
      {
        "start": 1840.799,
        "duration": 4.0,
        "text": "we only made playground available in"
      },
      {
        "start": 1843.279,
        "duration": 3.12,
        "text": "developing environment and disable that"
      },
      {
        "start": 1844.799,
        "duration": 4.721,
        "text": "completely in production"
      },
      {
        "start": 1846.399,
        "duration": 5.841,
        "text": "and we also disable the ability to run"
      },
      {
        "start": 1849.52,
        "duration": 4.32,
        "text": "schema table related queries for example"
      },
      {
        "start": 1852.24,
        "duration": 3.84,
        "text": "it's not possible to create"
      },
      {
        "start": 1853.84,
        "duration": 3.199,
        "text": "a table to create a key space or destroy"
      },
      {
        "start": 1856.08,
        "duration": 4.16,
        "text": "key space through"
      },
      {
        "start": 1857.039,
        "duration": 4.24,
        "text": "a playground on production and the way"
      },
      {
        "start": 1860.24,
        "duration": 2.4,
        "text": "we do it is a"
      },
      {
        "start": 1861.279,
        "duration": 3.361,
        "text": "sort of a very interesting topic in"
      },
      {
        "start": 1862.64,
        "duration": 3.84,
        "text": "itself and binola we'll share"
      },
      {
        "start": 1864.64,
        "duration": 4.8,
        "text": "a little more about it in in the next"
      },
      {
        "start": 1866.48,
        "duration": 5.039,
        "text": "topic in the next talk"
      },
      {
        "start": 1869.44,
        "duration": 3.44,
        "text": "and another interesting tweak that we"
      },
      {
        "start": 1871.519,
        "duration": 4.64,
        "text": "did is um"
      },
      {
        "start": 1872.88,
        "duration": 5.279,
        "text": "when client run their query uh"
      },
      {
        "start": 1876.159,
        "duration": 3.041,
        "text": "graphql query um they usually get the"
      },
      {
        "start": 1878.159,
        "duration": 3.36,
        "text": "response back in"
      },
      {
        "start": 1879.2,
        "duration": 3.04,
        "text": "sort of json format right um and we also"
      },
      {
        "start": 1881.519,
        "duration": 3.601,
        "text": "added"
      },
      {
        "start": 1882.24,
        "duration": 5.52,
        "text": "um the actual secret query that the"
      },
      {
        "start": 1885.12,
        "duration": 5.12,
        "text": "original graphql query was translated to"
      },
      {
        "start": 1887.76,
        "duration": 3.36,
        "text": "so that clients can't have visibility"
      },
      {
        "start": 1890.24,
        "duration": 2.319,
        "text": "into"
      },
      {
        "start": 1891.12,
        "duration": 3.12,
        "text": "what is actually happening underneath"
      },
      {
        "start": 1892.559,
        "duration": 2.96,
        "text": "what is the actual query that is being"
      },
      {
        "start": 1894.24,
        "duration": 5.279,
        "text": "run"
      },
      {
        "start": 1895.519,
        "duration": 6.081,
        "text": "by stargate so in terms of testing"
      },
      {
        "start": 1899.519,
        "duration": 3.441,
        "text": "um traditional union testing is a"
      },
      {
        "start": 1901.6,
        "duration": 3.199,
        "text": "relative state form"
      },
      {
        "start": 1902.96,
        "duration": 3.199,
        "text": "from the upstream service point of view"
      },
      {
        "start": 1904.799,
        "duration": 3.281,
        "text": "stargate service is just"
      },
      {
        "start": 1906.159,
        "duration": 3.681,
        "text": "no different than any other service"
      },
      {
        "start": 1908.08,
        "duration": 3.839,
        "text": "python service in the ops ecosystem"
      },
      {
        "start": 1909.84,
        "duration": 4.8,
        "text": "um so like all the best practices"
      },
      {
        "start": 1911.919,
        "duration": 5.041,
        "text": "involving you know mocking fixtures"
      },
      {
        "start": 1914.64,
        "duration": 3.919,
        "text": "are applied to our servers as well um so"
      },
      {
        "start": 1916.96,
        "duration": 3.28,
        "text": "joining that yelp we use you know pi"
      },
      {
        "start": 1918.559,
        "duration": 4.881,
        "text": "test and python mock libraries"
      },
      {
        "start": 1920.24,
        "duration": 5.52,
        "text": "to do the mocking of our service calls"
      },
      {
        "start": 1923.44,
        "duration": 3.2,
        "text": "a more interesting thing is integration"
      },
      {
        "start": 1925.76,
        "duration": 3.2,
        "text": "testing"
      },
      {
        "start": 1926.64,
        "duration": 4.159,
        "text": "and as opposed to just pure unit testing"
      },
      {
        "start": 1928.96,
        "duration": 3.92,
        "text": "which is entirely self-contained in"
      },
      {
        "start": 1930.799,
        "duration": 3.76,
        "text": "within a project and working with"
      },
      {
        "start": 1932.88,
        "duration": 3.44,
        "text": "acceptance testing raises certain"
      },
      {
        "start": 1934.559,
        "duration": 2.641,
        "text": "challenges um just because of the number"
      },
      {
        "start": 1936.32,
        "duration": 3.76,
        "text": "of real"
      },
      {
        "start": 1937.2,
        "duration": 3.92,
        "text": "external components that um a test rely"
      },
      {
        "start": 1940.08,
        "duration": 3.839,
        "text": "on"
      },
      {
        "start": 1941.12,
        "duration": 4.48,
        "text": "so in our setup we uh use an internal"
      },
      {
        "start": 1943.919,
        "duration": 2.721,
        "text": "tool at yelp that replaces docker"
      },
      {
        "start": 1945.6,
        "duration": 3.199,
        "text": "compose"
      },
      {
        "start": 1946.64,
        "duration": 3.039,
        "text": "that we kind of call you know yield"
      },
      {
        "start": 1948.799,
        "duration": 3.441,
        "text": "compose"
      },
      {
        "start": 1949.679,
        "duration": 3.921,
        "text": "uh and uh the original idea of the tool"
      },
      {
        "start": 1952.24,
        "duration": 2.24,
        "text": "is to just simplify the sort of"
      },
      {
        "start": 1953.6,
        "duration": 2.959,
        "text": "discovery"
      },
      {
        "start": 1954.48,
        "duration": 3.439,
        "text": "and the mark making service dependencies"
      },
      {
        "start": 1956.559,
        "duration": 3.681,
        "text": "a lot easier to handle for"
      },
      {
        "start": 1957.919,
        "duration": 4.64,
        "text": "the future teams let me just walk you"
      },
      {
        "start": 1960.24,
        "duration": 4.559,
        "text": "very quickly with a simple example of"
      },
      {
        "start": 1962.559,
        "duration": 3.281,
        "text": "how can this be done so when um"
      },
      {
        "start": 1964.799,
        "duration": 2.641,
        "text": "developers start"
      },
      {
        "start": 1965.84,
        "duration": 3.92,
        "text": "working with guild compose they really"
      },
      {
        "start": 1967.44,
        "duration": 4.479,
        "text": "only need to know four commands"
      },
      {
        "start": 1969.76,
        "duration": 3.44,
        "text": "how to start their playground how to how"
      },
      {
        "start": 1971.919,
        "duration": 3.12,
        "text": "to build how to start it"
      },
      {
        "start": 1973.2,
        "duration": 3.04,
        "text": "how to get a status of their playground"
      },
      {
        "start": 1975.039,
        "duration": 3.921,
        "text": "and how to stop it"
      },
      {
        "start": 1976.24,
        "duration": 3.36,
        "text": "after they're done and so it's a simple"
      },
      {
        "start": 1978.96,
        "duration": 2.48,
        "text": "example"
      },
      {
        "start": 1979.6,
        "duration": 3.36,
        "text": "imagine we have a very high level"
      },
      {
        "start": 1981.44,
        "duration": 3.68,
        "text": "service business details"
      },
      {
        "start": 1982.96,
        "duration": 3.839,
        "text": "and we want to write an integration test"
      },
      {
        "start": 1985.12,
        "duration": 4.88,
        "text": "uh kind of like end to end"
      },
      {
        "start": 1986.799,
        "duration": 5.921,
        "text": "so um when we want to actually test"
      },
      {
        "start": 1990.0,
        "duration": 4.48,
        "text": "end-to-end environment we need to know"
      },
      {
        "start": 1992.72,
        "duration": 3.52,
        "text": "all the services all the downstream"
      },
      {
        "start": 1994.48,
        "duration": 3.76,
        "text": "services that are being called by the"
      },
      {
        "start": 1996.24,
        "duration": 3.52,
        "text": "service that we want to test"
      },
      {
        "start": 1998.24,
        "duration": 3.2,
        "text": "and it's usually extremely complicated"
      },
      {
        "start": 1999.76,
        "duration": 4.96,
        "text": "to know the entire"
      },
      {
        "start": 2001.44,
        "duration": 6.4,
        "text": "request lifecycle um so what we do is we"
      },
      {
        "start": 2004.72,
        "duration": 4.799,
        "text": "allow each owner of the of the service"
      },
      {
        "start": 2007.84,
        "duration": 3.439,
        "text": "to define their own yield couples"
      },
      {
        "start": 2009.519,
        "duration": 4.241,
        "text": "dot yaml file where they essentially"
      },
      {
        "start": 2011.279,
        "duration": 4.561,
        "text": "point to a docker file um that that"
      },
      {
        "start": 2013.76,
        "duration": 4.72,
        "text": "shows how to build their service"
      },
      {
        "start": 2015.84,
        "duration": 3.6,
        "text": "and when each service has um this file"
      },
      {
        "start": 2018.48,
        "duration": 4.48,
        "text": "exposed"
      },
      {
        "start": 2019.44,
        "duration": 6.4,
        "text": "um when you run your playground"
      },
      {
        "start": 2022.96,
        "duration": 3.28,
        "text": "the yelp compose will recursively look"
      },
      {
        "start": 2025.84,
        "duration": 2.559,
        "text": "through"
      },
      {
        "start": 2026.24,
        "duration": 3.36,
        "text": "uh through the files and it will um"
      },
      {
        "start": 2028.399,
        "duration": 3.441,
        "text": "recursively build"
      },
      {
        "start": 2029.6,
        "duration": 4.0,
        "text": "like the one giant yield compose file"
      },
      {
        "start": 2031.84,
        "duration": 4.0,
        "text": "and build the environment out of it"
      },
      {
        "start": 2033.6,
        "duration": 4.16,
        "text": "so that means that when you want to test"
      },
      {
        "start": 2035.84,
        "duration": 2.559,
        "text": "your service you only really need to"
      },
      {
        "start": 2037.76,
        "duration": 3.279,
        "text": "know"
      },
      {
        "start": 2038.399,
        "duration": 4.081,
        "text": "first level dependencies um in our case"
      },
      {
        "start": 2041.039,
        "duration": 2.721,
        "text": "it's just user reviews and special"
      },
      {
        "start": 2042.48,
        "duration": 4.48,
        "text": "offers as examples"
      },
      {
        "start": 2043.76,
        "duration": 6.319,
        "text": "so that simplifies a lot on kind of like"
      },
      {
        "start": 2046.96,
        "duration": 3.119,
        "text": "testing side of things"
      },
      {
        "start": 2050.879,
        "duration": 3.841,
        "text": "so there's a few more interesting things"
      },
      {
        "start": 2052.639,
        "duration": 4.48,
        "text": "that we need to kind of bootstrap"
      },
      {
        "start": 2054.72,
        "duration": 3.6,
        "text": "the clients when they work with stargate"
      },
      {
        "start": 2057.119,
        "duration": 4.56,
        "text": "so we"
      },
      {
        "start": 2058.32,
        "duration": 6.48,
        "text": "created two simple files one is um"
      },
      {
        "start": 2061.679,
        "duration": 3.601,
        "text": "the one that would create a test key"
      },
      {
        "start": 2064.8,
        "duration": 2.0,
        "text": "space"
      },
      {
        "start": 2065.28,
        "duration": 3.04,
        "text": "and another that would create a test"
      },
      {
        "start": 2066.8,
        "duration": 4.72,
        "text": "table um that would"
      },
      {
        "start": 2068.32,
        "duration": 7.68,
        "text": "populate um stargate on start"
      },
      {
        "start": 2071.52,
        "duration": 7.359,
        "text": "so when yelp compost starts"
      },
      {
        "start": 2076.0,
        "duration": 3.76,
        "text": "our service this is what is happening"
      },
      {
        "start": 2078.879,
        "duration": 3.04,
        "text": "very roughly"
      },
      {
        "start": 2079.76,
        "duration": 3.44,
        "text": "um we essentially start the actual"
      },
      {
        "start": 2081.919,
        "duration": 3.76,
        "text": "stargate instance"
      },
      {
        "start": 2083.2,
        "duration": 3.04,
        "text": "um we wait until it's healthy and it's"
      },
      {
        "start": 2085.679,
        "duration": 3.041,
        "text": "up"
      },
      {
        "start": 2086.24,
        "duration": 3.599,
        "text": "and once it's up we run the queries that"
      },
      {
        "start": 2088.72,
        "duration": 4.24,
        "text": "we defined so we"
      },
      {
        "start": 2089.839,
        "duration": 4.8,
        "text": "essentially bootstrap um by running uh"
      },
      {
        "start": 2092.96,
        "duration": 2.32,
        "text": "you know creating a key space creating a"
      },
      {
        "start": 2094.639,
        "duration": 3.44,
        "text": "table"
      },
      {
        "start": 2095.28,
        "duration": 4.079,
        "text": "so that by the time yield compose"
      },
      {
        "start": 2098.079,
        "duration": 4.081,
        "text": "environment is up"
      },
      {
        "start": 2099.359,
        "duration": 4.48,
        "text": "and when client just starts uh the"
      },
      {
        "start": 2102.16,
        "duration": 4.32,
        "text": "environment with you know ycp"
      },
      {
        "start": 2103.839,
        "duration": 4.24,
        "text": "start they already have the key space"
      },
      {
        "start": 2106.48,
        "duration": 2.24,
        "text": "running they already have the table"
      },
      {
        "start": 2108.079,
        "duration": 2.321,
        "text": "inside"
      },
      {
        "start": 2108.72,
        "duration": 3.52,
        "text": "and all they need to do is to just focus"
      },
      {
        "start": 2110.4,
        "duration": 2.8,
        "text": "on um their business case they're"
      },
      {
        "start": 2112.24,
        "duration": 4.0,
        "text": "they're kind of like"
      },
      {
        "start": 2113.2,
        "duration": 3.6,
        "text": "testing the the actual business logic"
      },
      {
        "start": 2116.24,
        "duration": 3.04,
        "text": "and not"
      },
      {
        "start": 2116.8,
        "duration": 4.0,
        "text": "care about any kind of cassandra"
      },
      {
        "start": 2119.28,
        "duration": 5.68,
        "text": "internals"
      },
      {
        "start": 2120.8,
        "duration": 5.68,
        "text": "so we hope that will really simplify"
      },
      {
        "start": 2124.96,
        "duration": 4.879,
        "text": "simplify the process of writing"
      },
      {
        "start": 2126.48,
        "duration": 7.599,
        "text": "integration tests for the clients"
      },
      {
        "start": 2129.839,
        "duration": 7.041,
        "text": "so on operability side of things"
      },
      {
        "start": 2134.079,
        "duration": 4.801,
        "text": "um we did a few a few interesting tweaks"
      },
      {
        "start": 2136.88,
        "duration": 4.32,
        "text": "here and there um i won't go into"
      },
      {
        "start": 2138.88,
        "duration": 4.479,
        "text": "much more details of every single point"
      },
      {
        "start": 2141.2,
        "duration": 4.96,
        "text": "but generally we did a few interesting"
      },
      {
        "start": 2143.359,
        "duration": 4.321,
        "text": "things so we integrated the stargate in"
      },
      {
        "start": 2146.16,
        "duration": 3.439,
        "text": "our distributed tracing"
      },
      {
        "start": 2147.68,
        "duration": 3.12,
        "text": "infrastructure so that clients can have"
      },
      {
        "start": 2149.599,
        "duration": 3.441,
        "text": "an easier way to"
      },
      {
        "start": 2150.8,
        "duration": 3.6,
        "text": "have visibility into the timing of the"
      },
      {
        "start": 2153.04,
        "duration": 2.559,
        "text": "requests uh you know look at the"
      },
      {
        "start": 2154.4,
        "duration": 4.0,
        "text": "latencies of how"
      },
      {
        "start": 2155.599,
        "duration": 4.801,
        "text": "how long each uh request to the stargate"
      },
      {
        "start": 2158.4,
        "duration": 5.84,
        "text": "takes"
      },
      {
        "start": 2160.4,
        "duration": 4.48,
        "text": "then we also exposed the actual stargate"
      },
      {
        "start": 2164.24,
        "duration": 2.8,
        "text": "metrics"
      },
      {
        "start": 2164.88,
        "duration": 4.719,
        "text": "for the better observability um you know"
      },
      {
        "start": 2167.04,
        "duration": 5.92,
        "text": "the actual load the cpu load the memory"
      },
      {
        "start": 2169.599,
        "duration": 6.081,
        "text": "uh load on on the cluster um and since"
      },
      {
        "start": 2172.96,
        "duration": 4.48,
        "text": "stargate joins cassandra cluster and"
      },
      {
        "start": 2175.68,
        "duration": 5.04,
        "text": "works as coordinator node"
      },
      {
        "start": 2177.44,
        "duration": 4.32,
        "text": "it also exposes the standard cassandra"
      },
      {
        "start": 2180.72,
        "duration": 3.84,
        "text": "metrics as well"
      },
      {
        "start": 2181.76,
        "duration": 4.48,
        "text": "so the very nice side effect is we were"
      },
      {
        "start": 2184.56,
        "duration": 3.6,
        "text": "able to look at the"
      },
      {
        "start": 2186.24,
        "duration": 4.4,
        "text": "cassandra matrix and stargate metrics"
      },
      {
        "start": 2188.16,
        "duration": 3.919,
        "text": "sort of in parallel and compare the the"
      },
      {
        "start": 2190.64,
        "duration": 3.76,
        "text": "results"
      },
      {
        "start": 2192.079,
        "duration": 3.361,
        "text": "we also did a bit of tweaking to uh the"
      },
      {
        "start": 2194.4,
        "duration": 3.12,
        "text": "error logging"
      },
      {
        "start": 2195.44,
        "duration": 3.28,
        "text": "um so that we can integrate with our"
      },
      {
        "start": 2197.52,
        "duration": 3.52,
        "text": "error dashboards"
      },
      {
        "start": 2198.72,
        "duration": 4.639,
        "text": "and we added just a you know internal"
      },
      {
        "start": 2201.04,
        "duration": 3.6,
        "text": "tls setting uh for a bit of a you know"
      },
      {
        "start": 2203.359,
        "duration": 4.48,
        "text": "security"
      },
      {
        "start": 2204.64,
        "duration": 4.56,
        "text": "um and so in terms of the actual"
      },
      {
        "start": 2207.839,
        "duration": 3.121,
        "text": "migration of the clients"
      },
      {
        "start": 2209.2,
        "duration": 3.44,
        "text": "um there's a few important steps that we"
      },
      {
        "start": 2210.96,
        "duration": 3.84,
        "text": "need that we did um"
      },
      {
        "start": 2212.64,
        "duration": 4.0,
        "text": "to kind of like facilitate this process"
      },
      {
        "start": 2214.8,
        "duration": 4.559,
        "text": "so"
      },
      {
        "start": 2216.64,
        "duration": 3.68,
        "text": "so generally internal migration done in"
      },
      {
        "start": 2219.359,
        "duration": 3.121,
        "text": "two steps"
      },
      {
        "start": 2220.32,
        "duration": 3.68,
        "text": "so we started with just a better better"
      },
      {
        "start": 2222.48,
        "duration": 3.359,
        "text": "step uh where we"
      },
      {
        "start": 2224.0,
        "duration": 3.44,
        "text": "you know work on the steps that i did"
      },
      {
        "start": 2225.839,
        "duration": 3.121,
        "text": "that i just mentioned you know working"
      },
      {
        "start": 2227.44,
        "duration": 2.159,
        "text": "on the mvp working in the client"
      },
      {
        "start": 2228.96,
        "duration": 3.36,
        "text": "libraries"
      },
      {
        "start": 2229.599,
        "duration": 3.52,
        "text": "testing every ability and in parallel we"
      },
      {
        "start": 2232.32,
        "duration": 2.88,
        "text": "were doing"
      },
      {
        "start": 2233.119,
        "duration": 3.841,
        "text": "an initial set of conversations with"
      },
      {
        "start": 2235.2,
        "duration": 4.0,
        "text": "future teams"
      },
      {
        "start": 2236.96,
        "duration": 3.68,
        "text": "where we essentially identified just a"
      },
      {
        "start": 2239.2,
        "duration": 3.84,
        "text": "few potential good"
      },
      {
        "start": 2240.64,
        "duration": 4.08,
        "text": "candidates for the test migration and we"
      },
      {
        "start": 2243.04,
        "duration": 2.559,
        "text": "were looking at really the complexity of"
      },
      {
        "start": 2244.72,
        "duration": 4.24,
        "text": "the cases"
      },
      {
        "start": 2245.599,
        "duration": 5.601,
        "text": "and the business impact um and"
      },
      {
        "start": 2248.96,
        "duration": 4.24,
        "text": "by the kind of like when when things are"
      },
      {
        "start": 2251.2,
        "duration": 4.56,
        "text": "ready when we are done with our"
      },
      {
        "start": 2253.2,
        "duration": 3.2,
        "text": "milestones we wanted to do just a simple"
      },
      {
        "start": 2255.76,
        "duration": 3.52,
        "text": "internal"
      },
      {
        "start": 2256.4,
        "duration": 4.56,
        "text": "uh migration of one client um kind of"
      },
      {
        "start": 2259.28,
        "duration": 3.68,
        "text": "like select the easiest case maybe like"
      },
      {
        "start": 2260.96,
        "duration": 3.6,
        "text": "a simple select statement and try to"
      },
      {
        "start": 2262.96,
        "duration": 4.72,
        "text": "migrate this to a graphql"
      },
      {
        "start": 2264.56,
        "duration": 4.559,
        "text": "case so once we migrate the first client"
      },
      {
        "start": 2267.68,
        "duration": 3.439,
        "text": "once we"
      },
      {
        "start": 2269.119,
        "duration": 3.281,
        "text": "let it marinate in a production for a"
      },
      {
        "start": 2271.119,
        "duration": 5.121,
        "text": "bit of time"
      },
      {
        "start": 2272.4,
        "duration": 7.28,
        "text": "we go into a general availability"
      },
      {
        "start": 2276.24,
        "duration": 6.32,
        "text": "internal general availability uh state"
      },
      {
        "start": 2279.68,
        "duration": 4.72,
        "text": "where um we set a moratorium on the new"
      },
      {
        "start": 2282.56,
        "duration": 3.84,
        "text": "apollo client so no code"
      },
      {
        "start": 2284.4,
        "duration": 4.56,
        "text": "should be added to the apollo at that"
      },
      {
        "start": 2286.4,
        "duration": 4.64,
        "text": "point um and we set the deadline on the"
      },
      {
        "start": 2288.96,
        "duration": 3.6,
        "text": "migration of the existing up cassandra"
      },
      {
        "start": 2291.04,
        "duration": 5.12,
        "text": "clients"
      },
      {
        "start": 2292.56,
        "duration": 6.08,
        "text": "and the the drd team itself we wanted to"
      },
      {
        "start": 2296.16,
        "duration": 3.679,
        "text": "prioritize a very high priority clients"
      },
      {
        "start": 2298.64,
        "duration": 3.36,
        "text": "and clients that have"
      },
      {
        "start": 2299.839,
        "duration": 3.921,
        "text": "you know the complex cases where they"
      },
      {
        "start": 2302.0,
        "duration": 2.64,
        "text": "have a lot of business logic that exists"
      },
      {
        "start": 2303.76,
        "duration": 2.96,
        "text": "in apollo"
      },
      {
        "start": 2304.64,
        "duration": 3.52,
        "text": "where um the business impact is very"
      },
      {
        "start": 2306.72,
        "duration": 5.44,
        "text": "high um"
      },
      {
        "start": 2308.16,
        "duration": 6.08,
        "text": "yeah so and then in terms of future work"
      },
      {
        "start": 2312.16,
        "duration": 5.199,
        "text": "and there's a few areas that we wanted"
      },
      {
        "start": 2314.24,
        "duration": 5.119,
        "text": "to attack uh that that sort of uh"
      },
      {
        "start": 2317.359,
        "duration": 3.121,
        "text": "right now are in more of a planning"
      },
      {
        "start": 2319.359,
        "duration": 2.961,
        "text": "phase um"
      },
      {
        "start": 2320.48,
        "duration": 3.04,
        "text": "obviously we need to spend quite a bit"
      },
      {
        "start": 2322.32,
        "duration": 2.72,
        "text": "of time on the security and"
      },
      {
        "start": 2323.52,
        "duration": 4.96,
        "text": "authentication part of things"
      },
      {
        "start": 2325.04,
        "duration": 6.4,
        "text": "um the only kind of authentication"
      },
      {
        "start": 2328.48,
        "duration": 5.119,
        "text": "that was available to us by default is"
      },
      {
        "start": 2331.44,
        "duration": 4.08,
        "text": "just the token and we disabled that"
      },
      {
        "start": 2333.599,
        "duration": 4.401,
        "text": "in favor of more you know role-based i"
      },
      {
        "start": 2335.52,
        "duration": 3.839,
        "text": "guess authentication setup"
      },
      {
        "start": 2338.0,
        "duration": 3.52,
        "text": "we also wanted to work on the business"
      },
      {
        "start": 2339.359,
        "duration": 3.76,
        "text": "of queries um to avoid"
      },
      {
        "start": 2341.52,
        "duration": 4.16,
        "text": "running uh to kind of like have more"
      },
      {
        "start": 2343.119,
        "duration": 4.321,
        "text": "visibility into um"
      },
      {
        "start": 2345.68,
        "duration": 3.76,
        "text": "what are the queries that are being run"
      },
      {
        "start": 2347.44,
        "duration": 5.04,
        "text": "uh and a few for a few different"
      },
      {
        "start": 2349.44,
        "duration": 3.36,
        "text": "other reasons um and then we also wanted"
      },
      {
        "start": 2352.48,
        "duration": 2.879,
        "text": "to"
      },
      {
        "start": 2352.8,
        "duration": 3.6,
        "text": "make a few improvements to the client"
      },
      {
        "start": 2355.359,
        "duration": 2.961,
        "text": "library um"
      },
      {
        "start": 2356.4,
        "duration": 4.08,
        "text": "to have you know the comparison when we"
      },
      {
        "start": 2358.32,
        "duration": 3.6,
        "text": "want to do the dark long to our clients"
      },
      {
        "start": 2360.48,
        "duration": 3.599,
        "text": "once you do the comparison between you"
      },
      {
        "start": 2361.92,
        "duration": 4.08,
        "text": "know the uh status quo response and the"
      },
      {
        "start": 2364.079,
        "duration": 3.52,
        "text": "new response from graphql to to kind of"
      },
      {
        "start": 2366.0,
        "duration": 4.4,
        "text": "confirm that we're not doing"
      },
      {
        "start": 2367.599,
        "duration": 5.76,
        "text": "damaging things and actually finish the"
      },
      {
        "start": 2370.4,
        "duration": 5.36,
        "text": "client's migration part"
      },
      {
        "start": 2373.359,
        "duration": 3.921,
        "text": "uh yeah that's pretty much it uh pretty"
      },
      {
        "start": 2375.76,
        "duration": 2.8,
        "text": "much what i wanted to share with you"
      },
      {
        "start": 2377.28,
        "duration": 3.36,
        "text": "um thank you very much for your"
      },
      {
        "start": 2378.56,
        "duration": 5.6,
        "text": "attention uh i'll uh"
      },
      {
        "start": 2380.64,
        "duration": 6.56,
        "text": "yeah thank you very much uh"
      },
      {
        "start": 2384.16,
        "duration": 5.6,
        "text": "great alex uh thank you so much that's"
      },
      {
        "start": 2387.2,
        "duration": 4.24,
        "text": "kind of unique moment we have two alex's"
      },
      {
        "start": 2389.76,
        "duration": 6.319,
        "text": "at the screen"
      },
      {
        "start": 2391.44,
        "duration": 8.08,
        "text": "some replication factor on alex"
      },
      {
        "start": 2396.079,
        "duration": 7.04,
        "text": "so uh before we proceed and"
      },
      {
        "start": 2399.52,
        "duration": 5.68,
        "text": "i will ask i will read some questions"
      },
      {
        "start": 2403.119,
        "duration": 5.361,
        "text": "from the chat"
      },
      {
        "start": 2405.2,
        "duration": 6.399,
        "text": "i wanted to ask you said"
      },
      {
        "start": 2408.48,
        "duration": 6.24,
        "text": "what you have how to discovery for"
      },
      {
        "start": 2411.599,
        "duration": 3.121,
        "text": "stargate notes"
      },
      {
        "start": 2414.96,
        "duration": 5.28,
        "text": "and how do you do that so what's at this"
      },
      {
        "start": 2418.16,
        "duration": 5.199,
        "text": "side"
      },
      {
        "start": 2420.24,
        "duration": 6.32,
        "text": "yeah so let me go"
      },
      {
        "start": 2423.359,
        "duration": 4.561,
        "text": "so essentially yeah so apollo thing is"
      },
      {
        "start": 2426.56,
        "duration": 3.279,
        "text": "um"
      },
      {
        "start": 2427.92,
        "duration": 3.679,
        "text": "as i mentioned it's just a proxy service"
      },
      {
        "start": 2429.839,
        "duration": 4.721,
        "text": "just a service that exists"
      },
      {
        "start": 2431.599,
        "duration": 4.561,
        "text": "uh on top of cassandra cluster um let me"
      },
      {
        "start": 2434.56,
        "duration": 2.88,
        "text": "actually go back to the slide"
      },
      {
        "start": 2436.16,
        "duration": 4.24,
        "text": "i think the slide will actually"
      },
      {
        "start": 2437.44,
        "duration": 5.84,
        "text": "demonstrate it really well yes uh"
      },
      {
        "start": 2440.4,
        "duration": 2.88,
        "text": "okay hold up"
      },
      {
        "start": 2451.52,
        "duration": 3.2,
        "text": "okay there you go so uh so this is what"
      },
      {
        "start": 2454.24,
        "duration": 1.599,
        "text": "i"
      },
      {
        "start": 2454.72,
        "duration": 3.599,
        "text": "pretty much mentioned at the very"
      },
      {
        "start": 2455.839,
        "duration": 3.921,
        "text": "beginning so when um there's no sort of"
      },
      {
        "start": 2458.319,
        "duration": 3.52,
        "text": "proxy by default"
      },
      {
        "start": 2459.76,
        "duration": 3.839,
        "text": "every service that exists in yelp would"
      },
      {
        "start": 2461.839,
        "duration": 3.201,
        "text": "try to access a separate cassandra"
      },
      {
        "start": 2463.599,
        "duration": 3.361,
        "text": "cluster and that results in a very sort"
      },
      {
        "start": 2465.04,
        "duration": 3.92,
        "text": "of messy situation right"
      },
      {
        "start": 2466.96,
        "duration": 3.76,
        "text": "um and so what we have right now is"
      },
      {
        "start": 2468.96,
        "duration": 2.32,
        "text": "apollo is essentially a cassandra proxy"
      },
      {
        "start": 2470.72,
        "duration": 3.68,
        "text": "service"
      },
      {
        "start": 2471.28,
        "duration": 4.559,
        "text": "it's a service that lives um you know on"
      },
      {
        "start": 2474.4,
        "duration": 2.959,
        "text": "top of cassandra cluster that is"
      },
      {
        "start": 2475.839,
        "duration": 3.121,
        "text": "deployed separately"
      },
      {
        "start": 2477.359,
        "duration": 3.201,
        "text": "and that simplifies a lot of a lot of"
      },
      {
        "start": 2478.96,
        "duration": 2.96,
        "text": "things on our side"
      },
      {
        "start": 2480.56,
        "duration": 3.12,
        "text": "and there's a few reasons why we did"
      },
      {
        "start": 2481.92,
        "duration": 2.64,
        "text": "that you know we wanted to isolate the"
      },
      {
        "start": 2483.68,
        "duration": 3.04,
        "text": "complexity"
      },
      {
        "start": 2484.56,
        "duration": 3.44,
        "text": "um make it easier to iterate in query"
      },
      {
        "start": 2486.72,
        "duration": 2.96,
        "text": "code and make it easy to rate the"
      },
      {
        "start": 2488.0,
        "duration": 2.96,
        "text": "iterated infrastructure"
      },
      {
        "start": 2489.68,
        "duration": 5.76,
        "text": "so this is pretty much the thing that"
      },
      {
        "start": 2490.96,
        "duration": 7.44,
        "text": "we're actually replacing let's see great"
      },
      {
        "start": 2495.44,
        "duration": 3.84,
        "text": "uh so question on the youtube chat from"
      },
      {
        "start": 2498.4,
        "duration": 4.24,
        "text": "uh vinod"
      },
      {
        "start": 2499.28,
        "duration": 5.28,
        "text": "sankar uh how do you handle large"
      },
      {
        "start": 2502.64,
        "duration": 4.719,
        "text": "partitions in cassandra"
      },
      {
        "start": 2504.56,
        "duration": 6.72,
        "text": "also can you give an estimate on how big"
      },
      {
        "start": 2507.359,
        "duration": 7.121,
        "text": "is your largest partition in production"
      },
      {
        "start": 2511.28,
        "duration": 5.28,
        "text": "so this uh so i cannot really tell"
      },
      {
        "start": 2514.48,
        "duration": 3.52,
        "text": "out of the box or from the top of my"
      },
      {
        "start": 2516.56,
        "duration": 2.96,
        "text": "head uh it's sort of a"
      },
      {
        "start": 2518.0,
        "duration": 3.2,
        "text": "an interesting question but it feels a"
      },
      {
        "start": 2519.52,
        "duration": 4.24,
        "text": "little little out of the scope of the"
      },
      {
        "start": 2521.2,
        "duration": 3.119,
        "text": "document uh let me let me get back to"
      },
      {
        "start": 2523.76,
        "duration": 2.559,
        "text": "you maybe"
      },
      {
        "start": 2524.319,
        "duration": 3.441,
        "text": "after after the talk um i'll need only"
      },
      {
        "start": 2526.319,
        "duration": 3.361,
        "text": "to double check it's sort of uh"
      },
      {
        "start": 2527.76,
        "duration": 3.2,
        "text": "an interesting question that i don't i"
      },
      {
        "start": 2529.68,
        "duration": 2.08,
        "text": "don't have an answer from the top of my"
      },
      {
        "start": 2530.96,
        "duration": 3.28,
        "text": "head yep"
      },
      {
        "start": 2531.76,
        "duration": 4.24,
        "text": "i would say uh from my at least point of"
      },
      {
        "start": 2534.24,
        "duration": 4.64,
        "text": "view there is only one proper way"
      },
      {
        "start": 2536.0,
        "duration": 3.839,
        "text": "to deal with a large partitions do not"
      },
      {
        "start": 2538.88,
        "duration": 4.0,
        "text": "create them"
      },
      {
        "start": 2539.839,
        "duration": 5.201,
        "text": "by proper data modeling"
      },
      {
        "start": 2542.88,
        "duration": 3.36,
        "text": "uh i wouldn't suggest anything better"
      },
      {
        "start": 2545.04,
        "duration": 5.36,
        "text": "than"
      },
      {
        "start": 2546.24,
        "duration": 6.72,
        "text": "data modeling indeed so i'm trying uh"
      },
      {
        "start": 2550.4,
        "duration": 4.08,
        "text": "a question about the cluster you were"
      },
      {
        "start": 2552.96,
        "duration": 3.28,
        "text": "testing stargate"
      },
      {
        "start": 2554.48,
        "duration": 3.119,
        "text": "a question was is your cluster"
      },
      {
        "start": 2556.24,
        "duration": 4.24,
        "text": "multi-data center"
      },
      {
        "start": 2557.599,
        "duration": 5.601,
        "text": "but i guess answer is no because it's an"
      },
      {
        "start": 2560.48,
        "duration": 5.44,
        "text": "mvp and test cluster"
      },
      {
        "start": 2563.2,
        "duration": 4.08,
        "text": "so our current um cassandra the actual"
      },
      {
        "start": 2565.92,
        "duration": 3.679,
        "text": "cassandra setup the"
      },
      {
        "start": 2567.28,
        "duration": 4.64,
        "text": "cassandra clusters that run kubernetes"
      },
      {
        "start": 2569.599,
        "duration": 4.401,
        "text": "um they are um we have a few uh"
      },
      {
        "start": 2571.92,
        "duration": 3.6,
        "text": "that is data centers uh we have two big"
      },
      {
        "start": 2574.0,
        "duration": 4.64,
        "text": "ones um"
      },
      {
        "start": 2575.52,
        "duration": 3.76,
        "text": "so yeah um but the in in the apollo"
      },
      {
        "start": 2578.64,
        "duration": 2.08,
        "text": "setup that"
      },
      {
        "start": 2579.28,
        "duration": 3.839,
        "text": "sort of like the service that exists on"
      },
      {
        "start": 2580.72,
        "duration": 5.68,
        "text": "top of it we actually deployed um in two"
      },
      {
        "start": 2583.119,
        "duration": 5.761,
        "text": "big regions yeah uh but"
      },
      {
        "start": 2586.4,
        "duration": 4.4,
        "text": "the the the sort of the mvp the stargate"
      },
      {
        "start": 2588.88,
        "duration": 3.92,
        "text": "is obviously we just deployed an mvp"
      },
      {
        "start": 2590.8,
        "duration": 3.6,
        "text": "uh it's very early to say how it's going"
      },
      {
        "start": 2592.8,
        "duration": 2.72,
        "text": "to how the setup is going to look in the"
      },
      {
        "start": 2594.4,
        "duration": 4.8,
        "text": "future"
      },
      {
        "start": 2595.52,
        "duration": 7.2,
        "text": "okay and finally"
      },
      {
        "start": 2599.2,
        "duration": 7.6,
        "text": "i mean introducing the"
      },
      {
        "start": 2602.72,
        "duration": 6.8,
        "text": "data api layer like stargate or apollo"
      },
      {
        "start": 2606.8,
        "duration": 4.16,
        "text": "that's actually a pretty big job so you"
      },
      {
        "start": 2609.52,
        "duration": 4.96,
        "text": "are putting a lot of effort"
      },
      {
        "start": 2610.96,
        "duration": 5.44,
        "text": "into that um my question is what do you"
      },
      {
        "start": 2614.48,
        "duration": 4.72,
        "text": "think the biggest benefit"
      },
      {
        "start": 2616.4,
        "duration": 3.6,
        "text": "for developers developing application"
      },
      {
        "start": 2619.2,
        "duration": 3.119,
        "text": "developing your"
      },
      {
        "start": 2620.0,
        "duration": 4.48,
        "text": "project and what's the biggest benefit"
      },
      {
        "start": 2622.319,
        "duration": 5.201,
        "text": "of using these data api"
      },
      {
        "start": 2624.48,
        "duration": 4.8,
        "text": "for the business you run because those"
      },
      {
        "start": 2627.52,
        "duration": 4.16,
        "text": "points of view are usually a little bit"
      },
      {
        "start": 2629.28,
        "duration": 5.6,
        "text": "different"
      },
      {
        "start": 2631.68,
        "duration": 4.88,
        "text": "so well as i said there's a few sort of"
      },
      {
        "start": 2634.88,
        "duration": 3.68,
        "text": "big benefits right so there's obviously"
      },
      {
        "start": 2636.56,
        "duration": 5.36,
        "text": "a benefit on the client side they"
      },
      {
        "start": 2638.56,
        "duration": 4.88,
        "text": "um they can run their there's a sort of"
      },
      {
        "start": 2641.92,
        "duration": 3.199,
        "text": "like developer velocity"
      },
      {
        "start": 2643.44,
        "duration": 3.84,
        "text": "improvement big one right so they don't"
      },
      {
        "start": 2645.119,
        "duration": 3.601,
        "text": "have to write as much boilerplate code"
      },
      {
        "start": 2647.28,
        "duration": 2.799,
        "text": "there's a lot of site there's a lot of"
      },
      {
        "start": 2648.72,
        "duration": 2.879,
        "text": "improvement on like beneficial"
      },
      {
        "start": 2650.079,
        "duration": 3.76,
        "text": "improvements on our site as well"
      },
      {
        "start": 2651.599,
        "duration": 3.52,
        "text": "um because we don't have to support uh"
      },
      {
        "start": 2653.839,
        "duration": 3.041,
        "text": "as much of"
      },
      {
        "start": 2655.119,
        "duration": 4.24,
        "text": "infrastructure load so the the layer"
      },
      {
        "start": 2656.88,
        "duration": 4.719,
        "text": "becomes a very thin sort of layer"
      },
      {
        "start": 2659.359,
        "duration": 3.841,
        "text": "and that translates well into a business"
      },
      {
        "start": 2661.599,
        "duration": 4.321,
        "text": "i guess business perspective"
      },
      {
        "start": 2663.2,
        "duration": 4.0,
        "text": "right because um because if the"
      },
      {
        "start": 2665.92,
        "duration": 3.6,
        "text": "developer velocity"
      },
      {
        "start": 2667.2,
        "duration": 4.8,
        "text": "um increases then we're able to ship"
      },
      {
        "start": 2669.52,
        "duration": 4.48,
        "text": "things faster we're able to shin"
      },
      {
        "start": 2672.0,
        "duration": 4.56,
        "text": "ship things a lot kind of like more"
      },
      {
        "start": 2674.0,
        "duration": 5.359,
        "text": "reliable in a more reliable way"
      },
      {
        "start": 2676.56,
        "duration": 3.6,
        "text": "and on infrastructure side as well um"
      },
      {
        "start": 2679.359,
        "duration": 2.801,
        "text": "right now with"
      },
      {
        "start": 2680.16,
        "duration": 3.04,
        "text": "apollo we have an interesting situation"
      },
      {
        "start": 2682.16,
        "duration": 2.88,
        "text": "when um"
      },
      {
        "start": 2683.2,
        "duration": 3.44,
        "text": "it's sort of like it ballooned to do"
      },
      {
        "start": 2685.04,
        "duration": 4.319,
        "text": "this big size and"
      },
      {
        "start": 2686.64,
        "duration": 3.12,
        "text": "when one part of the service goes down"
      },
      {
        "start": 2689.359,
        "duration": 2.401,
        "text": "and"
      },
      {
        "start": 2689.76,
        "duration": 3.44,
        "text": "the blast radius can take a few other"
      },
      {
        "start": 2691.76,
        "duration": 3.839,
        "text": "services you know"
      },
      {
        "start": 2693.2,
        "duration": 3.76,
        "text": "down with it and so when we have a"
      },
      {
        "start": 2695.599,
        "duration": 3.681,
        "text": "stargate when you have a"
      },
      {
        "start": 2696.96,
        "duration": 3.6,
        "text": "thin layer uh kind of like more reliable"
      },
      {
        "start": 2699.28,
        "duration": 3.039,
        "text": "uh"
      },
      {
        "start": 2700.56,
        "duration": 3.44,
        "text": "thin layer instead of apollo that"
      },
      {
        "start": 2702.319,
        "duration": 2.241,
        "text": "obviously simplifies a lot of things on"
      },
      {
        "start": 2704.0,
        "duration": 3.2,
        "text": "our side"
      },
      {
        "start": 2704.56,
        "duration": 4.16,
        "text": "as an infrastructure team we can invest"
      },
      {
        "start": 2707.2,
        "duration": 3.04,
        "text": "more time into you know other features"
      },
      {
        "start": 2708.72,
        "duration": 3.28,
        "text": "that are beneficial for the clients"
      },
      {
        "start": 2710.24,
        "duration": 3.68,
        "text": "and that kind of like goes back into the"
      },
      {
        "start": 2712.0,
        "duration": 3.359,
        "text": "loop that clients are able to"
      },
      {
        "start": 2713.92,
        "duration": 3.36,
        "text": "like future teams are able to ship"
      },
      {
        "start": 2715.359,
        "duration": 4.561,
        "text": "things faster um so i"
      },
      {
        "start": 2717.28,
        "duration": 3.92,
        "text": "would say just having this project in"
      },
      {
        "start": 2719.92,
        "duration": 3.28,
        "text": "itself it's a lot of effort"
      },
      {
        "start": 2721.2,
        "duration": 4.0,
        "text": "but it but it generally translates well"
      },
      {
        "start": 2723.2,
        "duration": 4.08,
        "text": "into like all sides of the"
      },
      {
        "start": 2725.2,
        "duration": 3.919,
        "text": "all sides of the organization and on the"
      },
      {
        "start": 2727.28,
        "duration": 2.88,
        "text": "future team so infrastructure part and"
      },
      {
        "start": 2729.119,
        "duration": 3.521,
        "text": "the business itself"
      },
      {
        "start": 2730.16,
        "duration": 3.12,
        "text": "okay so uh two last questions but"
      },
      {
        "start": 2732.64,
        "duration": 2.56,
        "text": "already"
      },
      {
        "start": 2733.28,
        "duration": 4.24,
        "text": "uh pretty briefly because we're a little"
      },
      {
        "start": 2735.2,
        "duration": 5.119,
        "text": "bit out of time and we have to"
      },
      {
        "start": 2737.52,
        "duration": 3.68,
        "text": "keep some time for benue uh so first"
      },
      {
        "start": 2740.319,
        "duration": 3.441,
        "text": "question"
      },
      {
        "start": 2741.2,
        "duration": 3.84,
        "text": "stargate offers not only graphql but"
      },
      {
        "start": 2743.76,
        "duration": 4.079,
        "text": "also rest api"
      },
      {
        "start": 2745.04,
        "duration": 3.68,
        "text": "and document api what do you think are"
      },
      {
        "start": 2747.839,
        "duration": 3.921,
        "text": "you going"
      },
      {
        "start": 2748.72,
        "duration": 5.52,
        "text": "to use them or those aren't so"
      },
      {
        "start": 2751.76,
        "duration": 4.079,
        "text": "interesting to you that's a good"
      },
      {
        "start": 2754.24,
        "duration": 3.359,
        "text": "question um we did consider"
      },
      {
        "start": 2755.839,
        "duration": 3.361,
        "text": "at the very beginning uh we kind of like"
      },
      {
        "start": 2757.599,
        "duration": 3.841,
        "text": "look at the possible options"
      },
      {
        "start": 2759.2,
        "duration": 4.639,
        "text": "and we decided to go single-handedly"
      },
      {
        "start": 2761.44,
        "duration": 5.36,
        "text": "with just uh graphql"
      },
      {
        "start": 2763.839,
        "duration": 3.441,
        "text": "rest api is something we did consider uh"
      },
      {
        "start": 2766.8,
        "duration": 2.799,
        "text": "but"
      },
      {
        "start": 2767.28,
        "duration": 3.839,
        "text": "as of now graphql is sort of the only"
      },
      {
        "start": 2769.599,
        "duration": 4.561,
        "text": "focus that we have and we want to"
      },
      {
        "start": 2771.119,
        "duration": 4.561,
        "text": "make our infrastructure so like support"
      },
      {
        "start": 2774.16,
        "duration": 4.24,
        "text": "this use case as much as"
      },
      {
        "start": 2775.68,
        "duration": 3.52,
        "text": "as good as possible i guess okay and"
      },
      {
        "start": 2778.4,
        "duration": 3.199,
        "text": "last question"
      },
      {
        "start": 2779.2,
        "duration": 3.84,
        "text": "anyway no more uh questions regarding"
      },
      {
        "start": 2781.599,
        "duration": 4.561,
        "text": "that on youtube chat"
      },
      {
        "start": 2783.04,
        "duration": 6.079,
        "text": "so um stargate is an open source uh"
      },
      {
        "start": 2786.16,
        "duration": 3.76,
        "text": "project but frankly speaking i just"
      },
      {
        "start": 2789.119,
        "duration": 4.321,
        "text": "don't know"
      },
      {
        "start": 2789.92,
        "duration": 7.28,
        "text": "if uh yelp was involved into the"
      },
      {
        "start": 2793.44,
        "duration": 6.48,
        "text": "direct development of stargate"
      },
      {
        "start": 2797.2,
        "duration": 3.44,
        "text": "so but my question is not about the past"
      },
      {
        "start": 2799.92,
        "duration": 2.88,
        "text": "myocash"
      },
      {
        "start": 2800.64,
        "duration": 4.64,
        "text": "question is more about the future what"
      },
      {
        "start": 2802.8,
        "duration": 6.16,
        "text": "do you think about the participating"
      },
      {
        "start": 2805.28,
        "duration": 6.24,
        "text": "in the stargate as an oss project"
      },
      {
        "start": 2808.96,
        "duration": 4.399,
        "text": "it's a good question uh i think it's"
      },
      {
        "start": 2811.52,
        "duration": 3.92,
        "text": "more of a"
      },
      {
        "start": 2813.359,
        "duration": 3.76,
        "text": "business i guess a related question uh"
      },
      {
        "start": 2815.44,
        "duration": 3.2,
        "text": "but let just to tell you a little bit"
      },
      {
        "start": 2817.119,
        "duration": 2.96,
        "text": "from from my experience of the"
      },
      {
        "start": 2818.64,
        "duration": 3.439,
        "text": "kind of like past few months of working"
      },
      {
        "start": 2820.079,
        "duration": 5.441,
        "text": "with it with the repo"
      },
      {
        "start": 2822.079,
        "duration": 4.801,
        "text": "we generally like very work very closely"
      },
      {
        "start": 2825.52,
        "duration": 3.36,
        "text": "with the development team"
      },
      {
        "start": 2826.88,
        "duration": 3.12,
        "text": "um so the development team always is"
      },
      {
        "start": 2828.88,
        "duration": 4.4,
        "text": "very open to answer"
      },
      {
        "start": 2830.0,
        "duration": 4.96,
        "text": "any or questions we did submitted a few"
      },
      {
        "start": 2833.28,
        "duration": 4.079,
        "text": "kind of like issues that we that we"
      },
      {
        "start": 2834.96,
        "duration": 4.72,
        "text": "encountered and we also did submit"
      },
      {
        "start": 2837.359,
        "duration": 4.401,
        "text": "a few minor improvements to the actual"
      },
      {
        "start": 2839.68,
        "duration": 3.679,
        "text": "open source project"
      },
      {
        "start": 2841.76,
        "duration": 3.28,
        "text": "and internally we keep the fork of the"
      },
      {
        "start": 2843.359,
        "duration": 2.24,
        "text": "project and we try to merge the the"
      },
      {
        "start": 2845.04,
        "duration": 2.64,
        "text": "higher"
      },
      {
        "start": 2845.599,
        "duration": 3.121,
        "text": "high you know upstream changes kind of"
      },
      {
        "start": 2847.68,
        "duration": 3.919,
        "text": "like regularly"
      },
      {
        "start": 2848.72,
        "duration": 4.24,
        "text": "uh so it's hard to say how the setup is"
      },
      {
        "start": 2851.599,
        "duration": 3.52,
        "text": "going to look like in the future"
      },
      {
        "start": 2852.96,
        "duration": 3.599,
        "text": "um but right now it's sort of like we we"
      },
      {
        "start": 2855.119,
        "duration": 3.361,
        "text": "keep the fork and we"
      },
      {
        "start": 2856.559,
        "duration": 3.681,
        "text": "uh you know uh from time to time when we"
      },
      {
        "start": 2858.48,
        "duration": 3.68,
        "text": "discover an issue we submit the"
      },
      {
        "start": 2860.24,
        "duration": 3.2,
        "text": "issue to the to the github and we try to"
      },
      {
        "start": 2862.16,
        "duration": 4.56,
        "text": "resolve it if possible"
      },
      {
        "start": 2863.44,
        "duration": 5.84,
        "text": "um ourselves great thank you so much uh"
      },
      {
        "start": 2866.72,
        "duration": 5.04,
        "text": "that's incredible and i'm happy to see"
      },
      {
        "start": 2869.28,
        "duration": 3.6,
        "text": "how this project grows and develops over"
      },
      {
        "start": 2871.76,
        "duration": 3.76,
        "text": "time"
      },
      {
        "start": 2872.88,
        "duration": 5.199,
        "text": "and i guess your experience to share it"
      },
      {
        "start": 2875.52,
        "duration": 4.64,
        "text": "today will help many more people"
      },
      {
        "start": 2878.079,
        "duration": 3.441,
        "text": "to give it a try and take a look how"
      },
      {
        "start": 2880.16,
        "duration": 3.84,
        "text": "useful it could be"
      },
      {
        "start": 2881.52,
        "duration": 5.92,
        "text": "how in how could it increase their"
      },
      {
        "start": 2884.0,
        "duration": 6.0,
        "text": "developer velocity and"
      },
      {
        "start": 2887.44,
        "duration": 3.52,
        "text": "that was alex shiroka from yelp and we"
      },
      {
        "start": 2890.0,
        "duration": 4.4,
        "text": "are going"
      },
      {
        "start": 2890.96,
        "duration": 5.28,
        "text": "to introduce benoit with the next talk"
      },
      {
        "start": 2894.4,
        "duration": 5.12,
        "text": "so benoit could you please share your"
      },
      {
        "start": 2896.24,
        "duration": 6.16,
        "text": "screen and alex is going to switch"
      },
      {
        "start": 2899.52,
        "duration": 2.88,
        "text": "off his"
      },
      {
        "start": 2905.119,
        "duration": 4.24,
        "text": "i be noah could you please turn on the"
      },
      {
        "start": 2906.8,
        "duration": 7.039,
        "text": "camera yeah perfect"
      },
      {
        "start": 2909.359,
        "duration": 6.321,
        "text": "and yes your screen is live you are live"
      },
      {
        "start": 2913.839,
        "duration": 6.48,
        "text": "and"
      },
      {
        "start": 2915.68,
        "duration": 6.56,
        "text": "wait a second say it again"
      },
      {
        "start": 2920.319,
        "duration": 4.161,
        "text": "one two one two can you hear me you are"
      },
      {
        "start": 2922.24,
        "duration": 7.599,
        "text": "live okay"
      },
      {
        "start": 2924.48,
        "duration": 7.52,
        "text": "screen live uh sound life let's start"
      },
      {
        "start": 2929.839,
        "duration": 4.961,
        "text": "okay so let's talk about how we do"
      },
      {
        "start": 2932.0,
        "duration": 7.28,
        "text": "schema changes"
      },
      {
        "start": 2934.8,
        "duration": 6.799,
        "text": "first of all the obligatory introduction"
      },
      {
        "start": 2939.28,
        "duration": 3.92,
        "text": "slide and since i'm a parent you get to"
      },
      {
        "start": 2941.599,
        "duration": 4.321,
        "text": "see a photo of my child"
      },
      {
        "start": 2943.2,
        "duration": 3.44,
        "text": "let's get that out of the way right now"
      },
      {
        "start": 2945.92,
        "duration": 4.159,
        "text": "uh"
      },
      {
        "start": 2946.64,
        "duration": 4.32,
        "text": "about me so i'm been at yelp for eight"
      },
      {
        "start": 2950.079,
        "duration": 3.28,
        "text": "years"
      },
      {
        "start": 2950.96,
        "duration": 6.639,
        "text": "uh i'm part just just like alex i'm part"
      },
      {
        "start": 2953.359,
        "duration": 7.041,
        "text": "of the dre team the the nosql side of it"
      },
      {
        "start": 2957.599,
        "duration": 4.881,
        "text": "i work remote from boston and i've been"
      },
      {
        "start": 2960.4,
        "duration": 5.76,
        "text": "doing so for a couple of years so"
      },
      {
        "start": 2962.48,
        "duration": 6.639,
        "text": "before it was cool uh and then"
      },
      {
        "start": 2966.16,
        "duration": 3.919,
        "text": "my latest hobby is that i've as of this"
      },
      {
        "start": 2969.119,
        "duration": 3.44,
        "text": "year i've tapped my"
      },
      {
        "start": 2970.079,
        "duration": 6.081,
        "text": "own maple trees in my backyard and i've"
      },
      {
        "start": 2972.559,
        "duration": 6.641,
        "text": "i'm boiling my own maples here"
      },
      {
        "start": 2976.16,
        "duration": 4.959,
        "text": "all right overview of the talk"
      },
      {
        "start": 2979.2,
        "duration": 4.08,
        "text": "i'm going to tell you how we used to do"
      },
      {
        "start": 2981.119,
        "duration": 4.641,
        "text": "schema changes at yelp"
      },
      {
        "start": 2983.28,
        "duration": 4.079,
        "text": "and and why there were what what the"
      },
      {
        "start": 2985.76,
        "duration": 2.24,
        "text": "issues were with the with the pure"
      },
      {
        "start": 2987.359,
        "duration": 2.72,
        "text": "system"
      },
      {
        "start": 2988.0,
        "duration": 3.599,
        "text": "uh we we changed to a new system and so"
      },
      {
        "start": 2990.079,
        "duration": 2.321,
        "text": "i'm going to explain to you how"
      },
      {
        "start": 2991.599,
        "duration": 5.52,
        "text": "developers"
      },
      {
        "start": 2992.4,
        "duration": 6.159,
        "text": "uh submit and apply a schema change"
      },
      {
        "start": 2997.119,
        "duration": 3.841,
        "text": "then i'll give you an overview of how"
      },
      {
        "start": 2998.559,
        "duration": 3.121,
        "text": "the new system works and i'll finish"
      },
      {
        "start": 3000.96,
        "duration": 2.639,
        "text": "with some"
      },
      {
        "start": 3001.68,
        "duration": 4.8,
        "text": "lessons learned there are some positives"
      },
      {
        "start": 3003.599,
        "duration": 2.881,
        "text": "and some negatives"
      },
      {
        "start": 3007.28,
        "duration": 4.64,
        "text": "first of all a little definition uh i'm"
      },
      {
        "start": 3010.0,
        "duration": 4.0,
        "text": "going to use the term push plan which is"
      },
      {
        "start": 3011.92,
        "duration": 5.12,
        "text": "specific to yelp"
      },
      {
        "start": 3014.0,
        "duration": 5.28,
        "text": "a push plan is used to be"
      },
      {
        "start": 3017.04,
        "duration": 3.68,
        "text": "a text file that contains just a set of"
      },
      {
        "start": 3019.28,
        "duration": 3.2,
        "text": "written instructions for"
      },
      {
        "start": 3020.72,
        "duration": 3.359,
        "text": "an engineer that is deploying code"
      },
      {
        "start": 3022.48,
        "duration": 3.76,
        "text": "usually to production"
      },
      {
        "start": 3024.079,
        "duration": 3.28,
        "text": "to apply before during or after"
      },
      {
        "start": 3026.24,
        "duration": 5.04,
        "text": "deployment"
      },
      {
        "start": 3027.359,
        "duration": 6.96,
        "text": "this could be config changes or"
      },
      {
        "start": 3031.28,
        "duration": 5.44,
        "text": "most often were schema changes"
      },
      {
        "start": 3034.319,
        "duration": 4.321,
        "text": "and so we kept that term and you'll hear"
      },
      {
        "start": 3036.72,
        "duration": 3.92,
        "text": "you'll hear me refer to it"
      },
      {
        "start": 3038.64,
        "duration": 3.919,
        "text": "throughout this talk and when you hear"
      },
      {
        "start": 3040.64,
        "duration": 3.679,
        "text": "push plan you can really just"
      },
      {
        "start": 3042.559,
        "duration": 4.56,
        "text": "swap it with schema change it's pretty"
      },
      {
        "start": 3044.319,
        "duration": 6.161,
        "text": "interchangeable"
      },
      {
        "start": 3047.119,
        "duration": 4.801,
        "text": "so uh for preparing for this talk i"
      },
      {
        "start": 3050.48,
        "duration": 4.639,
        "text": "looked a little bit of the"
      },
      {
        "start": 3051.92,
        "duration": 4.48,
        "text": "the stats uh in terms of to to try to"
      },
      {
        "start": 3055.119,
        "duration": 4.161,
        "text": "give you an idea of like"
      },
      {
        "start": 3056.4,
        "duration": 3.919,
        "text": "what's this how many schema changes we"
      },
      {
        "start": 3059.28,
        "duration": 3.039,
        "text": "do"
      },
      {
        "start": 3060.319,
        "duration": 3.04,
        "text": "so over the past six months we've we do"
      },
      {
        "start": 3062.319,
        "duration": 4.081,
        "text": "about 15"
      },
      {
        "start": 3063.359,
        "duration": 4.641,
        "text": "push plans per month uh knowing that a"
      },
      {
        "start": 3066.4,
        "duration": 5.679,
        "text": "push plan could be several different"
      },
      {
        "start": 3068.0,
        "duration": 5.28,
        "text": "sql statements these were written by 35"
      },
      {
        "start": 3072.079,
        "duration": 3.76,
        "text": "different developers"
      },
      {
        "start": 3073.28,
        "duration": 3.279,
        "text": "on many many different teams and were"
      },
      {
        "start": 3075.839,
        "duration": 2.801,
        "text": "applied to"
      },
      {
        "start": 3076.559,
        "duration": 3.601,
        "text": "15 different cassandra clusters which"
      },
      {
        "start": 3078.64,
        "duration": 5.04,
        "text": "can"
      },
      {
        "start": 3080.16,
        "duration": 5.52,
        "text": "exist in five or so uh"
      },
      {
        "start": 3083.68,
        "duration": 4.159,
        "text": "environments so we have a development"
      },
      {
        "start": 3085.68,
        "duration": 5.76,
        "text": "environment several staging environments"
      },
      {
        "start": 3087.839,
        "duration": 3.601,
        "text": "and finally a production environment"
      },
      {
        "start": 3092.0,
        "duration": 5.28,
        "text": "so before uh all of our schemas for"
      },
      {
        "start": 3095.599,
        "duration": 4.24,
        "text": "all of our cassandra clusters were"
      },
      {
        "start": 3097.28,
        "duration": 5.839,
        "text": "stored in a git repository"
      },
      {
        "start": 3099.839,
        "duration": 6.401,
        "text": "and on each cassandra node that we owned"
      },
      {
        "start": 3103.119,
        "duration": 5.921,
        "text": "we had a process that was"
      },
      {
        "start": 3106.24,
        "duration": 5.52,
        "text": "running in cron that would periodically"
      },
      {
        "start": 3109.04,
        "duration": 4.48,
        "text": "verify that the schemas on the cluster"
      },
      {
        "start": 3111.76,
        "duration": 4.0,
        "text": "actually match the schemas that were"
      },
      {
        "start": 3113.52,
        "duration": 5.36,
        "text": "stored in the git repository"
      },
      {
        "start": 3115.76,
        "duration": 6.64,
        "text": "if the schemas did not match the"
      },
      {
        "start": 3118.88,
        "duration": 4.719,
        "text": "process tried to make the necessary"
      },
      {
        "start": 3122.4,
        "duration": 3.76,
        "text": "modifications"
      },
      {
        "start": 3123.599,
        "duration": 4.96,
        "text": "and if the process wasn't able to it"
      },
      {
        "start": 3126.16,
        "duration": 4.0,
        "text": "would file a jira ticket"
      },
      {
        "start": 3128.559,
        "duration": 3.681,
        "text": "to let us know that hey there is a"
      },
      {
        "start": 3130.16,
        "duration": 4.56,
        "text": "mismatch and that manual action needs to"
      },
      {
        "start": 3132.24,
        "duration": 2.48,
        "text": "be taken"
      },
      {
        "start": 3134.96,
        "duration": 3.04,
        "text": "so there are several challenges with"
      },
      {
        "start": 3136.319,
        "duration": 4.881,
        "text": "this approach and a lot of them stem"
      },
      {
        "start": 3138.0,
        "duration": 5.44,
        "text": "from the principle of least surprise so"
      },
      {
        "start": 3141.2,
        "duration": 3.04,
        "text": "this is straight from wikipedia the"
      },
      {
        "start": 3143.44,
        "duration": 3.36,
        "text": "principal of his"
      },
      {
        "start": 3144.24,
        "duration": 3.359,
        "text": "surprise says people are part of the"
      },
      {
        "start": 3146.8,
        "duration": 2.72,
        "text": "system"
      },
      {
        "start": 3147.599,
        "duration": 3.921,
        "text": "the design should match the user's"
      },
      {
        "start": 3149.52,
        "duration": 2.96,
        "text": "experience expectations and mental"
      },
      {
        "start": 3151.52,
        "duration": 4.079,
        "text": "models"
      },
      {
        "start": 3152.48,
        "duration": 5.599,
        "text": "and as you'll see the expectations"
      },
      {
        "start": 3155.599,
        "duration": 3.921,
        "text": "really didn't match"
      },
      {
        "start": 3158.079,
        "duration": 3.441,
        "text": "didn't match and there were lots of"
      },
      {
        "start": 3159.52,
        "duration": 4.96,
        "text": "surprises"
      },
      {
        "start": 3161.52,
        "duration": 4.64,
        "text": "so first of all uh we didn't support"
      },
      {
        "start": 3164.48,
        "duration": 3.76,
        "text": "auto table statements"
      },
      {
        "start": 3166.16,
        "duration": 3.52,
        "text": "which is a pretty big problem in my"
      },
      {
        "start": 3168.24,
        "duration": 4.319,
        "text": "opinion"
      },
      {
        "start": 3169.68,
        "duration": 4.72,
        "text": "we could only the we could only the"
      },
      {
        "start": 3172.559,
        "duration": 3.921,
        "text": "process that run on the on the consumer"
      },
      {
        "start": 3174.4,
        "duration": 3.12,
        "text": "notes could only create tables or create"
      },
      {
        "start": 3176.48,
        "duration": 3.2,
        "text": "key space"
      },
      {
        "start": 3177.52,
        "duration": 4.64,
        "text": "and so anything else would need to be"
      },
      {
        "start": 3179.68,
        "duration": 4.159,
        "text": "done manually"
      },
      {
        "start": 3182.16,
        "duration": 3.199,
        "text": "and nothing would really tell developers"
      },
      {
        "start": 3183.839,
        "duration": 2.881,
        "text": "that yes it was written in our"
      },
      {
        "start": 3185.359,
        "duration": 5.76,
        "text": "documentation but"
      },
      {
        "start": 3186.72,
        "duration": 6.48,
        "text": "who has time to read the documentation"
      },
      {
        "start": 3191.119,
        "duration": 4.24,
        "text": "also the second point is that the"
      },
      {
        "start": 3193.2,
        "duration": 4.72,
        "text": "developers didn't get any feedback"
      },
      {
        "start": 3195.359,
        "duration": 3.441,
        "text": "if and when their schema changes were"
      },
      {
        "start": 3197.92,
        "duration": 3.919,
        "text": "applied so"
      },
      {
        "start": 3198.8,
        "duration": 3.84,
        "text": "a lot of times we would get like people"
      },
      {
        "start": 3201.839,
        "duration": 3.921,
        "text": "coming in our"
      },
      {
        "start": 3202.64,
        "duration": 5.199,
        "text": "slack channel and asking like hey i made"
      },
      {
        "start": 3205.76,
        "duration": 4.079,
        "text": "a schema change an hour ago and i really"
      },
      {
        "start": 3207.839,
        "duration": 4.401,
        "text": "don't i don't see it yet like is it"
      },
      {
        "start": 3209.839,
        "duration": 5.121,
        "text": "still going like what's going on"
      },
      {
        "start": 3212.24,
        "duration": 3.92,
        "text": "um and also the third point is the"
      },
      {
        "start": 3214.96,
        "duration": 3.44,
        "text": "schema changes"
      },
      {
        "start": 3216.16,
        "duration": 3.28,
        "text": "would be applied in a random order of"
      },
      {
        "start": 3218.4,
        "duration": 3.36,
        "text": "environments"
      },
      {
        "start": 3219.44,
        "duration": 4.639,
        "text": "so it's really just whichever process is"
      },
      {
        "start": 3221.76,
        "duration": 2.64,
        "text": "up in the contab would pick it up and so"
      },
      {
        "start": 3224.079,
        "duration": 2.48,
        "text": "the"
      },
      {
        "start": 3224.4,
        "duration": 3.6,
        "text": "the schema change could be done in"
      },
      {
        "start": 3226.559,
        "duration": 2.881,
        "text": "production before it was done in the"
      },
      {
        "start": 3228.0,
        "duration": 3.52,
        "text": "development environment"
      },
      {
        "start": 3229.44,
        "duration": 4.56,
        "text": "which is really not a good practice like"
      },
      {
        "start": 3231.52,
        "duration": 4.88,
        "text": "we we should do the schema changes in"
      },
      {
        "start": 3234.0,
        "duration": 4.0,
        "text": "increasing order of importance so"
      },
      {
        "start": 3236.4,
        "duration": 4.32,
        "text": "starting your dev and then stage and"
      },
      {
        "start": 3238.0,
        "duration": 2.72,
        "text": "then production"
      },
      {
        "start": 3241.359,
        "duration": 4.0,
        "text": "and also we we suffered from a lack of"
      },
      {
        "start": 3244.0,
        "duration": 3.599,
        "text": "context"
      },
      {
        "start": 3245.359,
        "duration": 4.96,
        "text": "so this is an actual comment that i"
      },
      {
        "start": 3247.599,
        "duration": 4.401,
        "text": "found in this git repository"
      },
      {
        "start": 3250.319,
        "duration": 3.201,
        "text": "i removed the name of the developer"
      },
      {
        "start": 3252.0,
        "duration": 2.8,
        "text": "because i didn't want to publicly shame"
      },
      {
        "start": 3253.52,
        "duration": 3.28,
        "text": "them but"
      },
      {
        "start": 3254.8,
        "duration": 3.2,
        "text": "this is really not a very good this is"
      },
      {
        "start": 3256.8,
        "duration": 3.44,
        "text": "not a very"
      },
      {
        "start": 3258.0,
        "duration": 3.76,
        "text": "good git comment message and it doesn't"
      },
      {
        "start": 3260.24,
        "duration": 4.0,
        "text": "give any context about"
      },
      {
        "start": 3261.76,
        "duration": 4.72,
        "text": "what the change that they're making like"
      },
      {
        "start": 3264.24,
        "duration": 4.319,
        "text": "what what purpose does it serve"
      },
      {
        "start": 3266.48,
        "duration": 4.639,
        "text": "it doesn't point to any like external"
      },
      {
        "start": 3268.559,
        "duration": 5.841,
        "text": "resource that would enable us in"
      },
      {
        "start": 3271.119,
        "duration": 4.48,
        "text": "one two several years to go back and"
      },
      {
        "start": 3274.4,
        "duration": 6.32,
        "text": "figure out"
      },
      {
        "start": 3275.599,
        "duration": 5.121,
        "text": "like how like what what this was about"
      },
      {
        "start": 3281.04,
        "duration": 3.44,
        "text": "and talking about the review process we"
      },
      {
        "start": 3284.0,
        "duration": 4.319,
        "text": "would"
      },
      {
        "start": 3284.48,
        "duration": 7.76,
        "text": "only rely on human review"
      },
      {
        "start": 3288.319,
        "duration": 6.961,
        "text": "so each each schema change would"
      },
      {
        "start": 3292.24,
        "duration": 6.24,
        "text": "be reviewed by us dre members"
      },
      {
        "start": 3295.28,
        "duration": 4.079,
        "text": "hopefully and we were the ones saying"
      },
      {
        "start": 3298.48,
        "duration": 3.04,
        "text": "like hey your"
      },
      {
        "start": 3299.359,
        "duration": 6.081,
        "text": "sql statement is probably not"
      },
      {
        "start": 3301.52,
        "duration": 5.839,
        "text": "syntactically correct and may fail"
      },
      {
        "start": 3305.44,
        "duration": 3.2,
        "text": "plus there was no actual mandatory"
      },
      {
        "start": 3307.359,
        "duration": 4.881,
        "text": "review from the"
      },
      {
        "start": 3308.64,
        "duration": 5.52,
        "text": "dre team so some schema changes"
      },
      {
        "start": 3312.24,
        "duration": 5.2,
        "text": "could possibly go to production without"
      },
      {
        "start": 3314.16,
        "duration": 3.28,
        "text": "without us looking at them"
      },
      {
        "start": 3318.16,
        "duration": 3.52,
        "text": "and so it overall it was more work for"
      },
      {
        "start": 3320.48,
        "duration": 2.879,
        "text": "us"
      },
      {
        "start": 3321.68,
        "duration": 4.0,
        "text": "uh because we had to explain these"
      },
      {
        "start": 3323.359,
        "duration": 5.601,
        "text": "surprises over and over again"
      },
      {
        "start": 3325.68,
        "duration": 3.84,
        "text": "uh we had to go debug problematic schema"
      },
      {
        "start": 3328.96,
        "duration": 3.359,
        "text": "changes"
      },
      {
        "start": 3329.52,
        "duration": 5.599,
        "text": "not necessarily knowing where they were"
      },
      {
        "start": 3332.319,
        "duration": 5.201,
        "text": "tried to be applied first"
      },
      {
        "start": 3335.119,
        "duration": 3.281,
        "text": "and we had to do a lot of manual schema"
      },
      {
        "start": 3337.52,
        "duration": 4.4,
        "text": "changes because"
      },
      {
        "start": 3338.4,
        "duration": 8.159,
        "text": "auto table statements were not supported"
      },
      {
        "start": 3341.92,
        "duration": 7.76,
        "text": "so we needed a better system and"
      },
      {
        "start": 3346.559,
        "duration": 5.04,
        "text": "luckily for us we at that time we joined"
      },
      {
        "start": 3349.68,
        "duration": 4.0,
        "text": "forces with the"
      },
      {
        "start": 3351.599,
        "duration": 4.081,
        "text": "what was called the database team so the"
      },
      {
        "start": 3353.68,
        "duration": 3.28,
        "text": "mysql team and and they had a system in"
      },
      {
        "start": 3355.68,
        "duration": 3.439,
        "text": "place"
      },
      {
        "start": 3356.96,
        "duration": 3.119,
        "text": "that uh that they used to do schema"
      },
      {
        "start": 3359.119,
        "duration": 4.401,
        "text": "changes"
      },
      {
        "start": 3360.079,
        "duration": 3.921,
        "text": "and we evaluated writing a whole new"
      },
      {
        "start": 3363.52,
        "duration": 3.279,
        "text": "system"
      },
      {
        "start": 3364.0,
        "duration": 3.2,
        "text": "to handle schema changes for cassandra"
      },
      {
        "start": 3366.799,
        "duration": 2.641,
        "text": "but"
      },
      {
        "start": 3367.2,
        "duration": 3.04,
        "text": "ultimately we decided to modify the"
      },
      {
        "start": 3369.44,
        "duration": 3.84,
        "text": "existing"
      },
      {
        "start": 3370.24,
        "duration": 4.879,
        "text": "like mysql system to make it a system"
      },
      {
        "start": 3373.28,
        "duration": 2.48,
        "text": "that can handle schema changes for both"
      },
      {
        "start": 3375.119,
        "duration": 4.48,
        "text": "bicycle"
      },
      {
        "start": 3375.76,
        "duration": 5.52,
        "text": "and cassandra so before i explain to you"
      },
      {
        "start": 3379.599,
        "duration": 4.401,
        "text": "how it works i'm going to"
      },
      {
        "start": 3381.28,
        "duration": 4.4,
        "text": "to go step by step and explain to you"
      },
      {
        "start": 3384.0,
        "duration": 6.799,
        "text": "how a developer would go"
      },
      {
        "start": 3385.68,
        "duration": 8.8,
        "text": "and and start a schema change"
      },
      {
        "start": 3390.799,
        "duration": 4.161,
        "text": "so first of all uh the the developer"
      },
      {
        "start": 3394.48,
        "duration": 3.839,
        "text": "would"
      },
      {
        "start": 3394.96,
        "duration": 5.04,
        "text": "uh clone this git repository which is"
      },
      {
        "start": 3398.319,
        "duration": 4.641,
        "text": "called pushplan"
      },
      {
        "start": 3400.0,
        "duration": 3.52,
        "text": "and on every one of our development box"
      },
      {
        "start": 3402.96,
        "duration": 3.68,
        "text": "there is"
      },
      {
        "start": 3403.52,
        "duration": 6.48,
        "text": "this uh utility called push plan"
      },
      {
        "start": 3406.64,
        "duration": 6.8,
        "text": "which is used now to handle"
      },
      {
        "start": 3410.0,
        "duration": 4.319,
        "text": "uh schema changes so a few interesting"
      },
      {
        "start": 3413.44,
        "duration": 2.639,
        "text": "things to note"
      },
      {
        "start": 3414.319,
        "duration": 3.76,
        "text": "uh so the the developer would start by"
      },
      {
        "start": 3416.079,
        "duration": 5.201,
        "text": "creating a push plan"
      },
      {
        "start": 3418.079,
        "duration": 6.161,
        "text": "um they gave the"
      },
      {
        "start": 3421.28,
        "duration": 4.0,
        "text": "the database type interestingly uh the"
      },
      {
        "start": 3424.24,
        "duration": 3.76,
        "text": "interesting thing"
      },
      {
        "start": 3425.28,
        "duration": 3.839,
        "text": "is that there is a mandatory jira ticket"
      },
      {
        "start": 3428.0,
        "duration": 4.0,
        "text": "field here"
      },
      {
        "start": 3429.119,
        "duration": 4.161,
        "text": "so each what this means is that each"
      },
      {
        "start": 3432.0,
        "duration": 4.079,
        "text": "schema change"
      },
      {
        "start": 3433.28,
        "duration": 4.4,
        "text": "like has a mandatory ticket attached so"
      },
      {
        "start": 3436.079,
        "duration": 5.28,
        "text": "we can always go back"
      },
      {
        "start": 3437.68,
        "duration": 6.0,
        "text": "and uh read about the context behind"
      },
      {
        "start": 3441.359,
        "duration": 3.44,
        "text": "behind the schematic and then you give"
      },
      {
        "start": 3443.68,
        "duration": 5.36,
        "text": "it a cluster"
      },
      {
        "start": 3444.799,
        "duration": 5.921,
        "text": "a key space and optionally a table"
      },
      {
        "start": 3449.04,
        "duration": 3.6,
        "text": "and the result of this is that it"
      },
      {
        "start": 3450.72,
        "duration": 5.44,
        "text": "creates in the right"
      },
      {
        "start": 3452.64,
        "duration": 5.76,
        "text": "in the right path it creates an empty"
      },
      {
        "start": 3456.16,
        "duration": 4.32,
        "text": "sql file where the developer can now"
      },
      {
        "start": 3458.4,
        "duration": 5.199,
        "text": "write that sql"
      },
      {
        "start": 3460.48,
        "duration": 6.4,
        "text": "so let's go write that sql we create a"
      },
      {
        "start": 3463.599,
        "duration": 7.121,
        "text": "very simple table meetup.attendance"
      },
      {
        "start": 3466.88,
        "duration": 6.64,
        "text": "and has two columns id and name"
      },
      {
        "start": 3470.72,
        "duration": 4.24,
        "text": "so now let's transform the sql file into"
      },
      {
        "start": 3473.52,
        "duration": 3.52,
        "text": "a push plan"
      },
      {
        "start": 3474.96,
        "duration": 3.76,
        "text": "so the developer now uses the pushdown"
      },
      {
        "start": 3477.04,
        "duration": 5.279,
        "text": "generate yaml command"
      },
      {
        "start": 3478.72,
        "duration": 6.399,
        "text": "passes it that sql file and oh so"
      },
      {
        "start": 3482.319,
        "duration": 3.601,
        "text": "we have a couple of validation errors"
      },
      {
        "start": 3485.119,
        "duration": 3.601,
        "text": "the first"
      },
      {
        "start": 3485.92,
        "duration": 3.6,
        "text": "one is that we have an unknown data type"
      },
      {
        "start": 3488.72,
        "duration": 3.76,
        "text": "str"
      },
      {
        "start": 3489.52,
        "duration": 6.72,
        "text": "is not a valve data type second one is i"
      },
      {
        "start": 3492.48,
        "duration": 3.76,
        "text": "forgot to specify a primary key"
      },
      {
        "start": 3496.319,
        "duration": 3.361,
        "text": "interesting thing to note here we added"
      },
      {
        "start": 3498.4,
        "duration": 3.36,
        "text": "a message that"
      },
      {
        "start": 3499.68,
        "duration": 3.36,
        "text": "contains a url to our internal"
      },
      {
        "start": 3501.76,
        "duration": 4.24,
        "text": "documentation"
      },
      {
        "start": 3503.04,
        "duration": 4.96,
        "text": "which goes into more details about why"
      },
      {
        "start": 3506.0,
        "duration": 4.72,
        "text": "it failed and and"
      },
      {
        "start": 3508.0,
        "duration": 4.64,
        "text": "in some cases will give will give"
      },
      {
        "start": 3510.72,
        "duration": 4.879,
        "text": "details about like how how people should"
      },
      {
        "start": 3512.64,
        "duration": 6.08,
        "text": "resolve these validation errors"
      },
      {
        "start": 3515.599,
        "duration": 4.401,
        "text": "so uh turns out i'm a very bad cassandra"
      },
      {
        "start": 3518.72,
        "duration": 4.48,
        "text": "developer so let's fix"
      },
      {
        "start": 3520.0,
        "duration": 6.72,
        "text": "this schema uh and and add a primary key"
      },
      {
        "start": 3523.2,
        "duration": 6.56,
        "text": "and change sdr to our chart"
      },
      {
        "start": 3526.72,
        "duration": 5.04,
        "text": "let's try again and now the generate"
      },
      {
        "start": 3529.76,
        "duration": 4.48,
        "text": "yaml command succeeds and what it does"
      },
      {
        "start": 3531.76,
        "duration": 3.44,
        "text": "is it replaces this sql file with a yama"
      },
      {
        "start": 3534.24,
        "duration": 2.879,
        "text": "file"
      },
      {
        "start": 3535.2,
        "duration": 3.599,
        "text": "and let's go look at the content of the"
      },
      {
        "start": 3537.119,
        "duration": 3.521,
        "text": "camel file"
      },
      {
        "start": 3538.799,
        "duration": 3.681,
        "text": "so at the bottom there are two main"
      },
      {
        "start": 3540.64,
        "duration": 5.04,
        "text": "sections metadata"
      },
      {
        "start": 3542.48,
        "duration": 7.359,
        "text": "and the actual statement question"
      },
      {
        "start": 3545.68,
        "duration": 7.2,
        "text": "statement section so the metadata"
      },
      {
        "start": 3549.839,
        "duration": 3.921,
        "text": "there let's go through the fields so we"
      },
      {
        "start": 3552.88,
        "duration": 3.76,
        "text": "have a unique"
      },
      {
        "start": 3553.76,
        "duration": 6.079,
        "text": "push plan id so we can refer to any"
      },
      {
        "start": 3556.64,
        "duration": 6.24,
        "text": "schema change by this unique id"
      },
      {
        "start": 3559.839,
        "duration": 7.28,
        "text": "we have the requester run by"
      },
      {
        "start": 3562.88,
        "duration": 6.64,
        "text": "is a field that we can set manually to"
      },
      {
        "start": 3567.119,
        "duration": 3.041,
        "text": "manual and what this does is it would"
      },
      {
        "start": 3569.52,
        "duration": 1.92,
        "text": "prevent"
      },
      {
        "start": 3570.16,
        "duration": 4.24,
        "text": "the push plan to be applied"
      },
      {
        "start": 3571.44,
        "duration": 5.04,
        "text": "automatically in some very rare cases we"
      },
      {
        "start": 3574.4,
        "duration": 3.199,
        "text": "still want to to apply some push plans"
      },
      {
        "start": 3576.48,
        "duration": 4.4,
        "text": "manually"
      },
      {
        "start": 3577.599,
        "duration": 4.641,
        "text": "a time stamp uh version is a field that"
      },
      {
        "start": 3580.88,
        "duration": 4.4,
        "text": "enables us to make"
      },
      {
        "start": 3582.24,
        "duration": 5.599,
        "text": "breaking validation changes meaning that"
      },
      {
        "start": 3585.28,
        "duration": 4.559,
        "text": "if we write a new validator that would"
      },
      {
        "start": 3587.839,
        "duration": 4.321,
        "text": "make validation break for some"
      },
      {
        "start": 3589.839,
        "duration": 3.121,
        "text": "previous previously existing schema"
      },
      {
        "start": 3592.16,
        "duration": 3.679,
        "text": "changes"
      },
      {
        "start": 3592.96,
        "duration": 5.44,
        "text": "we would bump the default version to"
      },
      {
        "start": 3595.839,
        "duration": 2.561,
        "text": "plus one"
      },
      {
        "start": 3598.559,
        "duration": 3.121,
        "text": "what that means is the higher the"
      },
      {
        "start": 3600.079,
        "duration": 6.24,
        "text": "version number"
      },
      {
        "start": 3601.68,
        "duration": 4.639,
        "text": "the more strict the validation will be"
      },
      {
        "start": 3606.559,
        "duration": 3.76,
        "text": "and then the developer will open the"
      },
      {
        "start": 3609.119,
        "duration": 4.161,
        "text": "pull request"
      },
      {
        "start": 3610.319,
        "duration": 3.681,
        "text": "um get now a mandatory ship it from from"
      },
      {
        "start": 3613.28,
        "duration": 4.16,
        "text": "one of us"
      },
      {
        "start": 3614.0,
        "duration": 6.02,
        "text": "uh in dre and finally"
      },
      {
        "start": 3617.44,
        "duration": 4.08,
        "text": "once they have that chip that"
      },
      {
        "start": 3620.02,
        "duration": 3.339,
        "text": "[Music]"
      },
      {
        "start": 3621.52,
        "duration": 4.16,
        "text": "positive review then they can merge"
      },
      {
        "start": 3623.359,
        "duration": 6.24,
        "text": "their comment"
      },
      {
        "start": 3625.68,
        "duration": 6.08,
        "text": "and then everything works automatically"
      },
      {
        "start": 3629.599,
        "duration": 4.081,
        "text": "the the push plan is going to the the"
      },
      {
        "start": 3631.76,
        "duration": 4.88,
        "text": "schema chain is going to be applied"
      },
      {
        "start": 3633.68,
        "duration": 4.56,
        "text": "in increasing order of importance so"
      },
      {
        "start": 3636.64,
        "duration": 3.04,
        "text": "first in our dev environment then your"
      },
      {
        "start": 3638.24,
        "duration": 4.48,
        "text": "stages environment and then"
      },
      {
        "start": 3639.68,
        "duration": 5.2,
        "text": "finally in production and for"
      },
      {
        "start": 3642.72,
        "duration": 3.52,
        "text": "each of these environments the developer"
      },
      {
        "start": 3644.88,
        "duration": 5.28,
        "text": "will be pinged on slack"
      },
      {
        "start": 3646.24,
        "duration": 6.4,
        "text": "with the result of the the push plan so"
      },
      {
        "start": 3650.16,
        "duration": 3.12,
        "text": "as you can see from this example this"
      },
      {
        "start": 3652.64,
        "duration": 2.479,
        "text": "garbage"
      },
      {
        "start": 3653.28,
        "duration": 3.68,
        "text": "uh pushpan oh which actually is that"
      },
      {
        "start": 3655.119,
        "duration": 2.24,
        "text": "that is a mysql pushpan but it doesn't"
      },
      {
        "start": 3656.96,
        "duration": 1.76,
        "text": "really"
      },
      {
        "start": 3657.359,
        "duration": 4.0,
        "text": "it doesn't really matter it looks"
      },
      {
        "start": 3658.72,
        "duration": 6.079,
        "text": "exactly the same for cassandra"
      },
      {
        "start": 3661.359,
        "duration": 6.0,
        "text": "uh that push plan failed in uh the dev"
      },
      {
        "start": 3664.799,
        "duration": 2.56,
        "text": "environment"
      },
      {
        "start": 3668.079,
        "duration": 3.52,
        "text": "the developer also has a couple of"
      },
      {
        "start": 3669.92,
        "duration": 4.24,
        "text": "options to go"
      },
      {
        "start": 3671.599,
        "duration": 4.641,
        "text": "check the the result of the pushpan so"
      },
      {
        "start": 3674.16,
        "duration": 4.56,
        "text": "we have the pushpan status command which"
      },
      {
        "start": 3676.24,
        "duration": 4.8,
        "text": "gives uh brief information about like"
      },
      {
        "start": 3678.72,
        "duration": 3.92,
        "text": "the status of a specific push plan"
      },
      {
        "start": 3681.04,
        "duration": 3.759,
        "text": "in this case we can see that it"
      },
      {
        "start": 3682.64,
        "duration": 6.08,
        "text": "succeeded in devon stage and it ended up"
      },
      {
        "start": 3684.799,
        "duration": 5.681,
        "text": "failing in prawn and we have the pushpan"
      },
      {
        "start": 3688.72,
        "duration": 4.16,
        "text": "history command"
      },
      {
        "start": 3690.48,
        "duration": 3.28,
        "text": "that gives a little bit more detail"
      },
      {
        "start": 3692.88,
        "duration": 3.6,
        "text": "about"
      },
      {
        "start": 3693.76,
        "duration": 3.92,
        "text": "how a pushpan was run but more"
      },
      {
        "start": 3696.48,
        "duration": 4.16,
        "text": "interestingly"
      },
      {
        "start": 3697.68,
        "duration": 5.2,
        "text": "we can it allows us to list all the push"
      },
      {
        "start": 3700.64,
        "duration": 4.4,
        "text": "plans that have been applied on"
      },
      {
        "start": 3702.88,
        "duration": 3.36,
        "text": "a specific cluster we can also specify"
      },
      {
        "start": 3705.04,
        "duration": 4.319,
        "text": "an environment"
      },
      {
        "start": 3706.24,
        "duration": 5.04,
        "text": "um so that that's if we're trying to"
      },
      {
        "start": 3709.359,
        "duration": 2.641,
        "text": "answer the question of like what change"
      },
      {
        "start": 3711.28,
        "duration": 3.759,
        "text": "that could have"
      },
      {
        "start": 3712.0,
        "duration": 5.28,
        "text": "caused this thing six months ago uh the"
      },
      {
        "start": 3715.039,
        "duration": 4.961,
        "text": "pushpan history command would be a good"
      },
      {
        "start": 3717.28,
        "duration": 4.48,
        "text": "a good tool to use to try to see if"
      },
      {
        "start": 3720.0,
        "duration": 6.559,
        "text": "there were any schema changes that"
      },
      {
        "start": 3721.76,
        "duration": 6.319,
        "text": "happened during that time so let's"
      },
      {
        "start": 3726.559,
        "duration": 4.0,
        "text": "go into a little bit of a system"
      },
      {
        "start": 3728.079,
        "duration": 5.601,
        "text": "overview"
      },
      {
        "start": 3730.559,
        "duration": 6.321,
        "text": "um so we rely on a git repository"
      },
      {
        "start": 3733.68,
        "duration": 6.8,
        "text": "uh which contains all the mysql and"
      },
      {
        "start": 3736.88,
        "duration": 4.32,
        "text": "cassandra push plans the pushpan"
      },
      {
        "start": 3740.48,
        "duration": 3.359,
        "text": "generator"
      },
      {
        "start": 3741.2,
        "duration": 4.48,
        "text": "python package uh is installed on all of"
      },
      {
        "start": 3743.839,
        "duration": 4.96,
        "text": "our development boxes"
      },
      {
        "start": 3745.68,
        "duration": 5.84,
        "text": "um it has it"
      },
      {
        "start": 3748.799,
        "duration": 5.841,
        "text": "has the pushdown command so pushbutton"
      },
      {
        "start": 3751.52,
        "duration": 5.839,
        "text": "create pushpin generate yaml and so on"
      },
      {
        "start": 3754.64,
        "duration": 3.6,
        "text": "and it does the automatic like the the"
      },
      {
        "start": 3757.359,
        "duration": 4.881,
        "text": "validation"
      },
      {
        "start": 3758.24,
        "duration": 7.44,
        "text": "of cassandra and and mysql pushpins"
      },
      {
        "start": 3762.24,
        "duration": 5.68,
        "text": "we have the push plan execution service"
      },
      {
        "start": 3765.68,
        "duration": 3.359,
        "text": "that is in charge of running workers"
      },
      {
        "start": 3767.92,
        "duration": 3.199,
        "text": "that will"
      },
      {
        "start": 3769.039,
        "duration": 4.881,
        "text": "apply schema changes again for both"
      },
      {
        "start": 3771.119,
        "duration": 6.48,
        "text": "casino and mysql"
      },
      {
        "start": 3773.92,
        "duration": 6.879,
        "text": "and the brains of the operation is the"
      },
      {
        "start": 3777.599,
        "duration": 5.841,
        "text": "aws step function state machine so this"
      },
      {
        "start": 3780.799,
        "duration": 3.76,
        "text": "really controls the execution of the"
      },
      {
        "start": 3783.44,
        "duration": 4.399,
        "text": "schema change"
      },
      {
        "start": 3784.559,
        "duration": 5.921,
        "text": "uh makes it so that we run from one"
      },
      {
        "start": 3787.839,
        "duration": 5.681,
        "text": "environment to the next"
      },
      {
        "start": 3790.48,
        "duration": 5.119,
        "text": "and all the statuses of"
      },
      {
        "start": 3793.52,
        "duration": 4.88,
        "text": "push plans are stored in the back end my"
      },
      {
        "start": 3795.599,
        "duration": 5.361,
        "text": "sql database"
      },
      {
        "start": 3798.4,
        "duration": 4.399,
        "text": "so each push plan will be in that"
      },
      {
        "start": 3800.96,
        "duration": 3.839,
        "text": "database with the status and"
      },
      {
        "start": 3802.799,
        "duration": 4.481,
        "text": "and the time that they were run and the"
      },
      {
        "start": 3804.799,
        "duration": 2.481,
        "text": "environment"
      },
      {
        "start": 3807.839,
        "duration": 5.52,
        "text": "so going from left to right uh"
      },
      {
        "start": 3810.88,
        "duration": 4.239,
        "text": "a push plan is started either manually"
      },
      {
        "start": 3813.359,
        "duration": 4.641,
        "text": "the other dre tools command"
      },
      {
        "start": 3815.119,
        "duration": 3.44,
        "text": "or automatically when the the comment is"
      },
      {
        "start": 3818.0,
        "duration": 4.48,
        "text": "merged"
      },
      {
        "start": 3818.559,
        "duration": 4.56,
        "text": "into master and then uh what that does"
      },
      {
        "start": 3822.48,
        "duration": 3.119,
        "text": "is it's"
      },
      {
        "start": 3823.119,
        "duration": 4.48,
        "text": "it's essentially starts the the state"
      },
      {
        "start": 3825.599,
        "duration": 5.681,
        "text": "machine for the dave environment"
      },
      {
        "start": 3827.599,
        "duration": 6.401,
        "text": "um the push plan execution workers"
      },
      {
        "start": 3831.28,
        "duration": 3.6,
        "text": "uh will pick up the or pick up the push"
      },
      {
        "start": 3834.0,
        "duration": 4.4,
        "text": "plan"
      },
      {
        "start": 3834.88,
        "duration": 6.0,
        "text": "and attempt to apply it"
      },
      {
        "start": 3838.4,
        "duration": 4.959,
        "text": "uh if it doesn't succeed then it fail"
      },
      {
        "start": 3840.88,
        "duration": 4.0,
        "text": "and it will fail fast meaning"
      },
      {
        "start": 3843.359,
        "duration": 3.2,
        "text": "other environments will not even be"
      },
      {
        "start": 3844.88,
        "duration": 4.0,
        "text": "attempted"
      },
      {
        "start": 3846.559,
        "duration": 3.76,
        "text": "if it's successful in dev then we'll go"
      },
      {
        "start": 3848.88,
        "duration": 3.52,
        "text": "into"
      },
      {
        "start": 3850.319,
        "duration": 3.52,
        "text": "we'll start another state machine for"
      },
      {
        "start": 3852.4,
        "duration": 3.36,
        "text": "the next environment"
      },
      {
        "start": 3853.839,
        "duration": 3.76,
        "text": "until we finish in the production"
      },
      {
        "start": 3855.76,
        "duration": 3.359,
        "text": "environment and if it's successful then"
      },
      {
        "start": 3857.599,
        "duration": 4.081,
        "text": "the push plan is going to be marked as"
      },
      {
        "start": 3859.119,
        "duration": 2.561,
        "text": "successful"
      },
      {
        "start": 3862.799,
        "duration": 7.441,
        "text": "so going a little bit deeper in the"
      },
      {
        "start": 3866.799,
        "duration": 6.161,
        "text": "push plan execution worker logic"
      },
      {
        "start": 3870.24,
        "duration": 3.92,
        "text": "there are a few steps a few things that"
      },
      {
        "start": 3872.96,
        "duration": 3.68,
        "text": "the worker will check"
      },
      {
        "start": 3874.16,
        "duration": 3.76,
        "text": "before even running the the sql"
      },
      {
        "start": 3876.64,
        "duration": 4.56,
        "text": "statement"
      },
      {
        "start": 3877.92,
        "duration": 5.679,
        "text": "um first of all we're able to"
      },
      {
        "start": 3881.2,
        "duration": 4.24,
        "text": "ignore some environments within the"
      },
      {
        "start": 3883.599,
        "duration": 3.361,
        "text": "pushpan i didn't i didn't show that in"
      },
      {
        "start": 3885.44,
        "duration": 4.159,
        "text": "the yaml but you can add"
      },
      {
        "start": 3886.96,
        "duration": 4.32,
        "text": "some yaml to say like hey i'd like to"
      },
      {
        "start": 3889.599,
        "duration": 4.881,
        "text": "ignore the dev environment"
      },
      {
        "start": 3891.28,
        "duration": 6.4,
        "text": "uh if that's the case then then this"
      },
      {
        "start": 3894.48,
        "duration": 4.8,
        "text": "the worker will just skip the push plan"
      },
      {
        "start": 3897.68,
        "duration": 4.08,
        "text": "um and i'll continue to the next"
      },
      {
        "start": 3899.28,
        "duration": 3.36,
        "text": "environment um we'll also check if the"
      },
      {
        "start": 3901.76,
        "duration": 2.96,
        "text": "cluster"
      },
      {
        "start": 3902.64,
        "duration": 3.439,
        "text": "uh for this push pen actually exists in"
      },
      {
        "start": 3904.72,
        "duration": 4.16,
        "text": "this environment"
      },
      {
        "start": 3906.079,
        "duration": 4.0,
        "text": "so not all clusters exist in all"
      },
      {
        "start": 3908.88,
        "duration": 5.76,
        "text": "environments"
      },
      {
        "start": 3910.079,
        "duration": 6.72,
        "text": "um so we we do check that first"
      },
      {
        "start": 3914.64,
        "duration": 4.159,
        "text": "and then finally it has a push plan with"
      },
      {
        "start": 3916.799,
        "duration": 3.841,
        "text": "a similar push plan id already been"
      },
      {
        "start": 3918.799,
        "duration": 3.76,
        "text": "complete in that environment"
      },
      {
        "start": 3920.64,
        "duration": 3.04,
        "text": "this is really important because this"
      },
      {
        "start": 3922.559,
        "duration": 4.24,
        "text": "ensures that"
      },
      {
        "start": 3923.68,
        "duration": 4.96,
        "text": "we can only run a push plan a single"
      },
      {
        "start": 3926.799,
        "duration": 2.401,
        "text": "time per environment like we don't want"
      },
      {
        "start": 3928.64,
        "duration": 2.24,
        "text": "to"
      },
      {
        "start": 3929.2,
        "duration": 3.52,
        "text": "have a case where we would run the same"
      },
      {
        "start": 3930.88,
        "duration": 5.679,
        "text": "push plan more than once"
      },
      {
        "start": 3932.72,
        "duration": 7.76,
        "text": "in in an environment"
      },
      {
        "start": 3936.559,
        "duration": 6.56,
        "text": "and so once the worker finds out that"
      },
      {
        "start": 3940.48,
        "duration": 4.0,
        "text": "yes indeed they should be running the"
      },
      {
        "start": 3943.119,
        "duration": 3.2,
        "text": "the push plan"
      },
      {
        "start": 3944.48,
        "duration": 3.76,
        "text": "he'll mark the pushpan as enqueued so"
      },
      {
        "start": 3946.319,
        "duration": 2.8,
        "text": "this means like write that into the"
      },
      {
        "start": 3948.24,
        "duration": 2.799,
        "text": "mysql"
      },
      {
        "start": 3949.119,
        "duration": 4.0,
        "text": "database of the pushpan execution"
      },
      {
        "start": 3951.039,
        "duration": 4.881,
        "text": "service"
      },
      {
        "start": 3953.119,
        "duration": 5.361,
        "text": "it will acquire a zookeeper lock for"
      },
      {
        "start": 3955.92,
        "duration": 4.8,
        "text": "this environment and cluster pair"
      },
      {
        "start": 3958.48,
        "duration": 3.44,
        "text": "what this does for us is that it ensures"
      },
      {
        "start": 3960.72,
        "duration": 5.2,
        "text": "that we only do"
      },
      {
        "start": 3961.92,
        "duration": 5.36,
        "text": "a single schema change per cluster at a"
      },
      {
        "start": 3965.92,
        "duration": 3.76,
        "text": "time"
      },
      {
        "start": 3967.28,
        "duration": 3.2,
        "text": "we don't we decided that we didn't want"
      },
      {
        "start": 3969.68,
        "duration": 2.56,
        "text": "to have"
      },
      {
        "start": 3970.48,
        "duration": 4.319,
        "text": "more than one schema change happen at"
      },
      {
        "start": 3972.24,
        "duration": 4.799,
        "text": "the same time"
      },
      {
        "start": 3974.799,
        "duration": 4.081,
        "text": "once the zookeeper lock is acquired"
      },
      {
        "start": 3977.039,
        "duration": 3.04,
        "text": "we'll mark the push planner started in"
      },
      {
        "start": 3978.88,
        "duration": 2.719,
        "text": "this environment and we'll"
      },
      {
        "start": 3980.079,
        "duration": 3.681,
        "text": "ping the push pin out there on slack"
      },
      {
        "start": 3981.599,
        "duration": 5.2,
        "text": "we'll say hey we're we're starting the"
      },
      {
        "start": 3983.76,
        "duration": 6.24,
        "text": "we're starting this the schema change"
      },
      {
        "start": 3986.799,
        "duration": 5.04,
        "text": "on the in this environment the worker"
      },
      {
        "start": 3990.0,
        "duration": 4.96,
        "text": "will connect to cassandra and"
      },
      {
        "start": 3991.839,
        "duration": 5.041,
        "text": "apply the the sql statement and if it's"
      },
      {
        "start": 3994.96,
        "duration": 2.56,
        "text": "successful it will mark the pushpan as"
      },
      {
        "start": 3996.88,
        "duration": 2.32,
        "text": "compute"
      },
      {
        "start": 3997.52,
        "duration": 3.039,
        "text": "completed again writing that to the"
      },
      {
        "start": 3999.2,
        "duration": 3.359,
        "text": "mysql database"
      },
      {
        "start": 4000.559,
        "duration": 3.52,
        "text": "and i'll ping the author on slack to"
      },
      {
        "start": 4002.559,
        "duration": 2.321,
        "text": "tell them that their schema change was"
      },
      {
        "start": 4004.079,
        "duration": 4.0,
        "text": "successful"
      },
      {
        "start": 4004.88,
        "duration": 5.04,
        "text": "if the schematic was not successful the"
      },
      {
        "start": 4008.079,
        "duration": 6.48,
        "text": "two last steps would be exactly the same"
      },
      {
        "start": 4009.92,
        "duration": 4.639,
        "text": "but replace completed with failed"
      },
      {
        "start": 4015.52,
        "duration": 3.599,
        "text": "so let's talk a little bit about the"
      },
      {
        "start": 4017.52,
        "duration": 6.0,
        "text": "automated validation"
      },
      {
        "start": 4019.119,
        "duration": 4.401,
        "text": "of a sql statement that we do"
      },
      {
        "start": 4023.92,
        "duration": 6.159,
        "text": "there are several advantages to to this"
      },
      {
        "start": 4027.039,
        "duration": 5.52,
        "text": "first of all we don't solely rely on"
      },
      {
        "start": 4030.079,
        "duration": 3.28,
        "text": "manual testing of sql statements so we"
      },
      {
        "start": 4032.559,
        "duration": 4.321,
        "text": "always"
      },
      {
        "start": 4033.359,
        "duration": 4.641,
        "text": "recommend developers that they try their"
      },
      {
        "start": 4036.88,
        "duration": 4.479,
        "text": "sql statements"
      },
      {
        "start": 4038.0,
        "duration": 6.079,
        "text": "like on a on a test cluster but"
      },
      {
        "start": 4041.359,
        "duration": 3.521,
        "text": "we can't rely on that like we can't we"
      },
      {
        "start": 4044.079,
        "duration": 3.921,
        "text": "can't rely"
      },
      {
        "start": 4044.88,
        "duration": 6.719,
        "text": "that that everybody would do that"
      },
      {
        "start": 4048.0,
        "duration": 4.16,
        "text": "and so we we can still catch a lot of"
      },
      {
        "start": 4051.599,
        "duration": 3.841,
        "text": "errors"
      },
      {
        "start": 4052.16,
        "duration": 5.36,
        "text": "with this automated validation and then"
      },
      {
        "start": 4055.44,
        "duration": 6.159,
        "text": "developers get fast feedback on"
      },
      {
        "start": 4057.52,
        "duration": 7.039,
        "text": "on synthetically wrong sql so before"
      },
      {
        "start": 4061.599,
        "duration": 3.76,
        "text": "you they would in in the previous system"
      },
      {
        "start": 4064.559,
        "duration": 4.401,
        "text": "they would"
      },
      {
        "start": 4065.359,
        "duration": 6.801,
        "text": "open a pull request and they'd wait"
      },
      {
        "start": 4068.96,
        "duration": 6.32,
        "text": "a few hours days to get feedback from us"
      },
      {
        "start": 4072.16,
        "duration": 6.32,
        "text": "that hey actually this is not valid"
      },
      {
        "start": 4075.28,
        "duration": 5.839,
        "text": "uh sql this is not a valid sql statement"
      },
      {
        "start": 4078.48,
        "duration": 4.639,
        "text": "now nowadays they get feedback as soon"
      },
      {
        "start": 4081.119,
        "duration": 5.761,
        "text": "as they try to generate that push plan"
      },
      {
        "start": 4083.119,
        "duration": 5.521,
        "text": "yaml file and we also able to enforce"
      },
      {
        "start": 4086.88,
        "duration": 3.679,
        "text": "best practices that we've established"
      },
      {
        "start": 4088.64,
        "duration": 3.919,
        "text": "here in gary"
      },
      {
        "start": 4090.559,
        "duration": 3.201,
        "text": "so it's not just to say hey your sql"
      },
      {
        "start": 4092.559,
        "duration": 4.001,
        "text": "statement is"
      },
      {
        "start": 4093.76,
        "duration": 4.559,
        "text": "is syntactically correct we also ensure"
      },
      {
        "start": 4096.56,
        "duration": 3.92,
        "text": "that they're doing the right thing"
      },
      {
        "start": 4098.319,
        "duration": 4.161,
        "text": "and and that's a really important thing"
      },
      {
        "start": 4100.48,
        "duration": 3.679,
        "text": "for us"
      },
      {
        "start": 4102.48,
        "duration": 4.879,
        "text": "so how does the automated validation"
      },
      {
        "start": 4104.159,
        "duration": 6.64,
        "text": "work uh we wrote a fairly simple"
      },
      {
        "start": 4107.359,
        "duration": 7.041,
        "text": "large parser that supports only the"
      },
      {
        "start": 4110.799,
        "duration": 6.88,
        "text": "sql schema modifying statements"
      },
      {
        "start": 4114.4,
        "duration": 3.919,
        "text": "and we so we parse the sql and once it's"
      },
      {
        "start": 4117.679,
        "duration": 2.56,
        "text": "parsed"
      },
      {
        "start": 4118.319,
        "duration": 3.601,
        "text": "for each of our validation rule we'll"
      },
      {
        "start": 4120.239,
        "duration": 5.361,
        "text": "inspect the tree"
      },
      {
        "start": 4121.92,
        "duration": 7.279,
        "text": "um the parse tree and we'll verify that"
      },
      {
        "start": 4125.6,
        "duration": 5.239,
        "text": "it it matches our evolution like it"
      },
      {
        "start": 4129.199,
        "duration": 4.08,
        "text": "it's okay with regard to other"
      },
      {
        "start": 4130.839,
        "duration": 5.161,
        "text": "additionals"
      },
      {
        "start": 4133.279,
        "duration": 4.4,
        "text": "so a few examples of automated valuation"
      },
      {
        "start": 4136.0,
        "duration": 4.08,
        "text": "rules that we have"
      },
      {
        "start": 4137.679,
        "duration": 4.401,
        "text": "so we have some simple things like what"
      },
      {
        "start": 4140.08,
        "duration": 5.199,
        "text": "you saw like one we"
      },
      {
        "start": 4142.08,
        "duration": 5.679,
        "text": "one and only one primary keeper table"
      },
      {
        "start": 4145.279,
        "duration": 4.321,
        "text": "that all the table options are valid and"
      },
      {
        "start": 4147.759,
        "duration": 4.96,
        "text": "of the valid type"
      },
      {
        "start": 4149.6,
        "duration": 4.639,
        "text": "um and then the the two last ones are"
      },
      {
        "start": 4152.719,
        "duration": 3.681,
        "text": "things that we've"
      },
      {
        "start": 4154.239,
        "duration": 4.0,
        "text": "decided to do it's not necessarily that"
      },
      {
        "start": 4156.4,
        "duration": 4.08,
        "text": "the sql statement is not"
      },
      {
        "start": 4158.239,
        "duration": 3.841,
        "text": "valid it's just that we've decided that"
      },
      {
        "start": 4160.48,
        "duration": 4.4,
        "text": "this would not be okay"
      },
      {
        "start": 4162.08,
        "duration": 4.48,
        "text": "so while we had a mix of cassandra 2 and"
      },
      {
        "start": 4164.88,
        "duration": 3.279,
        "text": "cassandra 3 clusters"
      },
      {
        "start": 4166.56,
        "duration": 3.119,
        "text": "it's not the case anymore but it used to"
      },
      {
        "start": 4168.159,
        "duration": 4.08,
        "text": "be"
      },
      {
        "start": 4169.679,
        "duration": 4.16,
        "text": "we decided to say hey let's let's"
      },
      {
        "start": 4172.239,
        "duration": 2.48,
        "text": "prevent people from altering column"
      },
      {
        "start": 4173.839,
        "duration": 3.201,
        "text": "types"
      },
      {
        "start": 4174.719,
        "duration": 4.321,
        "text": "uh even if that's could this could have"
      },
      {
        "start": 4177.04,
        "duration": 4.239,
        "text": "been valid in a casino 2 cluster we"
      },
      {
        "start": 4179.04,
        "duration": 3.279,
        "text": "wanted people to we wanted developers to"
      },
      {
        "start": 4181.279,
        "duration": 3.44,
        "text": "be"
      },
      {
        "start": 4182.319,
        "duration": 4.081,
        "text": "educated that this would not be possible"
      },
      {
        "start": 4184.719,
        "duration": 3.52,
        "text": "anymore"
      },
      {
        "start": 4186.4,
        "duration": 4.16,
        "text": "and the second example is not adding"
      },
      {
        "start": 4188.239,
        "duration": 5.761,
        "text": "more than 20 columns at a time"
      },
      {
        "start": 4190.56,
        "duration": 5.679,
        "text": "um we've had an incident about a year"
      },
      {
        "start": 4194.0,
        "duration": 4.32,
        "text": "ago where"
      },
      {
        "start": 4196.239,
        "duration": 3.361,
        "text": "a schema change was adding hundreds of"
      },
      {
        "start": 4198.32,
        "duration": 4.96,
        "text": "columns to"
      },
      {
        "start": 4199.6,
        "duration": 4.079,
        "text": "a standard table and the effect that"
      },
      {
        "start": 4203.28,
        "duration": 3.52,
        "text": "this"
      },
      {
        "start": 4203.679,
        "duration": 4.881,
        "text": "had was that uh it"
      },
      {
        "start": 4206.8,
        "duration": 4.24,
        "text": "brought the cluster down to its knees"
      },
      {
        "start": 4208.56,
        "duration": 2.8,
        "text": "and like the metadata that was added was"
      },
      {
        "start": 4211.04,
        "duration": 2.56,
        "text": "just"
      },
      {
        "start": 4211.36,
        "duration": 5.12,
        "text": "way too much and the performance of the"
      },
      {
        "start": 4213.6,
        "duration": 6.0,
        "text": "cluster was was really badly impacted"
      },
      {
        "start": 4216.48,
        "duration": 6.16,
        "text": "and so when we wrote the"
      },
      {
        "start": 4219.6,
        "duration": 5.28,
        "text": "postmodern for this incident uh we we"
      },
      {
        "start": 4222.64,
        "duration": 2.88,
        "text": "decided that we would add a validation"
      },
      {
        "start": 4224.88,
        "duration": 3.359,
        "text": "rule"
      },
      {
        "start": 4225.52,
        "duration": 4.719,
        "text": "that makes it so that a developer is not"
      },
      {
        "start": 4228.239,
        "duration": 4.721,
        "text": "able to add more than 20 columns"
      },
      {
        "start": 4230.239,
        "duration": 3.281,
        "text": "at a time to a table and interestingly"
      },
      {
        "start": 4232.96,
        "duration": 3.36,
        "text": "enough"
      },
      {
        "start": 4233.52,
        "duration": 4.48,
        "text": "a couple of months ago a developer was"
      },
      {
        "start": 4236.32,
        "duration": 4.64,
        "text": "trying to do just that"
      },
      {
        "start": 4238.0,
        "duration": 3.92,
        "text": "and they reached out to us and so we we"
      },
      {
        "start": 4240.96,
        "duration": 4.0,
        "text": "talked to them"
      },
      {
        "start": 4241.92,
        "duration": 6.4,
        "text": "about this change and uh"
      },
      {
        "start": 4244.96,
        "duration": 5.12,
        "text": "we the result was that we worked"
      },
      {
        "start": 4248.32,
        "duration": 3.76,
        "text": "because of that validation failure that"
      },
      {
        "start": 4250.08,
        "duration": 3.84,
        "text": "they had"
      },
      {
        "start": 4252.08,
        "duration": 3.84,
        "text": "they came to us and we worked with them"
      },
      {
        "start": 4253.92,
        "duration": 2.319,
        "text": "to actually make this change possible"
      },
      {
        "start": 4255.92,
        "duration": 2.96,
        "text": "and"
      },
      {
        "start": 4256.239,
        "duration": 4.48,
        "text": "and we we split their sql statements"
      },
      {
        "start": 4258.88,
        "duration": 3.92,
        "text": "into many different sql statements and"
      },
      {
        "start": 4260.719,
        "duration": 4.48,
        "text": "we ran them manually to ensure that"
      },
      {
        "start": 4262.8,
        "duration": 3.84,
        "text": "the performance of the cluster remained"
      },
      {
        "start": 4265.199,
        "duration": 4.321,
        "text": "uh decent through"
      },
      {
        "start": 4266.64,
        "duration": 4.4,
        "text": "throughout this operation and it's"
      },
      {
        "start": 4269.52,
        "duration": 4.8,
        "text": "really easy to add"
      },
      {
        "start": 4271.04,
        "duration": 5.76,
        "text": "new validation rules it's just a simple"
      },
      {
        "start": 4274.32,
        "duration": 3.44,
        "text": "python method that takes the the parse"
      },
      {
        "start": 4276.8,
        "duration": 3.52,
        "text": "tree and"
      },
      {
        "start": 4277.76,
        "duration": 3.36,
        "text": "just checks checks that some things in"
      },
      {
        "start": 4280.32,
        "duration": 3.6,
        "text": "the tree are"
      },
      {
        "start": 4281.12,
        "duration": 2.8,
        "text": "are as they should"
      },
      {
        "start": 4284.32,
        "duration": 4.08,
        "text": "so what are the lessons learned after"
      },
      {
        "start": 4286.88,
        "duration": 5.12,
        "text": "running this system in production"
      },
      {
        "start": 4288.4,
        "duration": 6.96,
        "text": "for about six months now"
      },
      {
        "start": 4292.0,
        "duration": 5.84,
        "text": "so a couple of challenges um from the"
      },
      {
        "start": 4295.36,
        "duration": 4.24,
        "text": "point of view of a developer"
      },
      {
        "start": 4297.84,
        "duration": 3.92,
        "text": "a new schema change is it's a little bit"
      },
      {
        "start": 4299.6,
        "duration": 4.0,
        "text": "more involved uh before they just had to"
      },
      {
        "start": 4301.76,
        "duration": 4.0,
        "text": "modify a single file in"
      },
      {
        "start": 4303.6,
        "duration": 3.2,
        "text": "uh in a git repository and and things"
      },
      {
        "start": 4305.76,
        "duration": 2.88,
        "text": "would be changed"
      },
      {
        "start": 4306.8,
        "duration": 3.439,
        "text": "now there is a little bit more wet tape"
      },
      {
        "start": 4308.64,
        "duration": 3.599,
        "text": "um"
      },
      {
        "start": 4310.239,
        "duration": 3.761,
        "text": "but ultimately we think that this is for"
      },
      {
        "start": 4312.239,
        "duration": 3.92,
        "text": "the best and it allows us"
      },
      {
        "start": 4314.0,
        "duration": 3.04,
        "text": "to to have a safer cassandra"
      },
      {
        "start": 4316.159,
        "duration": 3.04,
        "text": "infrastructure"
      },
      {
        "start": 4317.04,
        "duration": 4.24,
        "text": "and also like developers get fast"
      },
      {
        "start": 4319.199,
        "duration": 4.401,
        "text": "feedback"
      },
      {
        "start": 4321.28,
        "duration": 4.32,
        "text": "also we're storing in that push plan git"
      },
      {
        "start": 4323.6,
        "duration": 4.4,
        "text": "repository we're storing only diffs"
      },
      {
        "start": 4325.6,
        "duration": 3.599,
        "text": "of the schemas so it's only the actual"
      },
      {
        "start": 4328.0,
        "duration": 4.48,
        "text": "the the"
      },
      {
        "start": 4329.199,
        "duration": 5.601,
        "text": "sql is is what changed uh we still have"
      },
      {
        "start": 4332.48,
        "duration": 3.84,
        "text": "a need to store the full schemas in a"
      },
      {
        "start": 4334.8,
        "duration": 4.16,
        "text": "separate repository"
      },
      {
        "start": 4336.32,
        "duration": 4.16,
        "text": "uh specifically for integration testing"
      },
      {
        "start": 4338.96,
        "duration": 3.199,
        "text": "for apollo"
      },
      {
        "start": 4340.48,
        "duration": 3.28,
        "text": "and so developers need to actually"
      },
      {
        "start": 4342.159,
        "duration": 2.56,
        "text": "change the schemas in two different"
      },
      {
        "start": 4343.76,
        "duration": 3.2,
        "text": "places"
      },
      {
        "start": 4344.719,
        "duration": 6.641,
        "text": "which is not ideal but that may go away"
      },
      {
        "start": 4346.96,
        "duration": 4.4,
        "text": "once uh this target project is completed"
      },
      {
        "start": 4352.08,
        "duration": 4.0,
        "text": "and positives uh there are two sides of"
      },
      {
        "start": 4354.84,
        "duration": 3.319,
        "text": "positives"
      },
      {
        "start": 4356.08,
        "duration": 3.52,
        "text": "so first of all the schema changes"
      },
      {
        "start": 4358.159,
        "duration": 4.641,
        "text": "reviews are much easier for"
      },
      {
        "start": 4359.6,
        "duration": 5.04,
        "text": "for the dre team automatic validation"
      },
      {
        "start": 4362.8,
        "duration": 5.12,
        "text": "does most of the work"
      },
      {
        "start": 4364.64,
        "duration": 7.28,
        "text": "we don't have to hunt like silly"
      },
      {
        "start": 4367.92,
        "duration": 7.2,
        "text": "sql mistakes uh we we can"
      },
      {
        "start": 4371.92,
        "duration": 5.68,
        "text": "uh when we review a"
      },
      {
        "start": 4375.12,
        "duration": 3.84,
        "text": "schema change we can spend more time to"
      },
      {
        "start": 4377.6,
        "duration": 1.92,
        "text": "actually think whether the schema"
      },
      {
        "start": 4378.96,
        "duration": 3.279,
        "text": "changes"
      },
      {
        "start": 4379.52,
        "duration": 3.44,
        "text": "is what needs to be modified and not"
      },
      {
        "start": 4382.239,
        "duration": 4.0,
        "text": "about like"
      },
      {
        "start": 4382.96,
        "duration": 5.759,
        "text": "the nitty-gritty of it"
      },
      {
        "start": 4386.239,
        "duration": 4.48,
        "text": "um it's now possible for us to enforce"
      },
      {
        "start": 4388.719,
        "duration": 3.761,
        "text": "cassandra best practices"
      },
      {
        "start": 4390.719,
        "duration": 3.52,
        "text": "so it's not only like is your sql"
      },
      {
        "start": 4392.48,
        "duration": 4.56,
        "text": "statement valid it's also like"
      },
      {
        "start": 4394.239,
        "duration": 4.241,
        "text": "is are you doing the the best thing you"
      },
      {
        "start": 4397.04,
        "duration": 3.36,
        "text": "can"
      },
      {
        "start": 4398.48,
        "duration": 3.44,
        "text": "and developers know how to get the"
      },
      {
        "start": 4400.4,
        "duration": 3.36,
        "text": "status of the schema change they don't"
      },
      {
        "start": 4401.92,
        "duration": 2.64,
        "text": "need to come to us anymore to ask like"
      },
      {
        "start": 4403.76,
        "duration": 2.959,
        "text": "hey"
      },
      {
        "start": 4404.56,
        "duration": 5.04,
        "text": "what is happening without schema change"
      },
      {
        "start": 4406.719,
        "duration": 2.881,
        "text": "i don't see anything"
      },
      {
        "start": 4410.32,
        "duration": 7.52,
        "text": "i guess okay i'm missing a couple of"
      },
      {
        "start": 4414.32,
        "duration": 3.52,
        "text": "sides here i don't know what's happening"
      },
      {
        "start": 4418.48,
        "duration": 2.239,
        "text": "okay"
      },
      {
        "start": 4424.84,
        "duration": 6.359,
        "text": "yep that's right"
      },
      {
        "start": 4427.6,
        "duration": 6.32,
        "text": "we'll just we'll just wing it um"
      },
      {
        "start": 4431.199,
        "duration": 4.881,
        "text": "and the the the last the last one the"
      },
      {
        "start": 4433.92,
        "duration": 4.799,
        "text": "last big positive for us is that we"
      },
      {
        "start": 4436.08,
        "duration": 4.88,
        "text": "have mandatory context gathering for"
      },
      {
        "start": 4438.719,
        "duration": 4.641,
        "text": "each of the"
      },
      {
        "start": 4440.96,
        "duration": 4.719,
        "text": "for each of the schema change so because"
      },
      {
        "start": 4443.36,
        "duration": 4.879,
        "text": "we enforce that there is a jira ticket"
      },
      {
        "start": 4445.679,
        "duration": 3.281,
        "text": "attached to each schema change it means"
      },
      {
        "start": 4448.239,
        "duration": 2.401,
        "text": "that"
      },
      {
        "start": 4448.96,
        "duration": 3.279,
        "text": "a few years after a schema change"
      },
      {
        "start": 4450.64,
        "duration": 5.039,
        "text": "happened we still can"
      },
      {
        "start": 4452.239,
        "duration": 5.361,
        "text": "easily find uh documentation around that"
      },
      {
        "start": 4455.679,
        "duration": 4.56,
        "text": "schema change why it was made"
      },
      {
        "start": 4457.6,
        "duration": 5.28,
        "text": "and why it was done in a certain way and"
      },
      {
        "start": 4460.239,
        "duration": 6.081,
        "text": "that's that's really vital for us"
      },
      {
        "start": 4462.88,
        "duration": 5.12,
        "text": "um great so i had a hiring slide"
      },
      {
        "start": 4466.32,
        "duration": 4.0,
        "text": "because we wanted to let you know again"
      },
      {
        "start": 4468.0,
        "duration": 4.719,
        "text": "that uh yelp is hiring"
      },
      {
        "start": 4470.32,
        "duration": 3.2,
        "text": "uh we are hiring both for the diary no"
      },
      {
        "start": 4472.719,
        "duration": 3.361,
        "text": "sql team"
      },
      {
        "start": 4473.52,
        "duration": 3.12,
        "text": "and for a lot of different other teams"
      },
      {
        "start": 4476.08,
        "duration": 3.599,
        "text": "so"
      },
      {
        "start": 4476.64,
        "duration": 5.599,
        "text": "if you're interested in a career at help"
      },
      {
        "start": 4479.679,
        "duration": 4.081,
        "text": "come visit careers.gov.com or you can"
      },
      {
        "start": 4482.239,
        "duration": 3.761,
        "text": "reach out to isil"
      },
      {
        "start": 4483.76,
        "duration": 3.04,
        "text": "uh you can find her email address in the"
      },
      {
        "start": 4486.0,
        "duration": 4.8,
        "text": "beginning of this"
      },
      {
        "start": 4486.8,
        "duration": 7.28,
        "text": "presentation so um"
      },
      {
        "start": 4490.8,
        "duration": 5.439,
        "text": "and just to the conclusion um"
      },
      {
        "start": 4494.08,
        "duration": 3.92,
        "text": "like we do a lot of schema changes we"
      },
      {
        "start": 4496.239,
        "duration": 2.96,
        "text": "have a lot of clusters maybe you work"
      },
      {
        "start": 4498.0,
        "duration": 2.96,
        "text": "for a small company"
      },
      {
        "start": 4499.199,
        "duration": 3.761,
        "text": "and you don't have a need for such like"
      },
      {
        "start": 4500.96,
        "duration": 3.04,
        "text": "a big project to manage your schema"
      },
      {
        "start": 4502.96,
        "duration": 3.68,
        "text": "changes"
      },
      {
        "start": 4504.0,
        "duration": 4.4,
        "text": "but like we think there are two"
      },
      {
        "start": 4506.64,
        "duration": 4.16,
        "text": "important takeaways for you"
      },
      {
        "start": 4508.4,
        "duration": 4.08,
        "text": "uh the first one is gathering feedback"
      },
      {
        "start": 4510.8,
        "duration": 3.76,
        "text": "we think it's really vital"
      },
      {
        "start": 4512.48,
        "duration": 3.52,
        "text": "uh so if you don't have a process in"
      },
      {
        "start": 4514.56,
        "duration": 3.679,
        "text": "place to to like"
      },
      {
        "start": 4516.0,
        "duration": 3.199,
        "text": "attach a schema change with with some"
      },
      {
        "start": 4518.239,
        "duration": 3.201,
        "text": "context"
      },
      {
        "start": 4519.199,
        "duration": 4.641,
        "text": "uh try to try to put that in place it"
      },
      {
        "start": 4521.44,
        "duration": 4.48,
        "text": "will maybe save your skin in a in a few"
      },
      {
        "start": 4523.84,
        "duration": 4.24,
        "text": "years when when you have a bad problem"
      },
      {
        "start": 4525.92,
        "duration": 4.239,
        "text": "with it with a previous schema change"
      },
      {
        "start": 4528.08,
        "duration": 3.119,
        "text": "and the second one is automated"
      },
      {
        "start": 4530.159,
        "duration": 3.681,
        "text": "validation"
      },
      {
        "start": 4531.199,
        "duration": 4.641,
        "text": "it may not be necessary for for a lot of"
      },
      {
        "start": 4533.84,
        "duration": 5.04,
        "text": "people but we found that for us"
      },
      {
        "start": 4535.84,
        "duration": 5.6,
        "text": "it really helped us save a lot of time"
      },
      {
        "start": 4538.88,
        "duration": 4.319,
        "text": "for developers as well as for us like"
      },
      {
        "start": 4541.44,
        "duration": 5.44,
        "text": "cassandra administrators"
      },
      {
        "start": 4543.199,
        "duration": 4.081,
        "text": "uh and it it makes applying a schema"
      },
      {
        "start": 4546.88,
        "duration": 3.76,
        "text": "change"
      },
      {
        "start": 4547.28,
        "duration": 4.16,
        "text": "a lot safer and easier thank you for"
      },
      {
        "start": 4550.64,
        "duration": 3.039,
        "text": "your time"
      },
      {
        "start": 4551.44,
        "duration": 3.6,
        "text": "uh i will now take a few questions if"
      },
      {
        "start": 4553.679,
        "duration": 6.161,
        "text": "there are"
      },
      {
        "start": 4555.04,
        "duration": 8.08,
        "text": "some questions yep uh so"
      },
      {
        "start": 4559.84,
        "duration": 6.08,
        "text": "there is uh first of all uh"
      },
      {
        "start": 4563.12,
        "duration": 4.48,
        "text": "this is great thank you from dr denis"
      },
      {
        "start": 4565.92,
        "duration": 4.72,
        "text": "gosnell"
      },
      {
        "start": 4567.6,
        "duration": 6.559,
        "text": "which is really great to see"
      },
      {
        "start": 4570.64,
        "duration": 6.559,
        "text": "i have one question on youtube chat"
      },
      {
        "start": 4574.159,
        "duration": 5.681,
        "text": "which doesn't directly relates to"
      },
      {
        "start": 4577.199,
        "duration": 3.761,
        "text": "that topic you told but i guess will be"
      },
      {
        "start": 4579.84,
        "duration": 4.0,
        "text": "interesting"
      },
      {
        "start": 4580.96,
        "duration": 4.4,
        "text": "to all of our listeners are you using"
      },
      {
        "start": 4583.84,
        "duration": 4.319,
        "text": "only one database"
      },
      {
        "start": 4585.36,
        "duration": 3.839,
        "text": "cassandra at yelp i know what answer is"
      },
      {
        "start": 4588.159,
        "duration": 5.921,
        "text": "no"
      },
      {
        "start": 4589.199,
        "duration": 8.321,
        "text": "but yeah so um"
      },
      {
        "start": 4594.08,
        "duration": 4.0,
        "text": "i i so if we're talking about database"
      },
      {
        "start": 4597.52,
        "duration": 3.44,
        "text": "types"
      },
      {
        "start": 4598.08,
        "duration": 3.52,
        "text": "uh we have a job we have mostly support"
      },
      {
        "start": 4600.96,
        "duration": 2.96,
        "text": "for"
      },
      {
        "start": 4601.6,
        "duration": 4.72,
        "text": "mysql database as well as cassandra"
      },
      {
        "start": 4603.92,
        "duration": 4.16,
        "text": "database"
      },
      {
        "start": 4606.32,
        "duration": 3.359,
        "text": "and if you consider elasticsearch"
      },
      {
        "start": 4608.08,
        "duration": 3.28,
        "text": "database then we also have a lot of"
      },
      {
        "start": 4609.679,
        "duration": 4.321,
        "text": "elastic stretch clusters"
      },
      {
        "start": 4611.36,
        "duration": 3.04,
        "text": "uh and some this these are the three"
      },
      {
        "start": 4614.0,
        "duration": 2.96,
        "text": "main"
      },
      {
        "start": 4614.4,
        "duration": 3.92,
        "text": "uh custom the three main database types"
      },
      {
        "start": 4616.96,
        "duration": 3.279,
        "text": "that we supported yeah"
      },
      {
        "start": 4618.32,
        "duration": 4.24,
        "text": "if we're talking about uh database"
      },
      {
        "start": 4620.239,
        "duration": 4.081,
        "text": "clusters for cassandra"
      },
      {
        "start": 4622.56,
        "duration": 4.08,
        "text": "no we don't have a single we don't we"
      },
      {
        "start": 4624.32,
        "duration": 3.359,
        "text": "don't run a single cassandra instance at"
      },
      {
        "start": 4626.64,
        "duration": 4.0,
        "text": "yalp"
      },
      {
        "start": 4627.679,
        "duration": 3.841,
        "text": "we run dozens of them um i don't"
      },
      {
        "start": 4630.64,
        "duration": 3.92,
        "text": "actually"
      },
      {
        "start": 4631.52,
        "duration": 3.679,
        "text": "it's it's several dozens uh is i don't"
      },
      {
        "start": 4634.56,
        "duration": 3.679,
        "text": "actually know"
      },
      {
        "start": 4635.199,
        "duration": 4.401,
        "text": "the the number uh plus each each of"
      },
      {
        "start": 4638.239,
        "duration": 4.0,
        "text": "these clusters"
      },
      {
        "start": 4639.6,
        "duration": 3.92,
        "text": "uh runs independently in several uh"
      },
      {
        "start": 4642.239,
        "duration": 4.161,
        "text": "environments so"
      },
      {
        "start": 4643.52,
        "duration": 7.28,
        "text": "all in all like we run probably more"
      },
      {
        "start": 4646.4,
        "duration": 8.319,
        "text": "than a hundred uh cassandra crystals"
      },
      {
        "start": 4650.8,
        "duration": 3.919,
        "text": "talking about your presentation"
      },
      {
        "start": 4654.96,
        "duration": 3.44,
        "text": "some years ago many years ago i've read"
      },
      {
        "start": 4657.679,
        "duration": 3.761,
        "text": "a book"
      },
      {
        "start": 4658.4,
        "duration": 4.319,
        "text": "by robert glass one very cool software"
      },
      {
        "start": 4661.44,
        "duration": 3.36,
        "text": "engineer"
      },
      {
        "start": 4662.719,
        "duration": 4.561,
        "text": "with like long long long long many"
      },
      {
        "start": 4664.8,
        "duration": 4.879,
        "text": "dozens of your experience on this field"
      },
      {
        "start": 4667.28,
        "duration": 3.2,
        "text": "and the phrase in his book what it would"
      },
      {
        "start": 4669.679,
        "duration": 4.321,
        "text": "be great"
      },
      {
        "start": 4670.48,
        "duration": 3.92,
        "text": "to have the ability to link every change"
      },
      {
        "start": 4674.0,
        "duration": 3.28,
        "text": "set"
      },
      {
        "start": 4674.4,
        "duration": 4.08,
        "text": "every change in our code into the task"
      },
      {
        "start": 4677.28,
        "duration": 3.84,
        "text": "what we are doing"
      },
      {
        "start": 4678.48,
        "duration": 4.32,
        "text": "so bad we don't have this ability and i"
      },
      {
        "start": 4681.12,
        "duration": 2.4,
        "text": "was like oh yeah it would be indeed"
      },
      {
        "start": 4682.8,
        "duration": 3.2,
        "text": "great"
      },
      {
        "start": 4683.52,
        "duration": 3.28,
        "text": "uh to have this ability to link them and"
      },
      {
        "start": 4686.0,
        "duration": 4.159,
        "text": "then like stop"
      },
      {
        "start": 4686.8,
        "duration": 6.56,
        "text": "but we do have already uh i realized"
      },
      {
        "start": 4690.159,
        "duration": 6.241,
        "text": "what book was written before uh the"
      },
      {
        "start": 4693.36,
        "duration": 6.48,
        "text": "tools like git were introduced"
      },
      {
        "start": 4696.4,
        "duration": 5.68,
        "text": "and now we have this ability and you go"
      },
      {
        "start": 4699.84,
        "duration": 3.52,
        "text": "even further you are linking the change"
      },
      {
        "start": 4702.08,
        "duration": 4.079,
        "text": "sets to the chemist"
      },
      {
        "start": 4703.36,
        "duration": 5.04,
        "text": "of your database to a particular task"
      },
      {
        "start": 4706.159,
        "duration": 4.08,
        "text": "you are executing and you are automating"
      },
      {
        "start": 4708.4,
        "duration": 4.96,
        "text": "validation to do that"
      },
      {
        "start": 4710.239,
        "duration": 5.841,
        "text": "i'm a big fan of"
      },
      {
        "start": 4713.36,
        "duration": 4.56,
        "text": "auto magic and the things you uh"
      },
      {
        "start": 4716.08,
        "duration": 3.52,
        "text": "automate like that how it helps the"
      },
      {
        "start": 4717.92,
        "duration": 4.48,
        "text": "developers and business"
      },
      {
        "start": 4719.6,
        "duration": 5.2,
        "text": "and that's incredible to see uh people"
      },
      {
        "start": 4722.4,
        "duration": 4.319,
        "text": "taking care of that so seriously that's"
      },
      {
        "start": 4724.8,
        "duration": 2.48,
        "text": "a really incredible talk and that's"
      },
      {
        "start": 4726.719,
        "duration": 3.44,
        "text": "really"
      },
      {
        "start": 4727.28,
        "duration": 3.2,
        "text": "incredible job you are doing there like"
      },
      {
        "start": 4730.159,
        "duration": 2.801,
        "text": "i"
      },
      {
        "start": 4730.48,
        "duration": 4.64,
        "text": "i see we have many dozens of people"
      },
      {
        "start": 4732.96,
        "duration": 5.68,
        "text": "watching this meetup live"
      },
      {
        "start": 4735.12,
        "duration": 6.72,
        "text": "and very warm feedback"
      },
      {
        "start": 4738.64,
        "duration": 4.48,
        "text": "and now we see what with the attention"
      },
      {
        "start": 4741.84,
        "duration": 3.28,
        "text": "what yelp puts"
      },
      {
        "start": 4743.12,
        "duration": 3.2,
        "text": "to their code and how do they work with"
      },
      {
        "start": 4745.12,
        "duration": 4.32,
        "text": "the database"
      },
      {
        "start": 4746.32,
        "duration": 5.839,
        "text": "with semichanges migrations"
      },
      {
        "start": 4749.44,
        "duration": 3.12,
        "text": "that's maybe a really good place to work"
      },
      {
        "start": 4752.159,
        "duration": 4.721,
        "text": "so"
      },
      {
        "start": 4752.56,
        "duration": 7.76,
        "text": "you may have to contact either and"
      },
      {
        "start": 4756.88,
        "duration": 6.72,
        "text": "i think i'm switching"
      },
      {
        "start": 4760.32,
        "duration": 6.399,
        "text": "back to a main view"
      },
      {
        "start": 4763.6,
        "duration": 7.92,
        "text": "and if"
      },
      {
        "start": 4766.719,
        "duration": 8.801,
        "text": "we have if you have any more questions"
      },
      {
        "start": 4771.52,
        "duration": 6.24,
        "text": "that would be great to get you people"
      },
      {
        "start": 4775.52,
        "duration": 3.44,
        "text": "asking them right now because we are"
      },
      {
        "start": 4777.76,
        "duration": 4.8,
        "text": "going"
      },
      {
        "start": 4778.96,
        "duration": 7.279,
        "text": "to stop so ask now or stay quiet forever"
      },
      {
        "start": 4782.56,
        "duration": 6.88,
        "text": "kidding ask questions later"
      },
      {
        "start": 4786.239,
        "duration": 8.801,
        "text": "you guests will be able to find us"
      },
      {
        "start": 4789.44,
        "duration": 5.6,
        "text": "on linkedin i think so give me a moment"
      },
      {
        "start": 4802.84,
        "duration": 6.359,
        "text": "alex"
      },
      {
        "start": 4804.08,
        "duration": 5.119,
        "text": "it's weird give me a moment"
      },
      {
        "start": 4816.239,
        "duration": 5.44,
        "text": "okay so"
      },
      {
        "start": 4819.36,
        "duration": 4.24,
        "text": "i see no more questions only thank you"
      },
      {
        "start": 4821.679,
        "duration": 3.361,
        "text": "thank you this is great on the youtube"
      },
      {
        "start": 4823.6,
        "duration": 6.079,
        "text": "chat"
      },
      {
        "start": 4825.04,
        "duration": 8.8,
        "text": "uh so i think that's"
      },
      {
        "start": 4829.679,
        "duration": 6.881,
        "text": "we are done and"
      },
      {
        "start": 4833.84,
        "duration": 3.68,
        "text": "enough for today well thanks for"
      },
      {
        "start": 4836.56,
        "duration": 4.159,
        "text": "attending"
      },
      {
        "start": 4837.52,
        "duration": 6.24,
        "text": "um it was it was a blast and um"
      },
      {
        "start": 4840.719,
        "duration": 5.92,
        "text": "yeah come come talk to our hr"
      },
      {
        "start": 4843.76,
        "duration": 4.399,
        "text": "uh to our tech recruiting folks uh if"
      },
      {
        "start": 4846.639,
        "duration": 2.961,
        "text": "you're interested to uh"
      },
      {
        "start": 4848.159,
        "duration": 3.201,
        "text": "come first see for yourself what we're"
      },
      {
        "start": 4849.6,
        "duration": 4.48,
        "text": "doing here at yeah yep"
      },
      {
        "start": 4851.36,
        "duration": 4.799,
        "text": "and i i don't know about our attendees"
      },
      {
        "start": 4854.08,
        "duration": 4.4,
        "text": "but i am definitely to contact you"
      },
      {
        "start": 4856.159,
        "duration": 3.761,
        "text": "not because of a hiring question sorry"
      },
      {
        "start": 4858.48,
        "duration": 4.56,
        "text": "uh but"
      },
      {
        "start": 4859.92,
        "duration": 4.799,
        "text": "more i want you to speak more often at"
      },
      {
        "start": 4863.04,
        "duration": 5.28,
        "text": "cassandra global meetups"
      },
      {
        "start": 4864.719,
        "duration": 5.44,
        "text": "uh at datastax developers on youtube"
      },
      {
        "start": 4868.32,
        "duration": 3.68,
        "text": "because you guys have incredible"
      },
      {
        "start": 4870.159,
        "duration": 4.401,
        "text": "experience with apache cassandra"
      },
      {
        "start": 4872.0,
        "duration": 4.0,
        "text": "and community over the world wants you"
      },
      {
        "start": 4874.56,
        "duration": 4.56,
        "text": "to share it"
      },
      {
        "start": 4876.0,
        "duration": 7.04,
        "text": "that's for sure right"
      },
      {
        "start": 4879.12,
        "duration": 7.28,
        "text": "okay uh so that was uh blueprint"
      },
      {
        "start": 4883.04,
        "duration": 4.96,
        "text": "london virtual event yelp engineers"
      },
      {
        "start": 4886.4,
        "duration": 3.2,
        "text": "speaking at the meetup"
      },
      {
        "start": 4888.0,
        "duration": 3.36,
        "text": "organized with the support of the"
      },
      {
        "start": 4889.6,
        "duration": 5.36,
        "text": "datastax developers"
      },
      {
        "start": 4891.36,
        "duration": 7.12,
        "text": "and thank you everyone for attending us"
      },
      {
        "start": 4894.96,
        "duration": 6.56,
        "text": "and i think we are done for today"
      },
      {
        "start": 4898.48,
        "duration": 12.32,
        "text": "so thank you and see you next time have"
      },
      {
        "start": 4901.52,
        "duration": 9.28,
        "text": "a great week"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-15T20:55:16.982456+00:00"
}