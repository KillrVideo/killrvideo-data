{
  "video_id": "eY1tKYQ6XBA",
  "title": "DS310.22 Function Queries | DataStax Enterprise 6 Search",
  "description": "#DataStaxAcademy #DS310\nDS310.22 Function Queries\nIn this section we will see some different parsers that allows a user to manipulate document scores using pre-built functions. They can be used in conjunction with the major query parsers. \n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-15T20:53:22Z",
  "thumbnail": "https://i.ytimg.com/vi/eY1tKYQ6XBA/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "cassandra",
    "search",
    "tutorial",
    "apache_cassandra",
    "query",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=eY1tKYQ6XBA",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] hi i'm joe chu and welcome to function queries in this video we will be talking about some different parsers that allows a user to manipulate document scores using pre-built functions they can be used in conjunction with the major query parsers such as the standard parser diskmax and edis max parsers and can be added to the queue fq and sort parameters in the search query while the functions can be used to replace the score of a document please be aware that it's not possible to return the result of a function directly there are two function parsers that we will be describing in this video the function query parser and the function range query parser the function query parser works by specifying the parser and providing a function query in new of a search query the function query will then run on all of the documents in the search index with the result of the function query acting as a score for the document the function range query parser uses a set of bounds for the output of a function query in addition to the relevancy score to determine documents that are included in the search results here we have an example of using the function query parser instead of a search query we are using a function query that divides the value of the sum ratings column by the num ratings column which essentially is generating an average rating for each document the output of the function is the score for the document and will determine what documents are included in the results with the highest scores at the front the second example here is a json search query that uses the same function query but also includes a filter query that contains a search expression therefore this json search query will only return the documents that have a num ratings of 100 sorted by the function query only returning documents that have exactly a value of 100 sounds limited which is why our next couple examples will show how this can be done a bit better in our first function range query example the same function query is used as our previous examples except that it uses the f range parser to determine the bounds for the function query output which needs to be between greater than or equal to 7 and less than 9. the second example uses the function range query parser as a filter query to include only the documents that have num ratings of 20 or more it is also possible to use functions directly in the search query sort parameter and gives control to determine the order direction in these examples you can see our function query is added here to return results in either ascending or descending order here are some of the common mathematical and relevancy score related functions that are available to use with function queries aside from these there are much more that can be used which i invite you to check out a complete list can be found in the solar reference guide",
    "segments": [
      {
        "start": 2.1,
        "duration": 2.14,
        "text": "[Music]"
      },
      {
        "start": 3.76,
        "duration": 2.72,
        "text": "hi"
      },
      {
        "start": 4.24,
        "duration": 3.039,
        "text": "i'm joe chu and welcome to function"
      },
      {
        "start": 6.48,
        "duration": 2.64,
        "text": "queries"
      },
      {
        "start": 7.279,
        "duration": 3.44,
        "text": "in this video we will be talking about"
      },
      {
        "start": 9.12,
        "duration": 3.439,
        "text": "some different parsers that allows a"
      },
      {
        "start": 10.719,
        "duration": 4.08,
        "text": "user to manipulate document scores"
      },
      {
        "start": 12.559,
        "duration": 3.841,
        "text": "using pre-built functions they can be"
      },
      {
        "start": 14.799,
        "duration": 2.24,
        "text": "used in conjunction with the major query"
      },
      {
        "start": 16.4,
        "duration": 3.039,
        "text": "parsers"
      },
      {
        "start": 17.039,
        "duration": 3.761,
        "text": "such as the standard parser diskmax and"
      },
      {
        "start": 19.439,
        "duration": 3.68,
        "text": "edis max parsers"
      },
      {
        "start": 20.8,
        "duration": 4.0,
        "text": "and can be added to the queue fq and"
      },
      {
        "start": 23.119,
        "duration": 3.041,
        "text": "sort parameters in the search query"
      },
      {
        "start": 24.8,
        "duration": 3.28,
        "text": "while the functions can be used to"
      },
      {
        "start": 26.16,
        "duration": 3.439,
        "text": "replace the score of a document please"
      },
      {
        "start": 28.08,
        "duration": 3.68,
        "text": "be aware that it's not possible to"
      },
      {
        "start": 29.599,
        "duration": 3.761,
        "text": "return the result of a function directly"
      },
      {
        "start": 31.76,
        "duration": 3.28,
        "text": "there are two function parsers that we"
      },
      {
        "start": 33.36,
        "duration": 3.44,
        "text": "will be describing in this video"
      },
      {
        "start": 35.04,
        "duration": 3.28,
        "text": "the function query parser and the"
      },
      {
        "start": 36.8,
        "duration": 3.2,
        "text": "function range query parser"
      },
      {
        "start": 38.32,
        "duration": 3.6,
        "text": "the function query parser works by"
      },
      {
        "start": 40.0,
        "duration": 4.0,
        "text": "specifying the parser"
      },
      {
        "start": 41.92,
        "duration": 3.76,
        "text": "and providing a function query in new of"
      },
      {
        "start": 44.0,
        "duration": 3.28,
        "text": "a search query the function query will"
      },
      {
        "start": 45.68,
        "duration": 2.559,
        "text": "then run on all of the documents in the"
      },
      {
        "start": 47.28,
        "duration": 2.72,
        "text": "search index"
      },
      {
        "start": 48.239,
        "duration": 3.84,
        "text": "with the result of the function query"
      },
      {
        "start": 50.0,
        "duration": 3.92,
        "text": "acting as a score for the document"
      },
      {
        "start": 52.079,
        "duration": 3.361,
        "text": "the function range query parser uses a"
      },
      {
        "start": 53.92,
        "duration": 2.639,
        "text": "set of bounds for the output of a"
      },
      {
        "start": 55.44,
        "duration": 3.119,
        "text": "function query"
      },
      {
        "start": 56.559,
        "duration": 3.441,
        "text": "in addition to the relevancy score to"
      },
      {
        "start": 58.559,
        "duration": 3.441,
        "text": "determine documents that are"
      },
      {
        "start": 60.0,
        "duration": 3.44,
        "text": "included in the search results here we"
      },
      {
        "start": 62.0,
        "duration": 2.72,
        "text": "have an example of using the function"
      },
      {
        "start": 63.44,
        "duration": 3.2,
        "text": "query parser"
      },
      {
        "start": 64.72,
        "duration": 3.6,
        "text": "instead of a search query we are using a"
      },
      {
        "start": 66.64,
        "duration": 2.96,
        "text": "function query that divides the value of"
      },
      {
        "start": 68.32,
        "duration": 2.96,
        "text": "the sum ratings column"
      },
      {
        "start": 69.6,
        "duration": 3.36,
        "text": "by the num ratings column which"
      },
      {
        "start": 71.28,
        "duration": 3.28,
        "text": "essentially is generating an average"
      },
      {
        "start": 72.96,
        "duration": 3.28,
        "text": "rating for each document"
      },
      {
        "start": 74.56,
        "duration": 3.68,
        "text": "the output of the function is the score"
      },
      {
        "start": 76.24,
        "duration": 3.76,
        "text": "for the document and will determine what"
      },
      {
        "start": 78.24,
        "duration": 3.76,
        "text": "documents are included in the results"
      },
      {
        "start": 80.0,
        "duration": 3.84,
        "text": "with the highest scores at the front the"
      },
      {
        "start": 82.0,
        "duration": 2.4,
        "text": "second example here is a json search"
      },
      {
        "start": 83.84,
        "duration": 2.56,
        "text": "query"
      },
      {
        "start": 84.4,
        "duration": 3.6,
        "text": "that uses the same function query but"
      },
      {
        "start": 86.4,
        "duration": 3.359,
        "text": "also includes a filter query"
      },
      {
        "start": 88.0,
        "duration": 3.68,
        "text": "that contains a search expression"
      },
      {
        "start": 89.759,
        "duration": 3.441,
        "text": "therefore this json search query will"
      },
      {
        "start": 91.68,
        "duration": 2.32,
        "text": "only return the documents that have a"
      },
      {
        "start": 93.2,
        "duration": 3.599,
        "text": "num ratings"
      },
      {
        "start": 94.0,
        "duration": 4.64,
        "text": "of 100 sorted by the function query only"
      },
      {
        "start": 96.799,
        "duration": 4.081,
        "text": "returning documents that have exactly a"
      },
      {
        "start": 98.64,
        "duration": 4.0,
        "text": "value of 100 sounds limited"
      },
      {
        "start": 100.88,
        "duration": 3.199,
        "text": "which is why our next couple examples"
      },
      {
        "start": 102.64,
        "duration": 2.0,
        "text": "will show how this can be done a bit"
      },
      {
        "start": 104.079,
        "duration": 2.08,
        "text": "better"
      },
      {
        "start": 104.64,
        "duration": 3.759,
        "text": "in our first function range query"
      },
      {
        "start": 106.159,
        "duration": 3.681,
        "text": "example the same function query is used"
      },
      {
        "start": 108.399,
        "duration": 3.601,
        "text": "as our previous examples"
      },
      {
        "start": 109.84,
        "duration": 3.68,
        "text": "except that it uses the f range parser"
      },
      {
        "start": 112.0,
        "duration": 2.56,
        "text": "to determine the bounds for the function"
      },
      {
        "start": 113.52,
        "duration": 2.879,
        "text": "query output"
      },
      {
        "start": 114.56,
        "duration": 3.12,
        "text": "which needs to be between greater than"
      },
      {
        "start": 116.399,
        "duration": 3.76,
        "text": "or equal to 7"
      },
      {
        "start": 117.68,
        "duration": 3.92,
        "text": "and less than 9. the second example uses"
      },
      {
        "start": 120.159,
        "duration": 2.32,
        "text": "the function range query parser as a"
      },
      {
        "start": 121.6,
        "duration": 2.559,
        "text": "filter query"
      },
      {
        "start": 122.479,
        "duration": 3.68,
        "text": "to include only the documents that have"
      },
      {
        "start": 124.159,
        "duration": 3.841,
        "text": "num ratings of 20 or more"
      },
      {
        "start": 126.159,
        "duration": 3.201,
        "text": "it is also possible to use functions"
      },
      {
        "start": 128.0,
        "duration": 2.239,
        "text": "directly in the search query sort"
      },
      {
        "start": 129.36,
        "duration": 2.48,
        "text": "parameter"
      },
      {
        "start": 130.239,
        "duration": 3.441,
        "text": "and gives control to determine the order"
      },
      {
        "start": 131.84,
        "duration": 3.52,
        "text": "direction in these examples"
      },
      {
        "start": 133.68,
        "duration": 3.6,
        "text": "you can see our function query is added"
      },
      {
        "start": 135.36,
        "duration": 3.84,
        "text": "here to return results in either"
      },
      {
        "start": 137.28,
        "duration": 3.44,
        "text": "ascending or descending order here are"
      },
      {
        "start": 139.2,
        "duration": 2.96,
        "text": "some of the common mathematical and"
      },
      {
        "start": 140.72,
        "duration": 3.28,
        "text": "relevancy score related"
      },
      {
        "start": 142.16,
        "duration": 3.84,
        "text": "functions that are available to use with"
      },
      {
        "start": 144.0,
        "duration": 3.599,
        "text": "function queries aside from these"
      },
      {
        "start": 146.0,
        "duration": 3.2,
        "text": "there are much more that can be used"
      },
      {
        "start": 147.599,
        "duration": 3.28,
        "text": "which i invite you to check out"
      },
      {
        "start": 149.2,
        "duration": 8.64,
        "text": "a complete list can be found in the"
      },
      {
        "start": 150.879,
        "duration": 6.961,
        "text": "solar reference guide"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T00:11:48.009618+00:00"
}