{
  "video_id": "mhHM3K-gjeA",
  "title": "DS220.04 Enough CQL To Get You Started | Data Modeling with Apache Cassandra",
  "description": "#DataStaxAcademy #DS220\nDS220.04 Enough CQL To Get You Started\nIn this unit, you will learn just enough Cassandra Query Language, or CQL, to be dangerous. You will need this to create physical data models in Apache Cassandra.\n\nLearn more in our new CQL Basics Video:\nhttps://www.youtube.com/watch?v=_2grkSLXs3w\n\nLEARN FOR FREE at https://academy.datastax.com -- access all the FREE complete courses, tutorials, and hands-on exercises.\n\nASK QUESTIONS at https://community.datastax.com -- where experts from DataStax & the Apache Cassandra community share their expertise everyday.",
  "published_at": "2020-08-14T09:17:18Z",
  "thumbnail": "https://i.ytimg.com/vi/mhHM3K-gjeA/maxresdefault.jpg",
  "channel_title": "DataStax Developers",
  "channel_id": "UCAIQY251avaMv7bBv5PCo-A",
  "tags": [
    "cql",
    "data_modeling",
    "cassandra",
    "query",
    "tutorial",
    "apache_cassandra",
    "datastax"
  ],
  "url": "https://www.youtube.com/watch?v=mhHM3K-gjeA",
  "transcript": {
    "available": true,
    "language": "English (auto-generated)",
    "language_code": "en",
    "is_generated": true,
    "text": "[Music] to create physical data models in cassandra you're going to need to know some cassandra query language or cql in these next few slides i'm going to give you just enough cql syntax to get you started we're going to learn about the basic building blocks of cassandra schema such as key spaces tables and the basic data types that we can store in our tables we'll learn how to load sample data into cassandra from a csv file and some basic cql commands for interacting with data including select truncate alter table and source the key space is the top level container in cassandra that you use to organize a related set of tables you can think of this as equivalent to the concept of a database schema in the relational world a cassandra key space has some additional properties including the required replication settings that describe how many copies or replicas you're asking cassandra to keep of the data that's stored in the tables of this key space this is a great opportunity for us to introduce the cql use command once you've created a key space in cqlsh you may want to select a key space that will be used for your subsequent commands you enter use plus the name of the key space if you don't select a key space with the use command you'll have to include the name of the key space whenever you reference the name of a table so that cassandra will understand the context of your request speaking of tables let's take a quick look at the syntax for creating a table this slide shows us the statements for creating two different tables we'll review the details of the specific syntax in a bit but for now just remember that key spaces contain tables and tables contain our data one thing you may note is that every cassandra table has a primary key as with traditional relational data models expressed in sql cassandra primary keys uniquely identify rows of data in this example we see a uuid used as a primary key to uniquely identify each user in our users table let's introduce a few of the basic data types that we can use to define columns in our tables the most commonly used types are the text or varchar type which represents a utf-8 encoded string and the int type which represents a signed 32-bit integer as we saw previously it is also common to use unique identifiers as primary keys to guarantee unique rows in our tables cassandra supports type 4 uuids based on random numbers through the uuid type and type 1 timestamp-based uuids through the time uuid type cql provides the uuid and now these are convenience functions that allow cassandra to select unique identifiers on your behalf when you're inserting records another useful type is the timestamp type this represents a date and a time as a 64-bit integer the integer value represents the number of milliseconds since january 1 1970 at midnight gmt cassandra uses iso 8601 formats as shown on the slide for inputting and outputting timestamps now that we've learned some basic cql types let's learn some commands that can help us start working with data the first command we'll look at is the copy command the copy command is a symbol command that allows us to import and export data in comma separated variable or csv format as you can see from the syntax shown on the slide we can select specific columns in a table for import or export the use of a header in the csv files is optional we'll make use of this command in our exercise to load some sample video data we use the cql select command to read data from cassandra typically on a read we specify some or all of the partition key in order to identify specific rows we can also select all rows of a table using the asterisk notation which causes cassandra to perform a full table scan a warning here is that this could be a very expensive operation on a table with a large number of rows we can use the limit keyword to get a subset of the rows to help mitigate this problem and cassandra also supports a paging mechanism which we won't cover in detail here we can indicate specific columns we desire to read by name or use the asterisk to indicate all columns cassandra also supports a couple of built-in aggregation functions such as the count function and again the performance warning i gave earlier applies here for counts on larger tables you may want to consider using spark part of dse analytics another command we'll find useful in our exercise is the truncate command just like in sql a truncate causes all rows to be deleted from a table while leaving the schema in place this command should obviously be used with care as the data is removed from persistent storage and you would have to restore it from a backup to get it back you will be doing backups right see our other courses to learn more about that in working with cassandra you'll most likely encounter situations when you need to make changes to your schema this is where the alter table command comes into play you can use this command to add or remove columns from a table with the caveat that you cannot remove a column that is a part of your primary key we'll explain this concept of multi-column primary keys in a bit the last cql command we'll talk about in this quick start is the source command the source command allows you to execute a set of cql statements in a file to execute a source command you'll want to put the file name in single quotes cqlsh will output the results of each command as it executes this functionality is very handy as it is also supported from the command line and many users take advantage of this to automate the loading of schema for their development and production deployments of cassandra now let's do an exercise that uses all the cql commands that you've just [Music] learned",
    "segments": [
      {
        "start": 1.47,
        "duration": 5.32,
        "text": "[Music]"
      },
      {
        "start": 7.12,
        "duration": 3.04,
        "text": "to create"
      },
      {
        "start": 7.839,
        "duration": 3.281,
        "text": "physical data models in cassandra you're"
      },
      {
        "start": 10.16,
        "duration": 4.0,
        "text": "going to need to know"
      },
      {
        "start": 11.12,
        "duration": 4.8,
        "text": "some cassandra query language or cql in"
      },
      {
        "start": 14.16,
        "duration": 2.16,
        "text": "these next few slides i'm going to give"
      },
      {
        "start": 15.92,
        "duration": 2.64,
        "text": "you"
      },
      {
        "start": 16.32,
        "duration": 3.44,
        "text": "just enough cql syntax to get you"
      },
      {
        "start": 18.56,
        "duration": 2.719,
        "text": "started"
      },
      {
        "start": 19.76,
        "duration": 3.519,
        "text": "we're going to learn about the basic"
      },
      {
        "start": 21.279,
        "duration": 2.321,
        "text": "building blocks of cassandra schema such"
      },
      {
        "start": 23.279,
        "duration": 3.041,
        "text": "as"
      },
      {
        "start": 23.6,
        "duration": 4.96,
        "text": "key spaces tables and the basic data"
      },
      {
        "start": 26.32,
        "duration": 4.4,
        "text": "types that we can store in our tables"
      },
      {
        "start": 28.56,
        "duration": 3.92,
        "text": "we'll learn how to load sample data into"
      },
      {
        "start": 30.72,
        "duration": 4.88,
        "text": "cassandra from a csv"
      },
      {
        "start": 32.48,
        "duration": 4.8,
        "text": "file and some basic cql commands for"
      },
      {
        "start": 35.6,
        "duration": 5.52,
        "text": "interacting with data"
      },
      {
        "start": 37.28,
        "duration": 6.56,
        "text": "including select truncate alter table"
      },
      {
        "start": 41.12,
        "duration": 4.8,
        "text": "and source the key space is the top"
      },
      {
        "start": 43.84,
        "duration": 5.36,
        "text": "level container in cassandra that you"
      },
      {
        "start": 45.92,
        "duration": 5.119,
        "text": "use to organize a related set of tables"
      },
      {
        "start": 49.2,
        "duration": 4.08,
        "text": "you can think of this as equivalent to"
      },
      {
        "start": 51.039,
        "duration": 3.761,
        "text": "the concept of a database schema in the"
      },
      {
        "start": 53.28,
        "duration": 3.2,
        "text": "relational world"
      },
      {
        "start": 54.8,
        "duration": 3.599,
        "text": "a cassandra key space has some"
      },
      {
        "start": 56.48,
        "duration": 4.32,
        "text": "additional properties including"
      },
      {
        "start": 58.399,
        "duration": 3.041,
        "text": "the required replication settings that"
      },
      {
        "start": 60.8,
        "duration": 2.88,
        "text": "describe"
      },
      {
        "start": 61.44,
        "duration": 3.84,
        "text": "how many copies or replicas you're"
      },
      {
        "start": 63.68,
        "duration": 3.439,
        "text": "asking cassandra to keep"
      },
      {
        "start": 65.28,
        "duration": 3.76,
        "text": "of the data that's stored in the tables"
      },
      {
        "start": 67.119,
        "duration": 3.841,
        "text": "of this key space"
      },
      {
        "start": 69.04,
        "duration": 3.759,
        "text": "this is a great opportunity for us to"
      },
      {
        "start": 70.96,
        "duration": 4.159,
        "text": "introduce the cql"
      },
      {
        "start": 72.799,
        "duration": 4.401,
        "text": "use command once you've created a key"
      },
      {
        "start": 75.119,
        "duration": 4.081,
        "text": "space in cqlsh"
      },
      {
        "start": 77.2,
        "duration": 3.68,
        "text": "you may want to select a key space that"
      },
      {
        "start": 79.2,
        "duration": 2.72,
        "text": "will be used for your subsequent"
      },
      {
        "start": 80.88,
        "duration": 3.68,
        "text": "commands"
      },
      {
        "start": 81.92,
        "duration": 3.36,
        "text": "you enter use plus the name of the key"
      },
      {
        "start": 84.56,
        "duration": 2.72,
        "text": "space"
      },
      {
        "start": 85.28,
        "duration": 3.04,
        "text": "if you don't select a key space with the"
      },
      {
        "start": 87.28,
        "duration": 2.64,
        "text": "use command"
      },
      {
        "start": 88.32,
        "duration": 3.6,
        "text": "you'll have to include the name of the"
      },
      {
        "start": 89.92,
        "duration": 3.28,
        "text": "key space whenever you reference the"
      },
      {
        "start": 91.92,
        "duration": 2.879,
        "text": "name of a table"
      },
      {
        "start": 93.2,
        "duration": 4.0,
        "text": "so that cassandra will understand the"
      },
      {
        "start": 94.799,
        "duration": 4.401,
        "text": "context of your request"
      },
      {
        "start": 97.2,
        "duration": 4.64,
        "text": "speaking of tables let's take a quick"
      },
      {
        "start": 99.2,
        "duration": 4.559,
        "text": "look at the syntax for creating a table"
      },
      {
        "start": 101.84,
        "duration": 3.919,
        "text": "this slide shows us the statements for"
      },
      {
        "start": 103.759,
        "duration": 4.32,
        "text": "creating two different tables"
      },
      {
        "start": 105.759,
        "duration": 3.841,
        "text": "we'll review the details of the specific"
      },
      {
        "start": 108.079,
        "duration": 3.761,
        "text": "syntax in a bit"
      },
      {
        "start": 109.6,
        "duration": 3.199,
        "text": "but for now just remember that key"
      },
      {
        "start": 111.84,
        "duration": 4.0,
        "text": "spaces contain"
      },
      {
        "start": 112.799,
        "duration": 4.801,
        "text": "tables and tables contain our data"
      },
      {
        "start": 115.84,
        "duration": 4.08,
        "text": "one thing you may note is that every"
      },
      {
        "start": 117.6,
        "duration": 4.4,
        "text": "cassandra table has a primary key"
      },
      {
        "start": 119.92,
        "duration": 4.08,
        "text": "as with traditional relational data"
      },
      {
        "start": 122.0,
        "duration": 4.799,
        "text": "models expressed in sql"
      },
      {
        "start": 124.0,
        "duration": 4.0,
        "text": "cassandra primary keys uniquely identify"
      },
      {
        "start": 126.799,
        "duration": 4.08,
        "text": "rows of data"
      },
      {
        "start": 128.0,
        "duration": 4.08,
        "text": "in this example we see a uuid used as a"
      },
      {
        "start": 130.879,
        "duration": 3.761,
        "text": "primary key"
      },
      {
        "start": 132.08,
        "duration": 3.6,
        "text": "to uniquely identify each user in our"
      },
      {
        "start": 134.64,
        "duration": 3.36,
        "text": "users table"
      },
      {
        "start": 135.68,
        "duration": 4.0,
        "text": "let's introduce a few of the basic data"
      },
      {
        "start": 138.0,
        "duration": 4.56,
        "text": "types that we can use to define"
      },
      {
        "start": 139.68,
        "duration": 3.84,
        "text": "columns in our tables the most commonly"
      },
      {
        "start": 142.56,
        "duration": 3.759,
        "text": "used types"
      },
      {
        "start": 143.52,
        "duration": 5.68,
        "text": "are the text or varchar type which"
      },
      {
        "start": 146.319,
        "duration": 5.361,
        "text": "represents a utf-8 encoded string"
      },
      {
        "start": 149.2,
        "duration": 4.24,
        "text": "and the int type which represents a"
      },
      {
        "start": 151.68,
        "duration": 4.0,
        "text": "signed 32-bit integer"
      },
      {
        "start": 153.44,
        "duration": 4.72,
        "text": "as we saw previously it is also common"
      },
      {
        "start": 155.68,
        "duration": 3.199,
        "text": "to use unique identifiers as primary"
      },
      {
        "start": 158.16,
        "duration": 3.6,
        "text": "keys"
      },
      {
        "start": 158.879,
        "duration": 4.08,
        "text": "to guarantee unique rows in our tables"
      },
      {
        "start": 161.76,
        "duration": 4.479,
        "text": "cassandra supports"
      },
      {
        "start": 162.959,
        "duration": 6.321,
        "text": "type 4 uuids based on random numbers"
      },
      {
        "start": 166.239,
        "duration": 6.401,
        "text": "through the uuid type and"
      },
      {
        "start": 169.28,
        "duration": 6.64,
        "text": "type 1 timestamp-based uuids through the"
      },
      {
        "start": 172.64,
        "duration": 6.48,
        "text": "time uuid type cql"
      },
      {
        "start": 175.92,
        "duration": 4.959,
        "text": "provides the uuid and now these are"
      },
      {
        "start": 179.12,
        "duration": 4.24,
        "text": "convenience functions that allow"
      },
      {
        "start": 180.879,
        "duration": 3.681,
        "text": "cassandra to select unique identifiers"
      },
      {
        "start": 183.36,
        "duration": 3.76,
        "text": "on your behalf"
      },
      {
        "start": 184.56,
        "duration": 3.44,
        "text": "when you're inserting records another"
      },
      {
        "start": 187.12,
        "duration": 3.68,
        "text": "useful type"
      },
      {
        "start": 188.0,
        "duration": 5.44,
        "text": "is the timestamp type this represents a"
      },
      {
        "start": 190.8,
        "duration": 4.719,
        "text": "date and a time as a 64-bit integer"
      },
      {
        "start": 193.44,
        "duration": 4.24,
        "text": "the integer value represents the number"
      },
      {
        "start": 195.519,
        "duration": 6.64,
        "text": "of milliseconds since january 1"
      },
      {
        "start": 197.68,
        "duration": 7.44,
        "text": "1970 at midnight gmt cassandra uses iso"
      },
      {
        "start": 202.159,
        "duration": 6.08,
        "text": "8601 formats as shown on the slide"
      },
      {
        "start": 205.12,
        "duration": 5.119,
        "text": "for inputting and outputting timestamps"
      },
      {
        "start": 208.239,
        "duration": 4.0,
        "text": "now that we've learned some basic cql"
      },
      {
        "start": 210.239,
        "duration": 2.56,
        "text": "types let's learn some commands that can"
      },
      {
        "start": 212.239,
        "duration": 2.961,
        "text": "help us"
      },
      {
        "start": 212.799,
        "duration": 3.36,
        "text": "start working with data the first"
      },
      {
        "start": 215.2,
        "duration": 3.84,
        "text": "command we'll look at"
      },
      {
        "start": 216.159,
        "duration": 3.761,
        "text": "is the copy command the copy command is"
      },
      {
        "start": 219.04,
        "duration": 3.119,
        "text": "a symbol command"
      },
      {
        "start": 219.92,
        "duration": 4.08,
        "text": "that allows us to import and export data"
      },
      {
        "start": 222.159,
        "duration": 5.201,
        "text": "in comma separated variable"
      },
      {
        "start": 224.0,
        "duration": 4.879,
        "text": "or csv format as you can see from the"
      },
      {
        "start": 227.36,
        "duration": 3.84,
        "text": "syntax shown on the slide"
      },
      {
        "start": 228.879,
        "duration": 4.801,
        "text": "we can select specific columns in a"
      },
      {
        "start": 231.2,
        "duration": 5.2,
        "text": "table for import or export"
      },
      {
        "start": 233.68,
        "duration": 3.52,
        "text": "the use of a header in the csv files is"
      },
      {
        "start": 236.4,
        "duration": 2.479,
        "text": "optional"
      },
      {
        "start": 237.2,
        "duration": 3.039,
        "text": "we'll make use of this command in our"
      },
      {
        "start": 238.879,
        "duration": 4.961,
        "text": "exercise to load"
      },
      {
        "start": 240.239,
        "duration": 5.761,
        "text": "some sample video data we use the cql"
      },
      {
        "start": 243.84,
        "duration": 3.44,
        "text": "select command to read data from"
      },
      {
        "start": 246.0,
        "duration": 4.08,
        "text": "cassandra"
      },
      {
        "start": 247.28,
        "duration": 4.72,
        "text": "typically on a read we specify some or"
      },
      {
        "start": 250.08,
        "duration": 2.64,
        "text": "all of the partition key in order to"
      },
      {
        "start": 252.0,
        "duration": 3.68,
        "text": "identify"
      },
      {
        "start": 252.72,
        "duration": 3.919,
        "text": "specific rows we can also select all"
      },
      {
        "start": 255.68,
        "duration": 3.519,
        "text": "rows of a table"
      },
      {
        "start": 256.639,
        "duration": 3.761,
        "text": "using the asterisk notation which causes"
      },
      {
        "start": 259.199,
        "duration": 4.241,
        "text": "cassandra to perform"
      },
      {
        "start": 260.4,
        "duration": 5.28,
        "text": "a full table scan a warning here is that"
      },
      {
        "start": 263.44,
        "duration": 4.96,
        "text": "this could be a very expensive operation"
      },
      {
        "start": 265.68,
        "duration": 5.28,
        "text": "on a table with a large number of rows"
      },
      {
        "start": 268.4,
        "duration": 4.72,
        "text": "we can use the limit keyword to get a"
      },
      {
        "start": 270.96,
        "duration": 3.36,
        "text": "subset of the rows to help mitigate this"
      },
      {
        "start": 273.12,
        "duration": 3.44,
        "text": "problem"
      },
      {
        "start": 274.32,
        "duration": 4.4,
        "text": "and cassandra also supports a paging"
      },
      {
        "start": 276.56,
        "duration": 3.04,
        "text": "mechanism which we won't cover in detail"
      },
      {
        "start": 278.72,
        "duration": 2.88,
        "text": "here"
      },
      {
        "start": 279.6,
        "duration": 3.84,
        "text": "we can indicate specific columns we"
      },
      {
        "start": 281.6,
        "duration": 4.319,
        "text": "desire to read by name"
      },
      {
        "start": 283.44,
        "duration": 3.199,
        "text": "or use the asterisk to indicate all"
      },
      {
        "start": 285.919,
        "duration": 2.801,
        "text": "columns"
      },
      {
        "start": 286.639,
        "duration": 4.0,
        "text": "cassandra also supports a couple of"
      },
      {
        "start": 288.72,
        "duration": 4.72,
        "text": "built-in aggregation functions"
      },
      {
        "start": 290.639,
        "duration": 4.721,
        "text": "such as the count function and again the"
      },
      {
        "start": 293.44,
        "duration": 3.36,
        "text": "performance warning i gave earlier"
      },
      {
        "start": 295.36,
        "duration": 3.76,
        "text": "applies here"
      },
      {
        "start": 296.8,
        "duration": 3.92,
        "text": "for counts on larger tables you may want"
      },
      {
        "start": 299.12,
        "duration": 4.48,
        "text": "to consider using spark"
      },
      {
        "start": 300.72,
        "duration": 4.8,
        "text": "part of dse analytics another command"
      },
      {
        "start": 303.6,
        "duration": 5.12,
        "text": "we'll find useful in our exercise"
      },
      {
        "start": 305.52,
        "duration": 5.679,
        "text": "is the truncate command just like in sql"
      },
      {
        "start": 308.72,
        "duration": 3.44,
        "text": "a truncate causes all rows to be deleted"
      },
      {
        "start": 311.199,
        "duration": 3.28,
        "text": "from a table"
      },
      {
        "start": 312.16,
        "duration": 4.16,
        "text": "while leaving the schema in place this"
      },
      {
        "start": 314.479,
        "duration": 2.401,
        "text": "command should obviously be used with"
      },
      {
        "start": 316.32,
        "duration": 2.56,
        "text": "care"
      },
      {
        "start": 316.88,
        "duration": 3.92,
        "text": "as the data is removed from persistent"
      },
      {
        "start": 318.88,
        "duration": 4.0,
        "text": "storage and you would have to restore it"
      },
      {
        "start": 320.8,
        "duration": 4.72,
        "text": "from a backup to get it back"
      },
      {
        "start": 322.88,
        "duration": 4.8,
        "text": "you will be doing backups right see our"
      },
      {
        "start": 325.52,
        "duration": 3.92,
        "text": "other courses to learn more about that"
      },
      {
        "start": 327.68,
        "duration": 3.68,
        "text": "in working with cassandra you'll most"
      },
      {
        "start": 329.44,
        "duration": 2.72,
        "text": "likely encounter situations when you"
      },
      {
        "start": 331.36,
        "duration": 3.36,
        "text": "need to make"
      },
      {
        "start": 332.16,
        "duration": 5.84,
        "text": "changes to your schema this is where the"
      },
      {
        "start": 334.72,
        "duration": 5.28,
        "text": "alter table command comes into play you"
      },
      {
        "start": 338.0,
        "duration": 3.28,
        "text": "can use this command to add or remove"
      },
      {
        "start": 340.0,
        "duration": 3.36,
        "text": "columns from a table"
      },
      {
        "start": 341.28,
        "duration": 4.16,
        "text": "with the caveat that you cannot remove a"
      },
      {
        "start": 343.36,
        "duration": 2.48,
        "text": "column that is a part of your primary"
      },
      {
        "start": 345.44,
        "duration": 2.08,
        "text": "key"
      },
      {
        "start": 345.84,
        "duration": 3.6,
        "text": "we'll explain this concept of"
      },
      {
        "start": 347.52,
        "duration": 4.959,
        "text": "multi-column primary keys"
      },
      {
        "start": 349.44,
        "duration": 4.4,
        "text": "in a bit the last cql command we'll talk"
      },
      {
        "start": 352.479,
        "duration": 4.401,
        "text": "about in this quick start"
      },
      {
        "start": 353.84,
        "duration": 5.28,
        "text": "is the source command the source command"
      },
      {
        "start": 356.88,
        "duration": 3.759,
        "text": "allows you to execute a set of cql"
      },
      {
        "start": 359.12,
        "duration": 3.68,
        "text": "statements in a file"
      },
      {
        "start": 360.639,
        "duration": 4.4,
        "text": "to execute a source command you'll want"
      },
      {
        "start": 362.8,
        "duration": 4.8,
        "text": "to put the file name in single quotes"
      },
      {
        "start": 365.039,
        "duration": 3.121,
        "text": "cqlsh will output the results of each"
      },
      {
        "start": 367.6,
        "duration": 2.719,
        "text": "command"
      },
      {
        "start": 368.16,
        "duration": 4.4,
        "text": "as it executes this functionality is"
      },
      {
        "start": 370.319,
        "duration": 3.361,
        "text": "very handy as it is also supported from"
      },
      {
        "start": 372.56,
        "duration": 3.28,
        "text": "the command line"
      },
      {
        "start": 373.68,
        "duration": 4.0,
        "text": "and many users take advantage of this to"
      },
      {
        "start": 375.84,
        "duration": 3.28,
        "text": "automate the loading of schema"
      },
      {
        "start": 377.68,
        "duration": 3.359,
        "text": "for their development and production"
      },
      {
        "start": 379.12,
        "duration": 4.32,
        "text": "deployments of cassandra"
      },
      {
        "start": 381.039,
        "duration": 4.861,
        "text": "now let's do an exercise that uses all"
      },
      {
        "start": 383.44,
        "duration": 4.199,
        "text": "the cql commands that you've just"
      },
      {
        "start": 385.9,
        "duration": 4.739,
        "text": "[Music]"
      },
      {
        "start": 387.639,
        "duration": 3.0,
        "text": "learned"
      }
    ],
    "error": null,
    "error_type": null
  },
  "collected_at": "2025-12-16T01:00:10.833169+00:00"
}